#* Original Properties

start_from_step: 0
shelf_fn: save_state
restart_epoch: 0
restart_iter: 0
pull_sim_files_from_debug_folder: False
lumapi_filepath_local: C:\Program Files\Lumerical\v212\api\python\lumapi.py
lumapi_filepath_hpc: /central/home/ifoo/lumerical/2021a_r22/api/python/lumapi.py
simulator_name: LumericalFDTD
simulator_dimension: 2D
simulator_max_wait_time: 3600
use_autograd: False
convert_existing: False
mesh_spacing_um: 0.051
geometry_spacing_lateral_um: 0.085
device_scale_um: 0.051
use_smooth_blur: False
min_feature_size_um: 0.085
background_index: 1.5
min_device_index: 1.5
max_device_index: 2.4
init_permittivity_0_1_scale: 0.5
binarize_3_levels: False
focal_plane_center_lateral_um: 0
num_vertical_layers: 20
vertical_layer_height_um: 0.102
device_size_lateral_um: 2.04
device_vertical_minimum_um: 0
substrates_above_device: [{'name': 'glass_substrate', 'thickness_um': 0.4, 'material': 'SiO2 (Glass) - Palik'}]
substrate_thickness_um: 0.4
num_sidewalls: 0
sidewall_material: etch
sidewall_extend_pml: False
sidewall_extend_focalplane: True
sidewall_thickness_um: 0.085
sidewall_vertical_minimum_um: -0.765
add_infrared: False
lambda_min_um: 0.4
lambda_max_um: 0.7
lambda_min_eval_um: 0.4
lambda_max_eval_um: 0.7
num_bands: 2
num_points_per_band: 15
num_dispersive_ranges: 1
add_pdaf: False
pdaf_angle_phi_degrees: 45
pdaf_angle_theta_degrees: -8
pdaf_adj_src_idx: 0
fdtd_simulation_time_fs: 600
weight_by_individual_wavelength: True
use_gaussian_sources: True
use_airy_approximation: True
f_number: 2.2
airy_correction_factor: 0.84
beam_size_multiplier: 1
source_angle_theta_vacuum_deg: 0
source_angle_phi_deg: 0
xy_phi_rotations: [0, 90]
xy_adjtheta_rotations: [90, 0]
xy_pol_rotations: [0, 90]
xy_names: ['x', 'y']
use_source_aperture: True
num_focal_spots: 2
dispersive_range_to_adjoint_src_map: [[0, 1, 2, 3]]
adjoint_src_to_dispersive_range_map: [0, 0, 0, 0]
enforce_xy_gradient_symmetry: False
weight_by_quadrant_transmission: True
total_num_iterations: 20
epoch_list: [0, 4, 8, 12, 16, 20]
epoch_start_design_change_max: 0.15
epoch_end_design_change_max: 0.05
epoch_start_design_change_min: 0.05
epoch_end_design_change_min: 0
fom_types: ['transmission', 'overall_transmission', 'intensity']
optimization_fom: intensity
reinterpolate_permittivity: True
reinterpolate_permittivity_factor: 2
reinterpolate_type: nearest
border_optimization: False
layer_gradient: False
flip_gradient: False
polarizations_focal_plane_map: [['x', 'y'], ['x', 'y'], ['x', 'y'], ['x', 'y']]
weight_focal_plane_map_performance_weighting: [1.0, 1.0, 1.0, 1.0]
weight_focal_plane_map: [1.0, 1.0, 1.0, 1.0]
do_green_balance: False
polarization_name_to_idx: {'x': 0, 'y': 1, 'z': 2}
desired_peaks_per_band_um: [0.475, 0.625]
explicit_band_centering: True
shuffle_green: False
infrared_center_um: 0.94
do_rejection: False
softplus_kappa: 2
boundary_conditions: pml
evaluate_bordered_extended: False
do_normalize: False
should_fix_layers: False
fixed_layers: [1, 2, 3, 5, 6, 7]
fixed_layers_density: 0
mpi_exe: C:\Program Files (x86)\IntelSWToolsMPI\compilers_and_libraries_2020.4.321\windows\mpi\intel64\bin\mpiexec.exe
solver_exe: C:\Program Files\Lumerical\v212\bin\fdtd-engine-impi.exe
nprocs: 8
optimizer: AdamOptimizer
optimizer_settings: {'step_size': 0.01, 'betas': [0.9, 0.999], 'eps': '1e-8', 'moments': [0.0, 0.0]}
fom_dict: [{'fwd': [0], 'adj': [0], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}, {'fwd': [0], 'adj': [2], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}]
figures_of_merit: {'fom_0': {'type': 'BayerFilterFoM', 'fwd_srcs': ['forward_src_x'], 'adj_srcs': ['adj_src_0x'], 'fom_monitors': ['focal_monitor_0', 'transmission_monitor_0', 'design_efield_monitor'], 'grad_monitors': ['design_efield_monitor'], 'polarization': 'TE', 'pos_max_freqs': [], 'neg_min_freqs': [], 'weight': 1.0}, 'fom_1': {'type': 'BayerFilterFoM', 'fwd_srcs': ['forward_src_x'], 'adj_srcs': ['adj_src_1x'], 'fom_monitors': ['focal_monitor_1', 'transmission_monitor_1', 'design_efield_monitor'], 'grad_monitors': ['design_efield_monitor'], 'polarization': 'TE', 'pos_max_freqs': [], 'neg_min_freqs': [], 'weight': 1.0}}


#
# Derived Properties
#

#* Mesh Properties

min_feature_size_voxels: 1.0
blur_half_width_voxels: 0

#* Optical Properties
min_device_permittivity: 2.25
max_device_permittivity: 5.76
focal_length_um: 1.5299999999999998
focal_plane_center_vertical_um: -1.5299999999999998

#* Device Properties
vertical_layer_height_voxels: 2
device_size_vertical_um: 2.04
device_voxels_lateral: 24
device_voxels_vertical: 40
device_voxels_simulation_mesh_lateral: 41
                            
device_voxels_simulation_mesh_vertical: 42
device_vertical_maximum_um: 2.04
device_size_lateral_bordered_um: 2.04
device_voxels_simulation_mesh_lateral_bordered: 41
border_size_um: 0.255
border_size_voxels: 3
device_voxels_lateral_bordered: 24

#* FDTD Properties

vertical_gap_size_um: 2.125
lateral_gap_size_um: 0.51
fdtd_region_size_vertical_um: 7.82
fdtd_region_size_lateral_um: 3.06
fdtd_region_maximum_vertical_um: 4.165
fdtd_region_minimum_vertical_um: -3.655

#* Surrounding Properties
pec_aperture_thickness_um: 0.153
substrate_thickness_um: 0.4
sidewall_x_positions_um: [1.0625, 0, -1.0625, 0]
sidewall_y_positions_um: [0, 1.0625, 0, -1.0625]
sidewall_xspan_positions_um: [0.085, 2.21, 0.085, 2.21]
sidewall_yspan_positions_um: [2.21, 0.085, 2.21, 0.085]

#* Spectral Properties
bandwidth_um: 0.29999999999999993
num_design_frequency_points: 30
num_eval_frequency_points: 180
lambda_values_um: [0.4, 0.41034482758620694, 0.4206896551724138, 0.4310344827586207, 0.4413793103448276, 0.4517241379310345, 0.4620689655172414, 0.4724137931034483, 0.4827586206896552, 0.49310344827586206, 0.503448275862069, 0.5137931034482759, 0.5241379310344827, 0.5344827586206896, 0.5448275862068965, 0.5551724137931034, 0.5655172413793104, 0.5758620689655172, 0.5862068965517241, 0.596551724137931, 0.6068965517241379, 0.6172413793103448, 0.6275862068965516, 0.6379310344827586, 0.6482758620689655, 0.6586206896551724, 0.6689655172413793, 0.6793103448275861, 0.6896551724137931, 0.7]
max_intensity_by_wavelength: [46.24, 43.93795918367347, 41.8036441816716, 39.82114816, 37.976406250000004, 36.25694539945225, 34.65167297839162, 33.150697426607714, 31.745175510204085, 30.42718176927968, 29.189596547194597, 28.026009639205444, 26.930637119113584, 25.898249323621236, 24.92410831597501, 24.00391342926585, 23.13375371802499, 22.310066334397085, 21.52960000000001, 20.789382872798964, 20.086694214876037, 19.41903935582535, 18.784127520830825, 18.179852154857567, 17.60427342689, 17.05560264247143, 16.532188330322036, 16.0325038006648, 15.555136000000001, 15.098775510204087]
dispersive_range_size_um: 0.29999999999999993
dispersive_ranges_um: [[0.4, 0.7]]

#* PDAF Functionality Properties
pdaf_focal_spot_x_um: 0.51
pdaf_focal_spot_y_um: 0.51
pdaf_lambda_min_um: 0.4
pdaf_lambda_max_um: 0.5
pdaf_lambda_values_um: [0.4, 0.403448275862069, 0.40689655172413797, 0.41034482758620694, 0.41379310344827586, 0.41724137931034483, 0.4206896551724138, 0.4241379310344828, 0.42758620689655175, 0.4310344827586207, 0.4344827586206897, 0.4379310344827586, 0.4413793103448276, 0.44482758620689655, 0.4482758620689655, 0.4517241379310345, 0.45517241379310347, 0.45862068965517244, 0.4620689655172414, 0.46551724137931033, 0.4689655172413793, 0.4724137931034483, 0.47586206896551725, 0.4793103448275862, 0.48275862068965514, 0.4862068965517241, 0.4896551724137931, 0.49310344827586206, 0.496551724137931, 0.5]
pdaf_max_intensity_by_wavelength: [46.24, 45.4529505442326, 44.68582591209423, 43.93795918367347, 43.20871111111112, 42.497468752134424, 41.8036441816716, 41.126673276488866, 40.46601456815818, 39.82114816, 39.19157470395565, 38.576814433628876, 37.976406250000004, 37.38990685655911, 36.81688994082841, 36.25694539945225, 35.70967860422407, 35.17470970659732, 34.65167297839162, 34.140216186556934, 33.64000000000001, 33.150697426607714, 32.67199327872296, 32.203583665441755, 31.745175510204092, 31.296486092248887, 30.857242610593147, 30.42718176927968, 30.006049382716053, 29.593600000000006]

#* Forward (Input) Source Properties
lateral_aperture_um: 2.244
src_maximum_vertical_um: 3.810833333333333
src_minimum_vertical_um: -2.5925
mid_lambda_um: 0.55
gaussian_waist_radius_um: 1
source_angle_theta_rad: 0.0
source_angle_theta_deg: 0.0

#* Adjoint Source Properties
adjoint_vertical_um: -1.5299999999999998
num_adjoint_sources: 2
adjoint_x_positions_um: [0.51, -0.51, -0.51, 0.51]
adjoint_y_positions_um: [0.51, 0.51, -0.51, -0.51]

#* Optimization Properties
total_iters: 20 
epoch_range_design_change_max: 0.09999999999999999
epoch_range_design_change_min: 0.05
spectral_focal_plane_map: [[0, 15], [15, 30], [30, 45], [15, 30]]
desired_peak_location_per_band: [7, 22]