#* Original Properties

start_from_step: 0
shelf_fn: save_state
restart_epoch: 0
restart_iter: 0
pull_sim_files_from_debug_folder: False
lumapi_filepath_local: C:\Program Files\Lumerical\v212\api\python\lumapi.py
lumapi_filepath_hpc: /central/home/ifoo/lumerical/2021a_r22/api/python/lumapi.py
simulator_name: LumericalFDTD
simulator_dimension: 2D
simulator_max_wait_time: 3600
use_autograd: False
convert_existing: False
mesh_spacing_um: 0.051
geometry_spacing_lateral_um: 0.085
device_scale_um: 0.051
use_smooth_blur: False
min_feature_size_um: 0.085
background_index: 1.5
min_device_index: 1.5
max_device_index: 2.4
init_permittivity_0_1_scale: 0.5
binarize_3_levels: False
focal_plane_center_lateral_um: 0
num_vertical_layers: 20
vertical_layer_height_um: 0.102
device_size_lateral_um: 3.06
device_vertical_minimum_um: 0
substrates_above_device: [{'name': 'glass_substrate', 'thickness_um': 0.4, 'material': 'SiO2 (Glass) - Palik'}]
substrate_thickness_um: 0.4
num_sidewalls: 0
sidewall_material: etch
sidewall_extend_pml: False
sidewall_extend_focalplane: True
sidewall_thickness_um: 0.085
sidewall_vertical_minimum_um: -0.765
add_infrared: False
lambda_min_um: 0.4
lambda_max_um: 0.7
lambda_min_eval_um: 0.4
lambda_max_eval_um: 0.7
num_bands: 2
num_points_per_band: 15
num_dispersive_ranges: 1
add_pdaf: False
pdaf_angle_phi_degrees: 45
pdaf_angle_theta_degrees: -8
pdaf_adj_src_idx: 0
fdtd_simulation_time_fs: 600
weight_by_individual_wavelength: True
use_gaussian_sources: True
use_airy_approximation: True
f_number: 2.2
airy_correction_factor: 0.84
beam_size_multiplier: 1
source_angle_theta_vacuum_deg: 0
source_angle_phi_deg: 0
xy_phi_rotations: [0, 90]
xy_adjtheta_rotations: [90, 0]
xy_pol_rotations: [0, 90]
xy_names: ['x', 'y']
use_source_aperture: True
num_focal_spots: 2
dispersive_range_to_adjoint_src_map: [[0, 1, 2, 3]]
adjoint_src_to_dispersive_range_map: [0, 0, 0, 0]
enforce_xy_gradient_symmetry: False
weight_by_quadrant_transmission: True
total_num_iterations: 80
epoch_list: [0, 16, 32, 48, 64, 80]
epoch_start_design_change_max: 0.15
epoch_end_design_change_max: 0.05
epoch_start_design_change_min: 0.05
epoch_end_design_change_min: 0
fom_types: ['transmission', 'overall_transmission', 'intensity']
optimization_fom: intensity
reinterpolate_permittivity: True
reinterpolate_permittivity_factor: 2
reinterpolate_type: nearest
border_optimization: False
layer_gradient: False
flip_gradient: False
polarizations_focal_plane_map: [['x', 'y'], ['x', 'y'], ['x', 'y'], ['x', 'y']]
weight_focal_plane_map_performance_weighting: [1.0, 1.0, 1.0, 1.0]
weight_focal_plane_map: [1.0, 1.0, 1.0, 1.0]
do_green_balance: False
polarization_name_to_idx: {'x': 0, 'y': 1, 'z': 2}
desired_peaks_per_band_um: [0.475, 0.625]
explicit_band_centering: True
shuffle_green: False
infrared_center_um: 0.94
do_rejection: False
softplus_kappa: 2
boundary_conditions: pml
evaluate_bordered_extended: False
do_normalize: False
should_fix_layers: False
fixed_layers: [1, 2, 3, 5, 6, 7]
fixed_layers_density: 0
mpi_exe: C:\Program Files (x86)\IntelSWToolsMPI\compilers_and_libraries_2020.4.321\windows\mpi\intel64\bin\mpiexec.exe
solver_exe: C:\Program Files\Lumerical\v212\bin\fdtd-engine-impi.exe
nprocs: 8
optimizer: AdamOptimizer
optimizer_settings: {'step_size': 0.01, 'betas': [0.9, 0.999], 'eps': '1e-8', 'moments': [0.0, 0.0]}
fom_dict: [{'fwd': [0], 'adj': [0], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}, {'fwd': [0], 'adj': [2], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}]
figures_of_merit: {'fom_0': {'type': 'BayerFilterFoM', 'fwd_srcs': ['forward_src_x'], 'adj_srcs': ['adj_src_0x'], 'fom_monitors': ['focal_monitor_0', 'transmission_monitor_0', 'design_efield_monitor'], 'grad_monitors': ['design_efield_monitor'], 'polarization': 'TE', 'pos_max_freqs': [], 'neg_min_freqs': [], 'weight': 1.0}, 'fom_1': {'type': 'BayerFilterFoM', 'fwd_srcs': ['forward_src_x'], 'adj_srcs': ['adj_src_1x'], 'fom_monitors': ['focal_monitor_1', 'transmission_monitor_1', 'design_efield_monitor'], 'grad_monitors': ['design_efield_monitor'], 'polarization': 'TE', 'pos_max_freqs': [], 'neg_min_freqs': [], 'weight': 1.0}}


#
# Derived Properties
#

#* Mesh Properties

min_feature_size_voxels: 1.0
blur_half_width_voxels: 0

#* Optical Properties
min_device_permittivity: 2.25
max_device_permittivity: 5.76
focal_length_um: 1.5299999999999998
focal_plane_center_vertical_um: -1.5299999999999998

#* Device Properties
vertical_layer_height_voxels: 2
device_size_vertical_um: 2.04
device_voxels_lateral: 36
device_voxels_vertical: 40
device_voxels_simulation_mesh_lateral: 61
                            
device_voxels_simulation_mesh_vertical: 42
device_vertical_maximum_um: 2.04
device_size_lateral_bordered_um: 3.06
device_voxels_simulation_mesh_lateral_bordered: 61
border_size_um: 0.255
border_size_voxels: 3
device_voxels_lateral_bordered: 36

#* FDTD Properties

vertical_gap_size_um: 2.125
lateral_gap_size_um: 0.51
fdtd_region_size_vertical_um: 8.84
fdtd_region_size_lateral_um: 4.08
fdtd_region_maximum_vertical_um: 4.165
fdtd_region_minimum_vertical_um: -3.655

#* Surrounding Properties
pec_aperture_thickness_um: 0.153
substrate_thickness_um: 0.4
sidewall_x_positions_um: [1.5725, 0, -1.5725, 0]
sidewall_y_positions_um: [0, 1.5725, 0, -1.5725]
sidewall_xspan_positions_um: [0.085, 3.23, 0.085, 3.23]
sidewall_yspan_positions_um: [3.23, 0.085, 3.23, 0.085]

#* Spectral Properties
bandwidth_um: 0.29999999999999993
num_design_frequency_points: 30
num_eval_frequency_points: 180
lambda_values_um: [0.4, 0.41034482758620694, 0.4206896551724138, 0.4310344827586207, 0.4413793103448276, 0.4517241379310345, 0.4620689655172414, 0.4724137931034483, 0.4827586206896552, 0.49310344827586206, 0.503448275862069, 0.5137931034482759, 0.5241379310344827, 0.5344827586206896, 0.5448275862068965, 0.5551724137931034, 0.5655172413793104, 0.5758620689655172, 0.5862068965517241, 0.596551724137931, 0.6068965517241379, 0.6172413793103448, 0.6275862068965516, 0.6379310344827586, 0.6482758620689655, 0.6586206896551724, 0.6689655172413793, 0.6793103448275861, 0.6896551724137931, 0.7]
max_intensity_by_wavelength: [234.09000000000003, 222.43591836734694, 211.6309486697125, 201.59456256000004, 192.25555664062503, 183.55078608472704, 175.4240944531076, 167.82540572220157, 160.7099510204082, 154.0376077069784, 147.77233252017265, 141.88167379847758, 136.33635041551253, 131.10988720083253, 126.17829834962349, 121.51981173565838, 117.11462819750153, 112.94471081788525, 108.99360000000006, 105.24625079354476, 101.68888946280994, 98.30888673886584, 95.09464557420606, 92.03550153396644, 89.12163422363064, 86.34398837751162, 83.69420342225531, 81.16455049086555, 78.74787600000002, 76.4375510204082]
dispersive_range_size_um: 0.29999999999999993
dispersive_ranges_um: [[0.4, 0.7]]

#* PDAF Functionality Properties
pdaf_focal_spot_x_um: 0.765
pdaf_focal_spot_y_um: 0.765
pdaf_lambda_min_um: 0.4
pdaf_lambda_max_um: 0.5
pdaf_lambda_values_um: [0.4, 0.403448275862069, 0.40689655172413797, 0.41034482758620694, 0.41379310344827586, 0.41724137931034483, 0.4206896551724138, 0.4241379310344828, 0.42758620689655175, 0.4310344827586207, 0.4344827586206897, 0.4379310344827586, 0.4413793103448276, 0.44482758620689655, 0.4482758620689655, 0.4517241379310345, 0.45517241379310347, 0.45862068965517244, 0.4620689655172414, 0.46551724137931033, 0.4689655172413793, 0.4724137931034483, 0.47586206896551725, 0.4793103448275862, 0.48275862068965514, 0.4862068965517241, 0.4896551724137931, 0.49310344827586206, 0.496551724137931, 0.5]
pdaf_max_intensity_by_wavelength: [234.09000000000003, 230.10556213017753, 226.22199367997706, 222.43591836734694, 218.74410000000006, 215.14343555768053, 211.6309486697125, 208.2037834622249, 204.8591987513008, 201.59456256000004, 198.4073469387755, 195.2951230702462, 192.25555664062503, 189.2864034613305, 186.38550532544383, 183.55078608472704, 180.78024793388434, 178.07196788964896, 175.4240944531076, 172.83484444444449, 170.30250000000004, 167.82540572220157, 165.401965973535, 163.0306423062989, 160.70995102040823, 158.43846084201002, 156.21479071612782, 154.0376077069784, 151.90562500000004, 149.81760000000003]

#* Forward (Input) Source Properties
lateral_aperture_um: 3.3660000000000005
src_maximum_vertical_um: 3.810833333333333
src_minimum_vertical_um: -2.5925
mid_lambda_um: 0.55
gaussian_waist_radius_um: 1
source_angle_theta_rad: 0.0
source_angle_theta_deg: 0.0

#* Adjoint Source Properties
adjoint_vertical_um: -1.5299999999999998
num_adjoint_sources: 2
adjoint_x_positions_um: [0.765, -0.765, -0.765, 0.765]
adjoint_y_positions_um: [0.765, 0.765, -0.765, -0.765]

#* Optimization Properties
total_iters: 80 
epoch_range_design_change_max: 0.09999999999999999
epoch_range_design_change_min: 0.05
spectral_focal_plane_map: [[0, 15], [15, 30], [30, 45], [15, 30]]
desired_peak_location_per_band: [7, 22]