#* Original Properties

start_from_step: 0
shelf_fn: save_state
restart_epoch: 0
restart_iter: 0
pull_sim_files_from_debug_folder: False
lumapi_filepath_local: C:\Program Files\Lumerical\v212\api\python\lumapi.py
lumapi_filepath_hpc: /central/home/ifoo/lumerical/2021a_r22/api/python/lumapi.py
simulator_name: LumericalFDTD
simulator_dimension: 3D
simulator_max_wait_time: 3600
use_autograd: False
convert_existing: False
mesh_spacing_um: 0.051
geometry_spacing_lateral_um: 0.085
device_scale_um: 0.051
use_smooth_blur: False
min_feature_size_um: 0.085
background_index: 1.5
min_device_index: 1.5
max_device_index: 2.4
init_permittivity_0_1_scale: 0.5
binarize_3_levels: False
focal_plane_center_lateral_um: 0
num_vertical_layers: 20
vertical_layer_height_um: 0.102
device_size_lateral_um: 2.04
device_vertical_minimum_um: 0
substrates_above_device: [{'name': 'glass_substrate', 'thickness_um': 0.4, 'material': 'SiO2 (Glass) - Palik'}]
substrate_thickness_um: 0.4
num_sidewalls: 0
sidewall_material: etch
sidewall_extend_pml: False
sidewall_extend_focalplane: True
sidewall_thickness_um: 0.085
sidewall_vertical_minimum_um: -0.765
add_infrared: False
lambda_min_um: 0.4
lambda_max_um: 0.7
lambda_min_eval_um: 0.4
lambda_max_eval_um: 0.7
num_bands: 3
num_points_per_band: 20
num_dispersive_ranges: 1
add_pdaf: False
pdaf_angle_phi_degrees: 45
pdaf_angle_theta_degrees: -8
pdaf_adj_src_idx: 0
fdtd_simulation_time_fs: 600
weight_by_individual_wavelength: True
use_gaussian_sources: True
use_airy_approximation: True
f_number: 2.2
airy_correction_factor: 0.84
beam_size_multiplier: 1
source_angle_theta_vacuum_deg: 0
source_angle_phi_deg: 0
xy_phi_rotations: [0, 90]
xy_adjtheta_rotations: [90, 0]
xy_pol_rotations: [0, 90]
xy_names: ['x', 'y']
num_focal_spots: 4
dispersive_range_to_adjoint_src_map: [[0, 1, 2, 3]]
adjoint_src_to_dispersive_range_map: [0, 0, 0, 0]
enforce_xy_gradient_symmetry: False
weight_by_quadrant_transmission: True
total_num_iterations: 80
epoch_list: [0, 16, 32, 48, 64, 80]
epoch_start_design_change_max: 0.15
epoch_end_design_change_max: 0.05
epoch_start_design_change_min: 0.05
epoch_end_design_change_min: 0
fom_types: ['transmission', 'overall_transmission', 'intensity']
optimization_fom: intensity
reinterpolate_permittivity: True
reinterpolate_permittivity_factor: 2
reinterpolate_type: nearest
border_optimization: False
layer_gradient: False
flip_gradient: False
polarizations_focal_plane_map: [['x', 'y'], ['x', 'y'], ['x', 'y'], ['x', 'y']]
weight_focal_plane_map_performance_weighting: [1.0, 1.0, 1.0, 1.0]
weight_focal_plane_map: [1.0, 1.0, 1.0, 1.0]
do_green_balance: False
polarization_name_to_idx: {'x': 0, 'y': 1, 'z': 2}
desired_peaks_per_band_um: [0.45, 0.55, 0.65]
explicit_band_centering: True
shuffle_green: False
infrared_center_um: 0.94
do_rejection: False
softplus_kappa: 2
boundary_conditions: pml
use_source_aperture: True
evaluate_bordered_extended: False
do_normalize: False
should_fix_layers: False
fixed_layers: [1, 2, 3, 5, 6, 7]
fixed_layers_density: 0
mpi_exe: C:\Program Files (x86)\IntelSWToolsMPI\compilers_and_libraries_2020.4.321\windows\mpi\intel64\bin\mpiexec.exe
solver_exe: C:\Program Files\Lumerical\v212\bin\fdtd-engine-impi.exe
nprocs: 8
optimizer: AdamOptimizer
optimizer_settings: {'step_size': 0.01, 'betas': [0.9, 0.999], 'eps': '1e-8', 'moments': [0.0, 0.0]}
fom_dict: [{'fwd': [0], 'adj': [0], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}, {'fwd': [0], 'adj': [2], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}]
figures_of_merit: {'fom_0': {'type': 'BayerFilterFoM', 'fwd_srcs': ['forward_src_x'], 'adj_srcs': ['adj_src_0x'], 'fom_monitors': ['focal_monitor_0', 'transmission_monitor_0', 'design_efield_monitor'], 'grad_monitors': ['design_efield_monitor'], 'polarization': 'TE', 'pos_max_freqs': [], 'neg_min_freqs': [], 'weight': 1.0}, 'fom_1': {'type': 'BayerFilterFoM', 'fwd_srcs': ['forward_src_x'], 'adj_srcs': ['adj_src_1x'], 'fom_monitors': ['focal_monitor_1', 'transmission_monitor_1', 'design_efield_monitor'], 'grad_monitors': ['design_efield_monitor'], 'polarization': 'TE', 'pos_max_freqs': [], 'neg_min_freqs': [], 'weight': 1.0}, 'fom_2': {'type': 'BayerFilterFoM', 'fwd_srcs': ['forward_src_x'], 'adj_srcs': ['adj_src_2x'], 'fom_monitors': ['focal_monitor_2', 'transmission_monitor_2', 'design_efield_monitor'], 'grad_monitors': ['design_efield_monitor'], 'polarization': 'TE', 'pos_max_freqs': [], 'neg_min_freqs': [], 'weight': 1.0}, 'fom_3': {'type': 'BayerFilterFoM', 'fwd_srcs': ['forward_src_x'], 'adj_srcs': ['adj_src_3x'], 'fom_monitors': ['focal_monitor_3', 'transmission_monitor_3', 'design_efield_monitor'], 'grad_monitors': ['design_efield_monitor'], 'polarization': 'TE', 'pos_max_freqs': [], 'neg_min_freqs': [], 'weight': 1.0}}


#
# Derived Properties
#

#* Mesh Properties

min_feature_size_voxels: 1.0
blur_half_width_voxels: 0

#* Optical Properties
min_device_permittivity: 2.25
max_device_permittivity: 5.76
focal_length_um: 1.5299999999999998
focal_plane_center_vertical_um: -1.5299999999999998

#* Device Properties
vertical_layer_height_voxels: 2
device_size_vertical_um: 2.04
device_voxels_lateral: 24
device_voxels_vertical: 40
device_voxels_simulation_mesh_lateral: 41
                            
device_voxels_simulation_mesh_vertical: 42
device_vertical_maximum_um: 2.04
device_size_lateral_bordered_um: 2.04
device_voxels_simulation_mesh_lateral_bordered: 41
border_size_um: 0.255
border_size_voxels: 3
device_voxels_lateral_bordered: 24

#* FDTD Properties

vertical_gap_size_um: 2.125
lateral_gap_size_um: 0.51
fdtd_region_size_vertical_um: 7.82
fdtd_region_size_lateral_um: 3.06
fdtd_region_maximum_vertical_um: 4.165
fdtd_region_minimum_vertical_um: -3.655

#* Surrounding Properties
pec_aperture_thickness_um: 0.153
substrate_thickness_um: 0.4
sidewall_x_positions_um: [1.0625, 0, -1.0625, 0]
sidewall_y_positions_um: [0, 1.0625, 0, -1.0625]
sidewall_xspan_positions_um: [0.085, 2.21, 0.085, 2.21]
sidewall_yspan_positions_um: [2.21, 0.085, 2.21, 0.085]

#* Spectral Properties
bandwidth_um: 0.29999999999999993
num_design_frequency_points: 60
num_eval_frequency_points: 360
lambda_values_um: [0.4, 0.40508474576271186, 0.41016949152542376, 0.4152542372881356, 0.4203389830508475, 0.42542372881355933, 0.43050847457627117, 0.43559322033898307, 0.4406779661016949, 0.4457627118644068, 0.45084745762711864, 0.45593220338983054, 0.4610169491525424, 0.4661016949152542, 0.4711864406779661, 0.47627118644067795, 0.48135593220338985, 0.4864406779661017, 0.4915254237288136, 0.4966101694915254, 0.5016949152542373, 0.5067796610169492, 0.511864406779661, 0.5169491525423728, 0.5220338983050847, 0.5271186440677966, 0.5322033898305085, 0.5372881355932203, 0.5423728813559322, 0.547457627118644, 0.5525423728813559, 0.5576271186440678, 0.5627118644067797, 0.5677966101694916, 0.5728813559322034, 0.5779661016949152, 0.583050847457627, 0.5881355932203389, 0.5932203389830508, 0.5983050847457627, 0.6033898305084746, 0.6084745762711864, 0.6135593220338983, 0.6186440677966101, 0.623728813559322, 0.6288135593220339, 0.6338983050847458, 0.6389830508474577, 0.6440677966101694, 0.6491525423728813, 0.6542372881355931, 0.659322033898305, 0.6644067796610169, 0.6694915254237288, 0.6745762711864407, 0.6796610169491525, 0.6847457627118644, 0.6898305084745762, 0.6949152542372881, 0.7]
max_intensity_by_wavelength: [46.24, 45.086448766653255, 43.975531725975, 42.90517351103708, 41.87342351716961, 40.87844700877765, 39.91851695703392, 38.99200654059865, 38.09738224852072, 37.233197530685715, 36.39808694669004, 35.590760768922486, 34.81, 34.05465176859505, 33.32362507116609, 32.61588683020732, 31.93045824241222, 31.266411392635586, 30.622866111771707, 29.998987058672792, 29.39398100803507, 28.80709432780394, 28.237610631112673, 27.68484858908896, 27.148159892056004, 26.62692734773214, 26.12056310600836, 25.628507000766263, 25.150225000000002, 24.685207756232696, 24.232969249877684, 23.793045518796024, 23.364993467847295, 22.948389752728897, 22.542829732852496, 22.147926488420296, 21.76330989724176, 21.38862576717688, 21.023535020408172, 20.66771292603263, 20.320848377730087, 19.98264321350704, 19.652811574738262, 19.33107930193283, 19.017183364839326, 18.71087132467797, 18.41190082644628, 18.120039119391542, 17.83506260387812, 17.556756403002275, 17.284913957421683, 17.019336641973034, 16.75983340274886, 16.50622041339529, 16.258320749476027, 16.01596407982538, 15.77898637388492, 15.547229624084668, 15.32054158239144, 15.098775510204087]
dispersive_range_size_um: 0.29999999999999993
dispersive_ranges_um: [[0.4, 0.7]]

#* PDAF Functionality Properties
pdaf_focal_spot_x_um: 0.51
pdaf_focal_spot_y_um: 0.51
pdaf_lambda_min_um: 0.4
pdaf_lambda_max_um: 0.5
pdaf_lambda_values_um: [0.4, 0.4016949152542373, 0.4033898305084746, 0.40508474576271186, 0.4067796610169492, 0.40847457627118644, 0.41016949152542376, 0.411864406779661, 0.41355932203389834, 0.4152542372881356, 0.4169491525423729, 0.4186440677966102, 0.4203389830508475, 0.42203389830508475, 0.42372881355932207, 0.42542372881355933, 0.42711864406779665, 0.4288135593220339, 0.43050847457627117, 0.4322033898305085, 0.4338983050847458, 0.43559322033898307, 0.43728813559322033, 0.43898305084745765, 0.4406779661016949, 0.4423728813559322, 0.4440677966101695, 0.4457627118644068, 0.44745762711864406, 0.4491525423728814, 0.45084745762711864, 0.45254237288135596, 0.4542372881355932, 0.45593220338983054, 0.4576271186440678, 0.45932203389830506, 0.4610169491525424, 0.4627118644067797, 0.46440677966101696, 0.4661016949152542, 0.46779661016949153, 0.46949152542372885, 0.4711864406779661, 0.4728813559322034, 0.4745762711864407, 0.47627118644067795, 0.47796610169491527, 0.47966101694915253, 0.48135593220338985, 0.4830508474576271, 0.4847457627118644, 0.4864406779661017, 0.48813559322033895, 0.48983050847457626, 0.4915254237288136, 0.49322033898305084, 0.4949152542372881, 0.4966101694915254, 0.49830508474576274, 0.5]
pdaf_max_intensity_by_wavelength: [46.24, 45.850612259431365, 45.46612244897959, 45.086448766653255, 44.71151111111111, 44.34123103941048, 43.975531725975, 43.61433792274214, 43.257575920451494, 42.90517351103708, 42.55705995108732, 42.213165926338746, 41.87342351716961, 41.53776616506186, 41.206128639999996, 40.87844700877765, 40.554658604182414, 40.234701995031955, 39.91851695703392, 39.60604444444445, 39.2972265625, 38.99200654059865, 38.69032870620757, 38.39213845947437, 38.09738224852072, 37.806007545397165, 37.51796282267934, 37.233197530685715, 36.951662075298444, 36.67330779636882, 36.39808694669004, 36.12595267152015, 35.8568589886389, 35.590760768922486, 35.32761371742113, 35.06737435492437, 34.81, 34.55544875149271, 34.30367947146892, 34.05465176859505, 33.80832598193658, 33.56466316516571, 33.32362507116609, 33.08517413702292, 32.84927346938776, 32.61588683020732, 32.3849786228057, 32.15651387831039, 31.93045824241222, 31.70677796244999, 31.48543987481051, 31.266411392635586, 31.04966049382717, 30.835155709342565, 30.622866111771707, 30.412761304188663, 30.20481140927004, 29.998987058672792, 29.795259382664632, 29.593600000000006]

#* Forward (Input) Source Properties
lateral_aperture_um: 2.244
src_maximum_vertical_um: 3.810833333333333
src_minimum_vertical_um: -2.5925
mid_lambda_um: 0.55
gaussian_waist_radius_um: 1
source_angle_theta_rad: 0.0
source_angle_theta_deg: 0.0

#* Adjoint Source Properties
adjoint_vertical_um: -1.5299999999999998
num_adjoint_sources: 4
adjoint_x_positions_um: [0.51, -0.51, -0.51, 0.51]
adjoint_y_positions_um: [0.51, 0.51, -0.51, -0.51]

#* Optimization Properties
total_iters: 80 
epoch_range_design_change_max: 0.09999999999999999
epoch_range_design_change_min: 0.05
spectral_focal_plane_map: [[0, 20], [20, 40], [40, 60], [20, 40]]
desired_peak_location_per_band: [10, 30, 49]