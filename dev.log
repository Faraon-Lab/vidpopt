2024-02-23 11:10:53,402 - template_logger - INFO - Rendered Output:
#* Original Properties

start_from_step: 0
shelf_fn: save_state
restart_epoch: 0
restart_iter: 0
lumapi_filepath_local: C:\Program Files\Lumerical\v212\api\python\lumapi.py
lumapi_filepath_hpc: /central/home/ifoo/lumerical/2021a_r22/api/python/lumapi.py
simulator_name: LumericalFDTD
simulator_dimension: 2D
simulator_max_wait_time: 3600
use_autograd: False
convert_existing: False
mesh_spacing_um: 0.051
geometry_spacing_lateral_um: 0.085
device_scale_um: 0.051
use_smooth_blur: False
min_feature_size_um: 0.085
background_index: 1.5
min_device_index: 1.5
max_device_index: 2.4
init_permittivity_0_1_scale: 0.5
binarize_3_levels: False
focal_plane_center_lateral_um: 0
num_vertical_layers: 5
vertical_layer_height_um: 0.408
device_size_lateral_um: 2.04
device_vertical_minimum_um: 0
objects_above_device: []
num_sidewalls: 0
sidewall_material: etch
sidewall_extend_pml: False
sidewall_extend_focalplane: True
sidewall_thickness_um: 0.085
sidewall_vertical_minimum_um: -0.765
add_infrared: False
lambda_min_um: 0.45
lambda_max_um: 0.75
lambda_min_eval_um: 0.45
lambda_max_eval_um: 0.75
num_bands: 2
num_points_per_band: 15
num_dispersive_ranges: 1
add_pdaf: False
pdaf_angle_phi_degrees: 45
pdaf_angle_theta_degrees: -8
pdaf_adj_src_idx: 0
fdtd_simulation_time_fs: 600
weight_by_individual_wavelength: True
use_gaussian_sources: True
use_airy_approximation: True
f_number: 2.2
airy_correction_factor: 0.84
beam_size_multiplier: 1
source_angle_theta_vacuum_deg: 0
source_angle_phi_deg: 0
xy_phi_rotations: [0, 90]
xy_adjtheta_rotations: [90, 0]
xy_pol_rotations: [0, 90]
xy_names: ['x', 'y']
use_source_aperture: True
num_focal_spots: 2
dispersive_range_to_adjoint_src_map: [[0, 1, 2, 3]]
adjoint_src_to_dispersive_range_map: [0, 0, 0, 0]
enforce_xy_gradient_symmetry: False
weight_by_quadrant_transmission: True
num_epochs: 10
num_iterations_per_epoch: 30
total_num_iterations: 80
epoch_list: [0, 16, 32, 48, 64, 80]
optimizer_algorithm: ADAM
adam_betas: (0.9, 0.999)
use_fixed_step_size: True
fixed_step_size: 0.01
epoch_start_design_change_max: 0.15
epoch_end_design_change_max: 0.05
epoch_start_design_change_min: 0.05
epoch_end_design_change_min: 0
fom_types: ['transmission', 'intensity']
optimization_fom: intensity
reinterpolate_permittivity: True
reinterpolate_permittivity_factor: 2
reinterpolate_type: nearest
border_optimization: False
layer_gradient: False
flip_gradient: False
polarizations_focal_plane_map: [['x', 'y'], ['x', 'y'], ['x', 'y'], ['x', 'y']]
weight_focal_plane_map_performance_weighting: [1.0, 1.0, 1.0, 1.0]
weight_focal_plane_map: [1.0, 1.0, 1.0, 1.0]
do_green_balance: False
polarization_name_to_idx: {'x': 0, 'y': 1, 'z': 2}
desired_peaks_per_band_um: [0.45, 0.54, 0.65]
explicit_band_centering: True
shuffle_green: False
infrared_center_um: 0.94
do_rejection: False
softplus_kappa: 2
evaluate_bordered_extended: False
do_normalize: False
should_fix_layers: True
fixed_layers: [1, 3]
fixed_layers_density: 0
mpi_exe: /central/software/mpich/4.0.0/bin/mpirun
solver_exe: /central/home/tmcnicho/lumerical/v232/bin/fdtd-engine-mpich2nem
nprocs: 8
optimizer: AdamOptimizer
optimizer_settings: {'step_size': 0.01, 'betas': [0.9, 0.99], 'eps': '1e-9', 'moments': [0.0, 0.0]}
figures_of_merit: {'fom_0': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_0']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_0x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2], 'weight': 1.0}}


#
# Derived Properties
#

#* Mesh Properties

min_feature_size_voxels: 1.0
blur_half_width_voxels: 0

#* Optical Properties
min_device_permittivity: 2.25
max_device_permittivity: 5.76
focal_length_um: 1.5299999999999998
focal_plane_center_vertical_um: -1.5299999999999998

#* Device Properties
vertical_layer_height_voxels: 8
device_size_vertical_um: 2.04
device_voxels_lateral: 24
device_voxels_vertical: 40
device_voxels_simulation_mesh_lateral: 41
device_voxels_simulation_mesh_vertical: 42
device_vertical_maximum_um: 2.04
device_size_lateral_bordered_um: 2.04
device_voxels_simulation_mesh_lateral_bordered: 41
border_size_um: 0.255
border_size_voxels: 3
device_voxels_lateral_bordered: 24

#* FDTD Properties

vertical_gap_size_um: 1.2750000000000001
lateral_gap_size_um: 0.51
fdtd_region_size_vertical_um: 6.119999999999999
fdtd_region_size_lateral_um: 3.06
fdtd_region_maximum_vertical_um: 3.3150000000000004
fdtd_region_minimum_vertical_um: -2.8049999999999997

#* Surrounding Properties
pec_aperture_thickness_um: 0.153
sidewall_x_positions_um: [1.0625, 0, -1.0625, 0]
sidewall_y_positions_um: [0, 1.0625, 0, -1.0625]
sidewall_xspan_positions_um: [0.085, 2.21, 0.085, 2.21]
sidewall_yspan_positions_um: [2.21, 0.085, 2.21, 0.085]

#* Spectral Properties
bandwidth_um: 0.3
num_design_frequency_points: 30
num_eval_frequency_points: 180
lambda_values_um: [0.45, 0.46034482758620693, 0.4706896551724138, 0.4810344827586207, 0.4913793103448276, 0.5017241379310345, 0.5120689655172413, 0.5224137931034483, 0.5327586206896552, 0.5431034482758621, 0.553448275862069, 0.5637931034482759, 0.5741379310344827, 0.5844827586206897, 0.5948275862068966, 0.6051724137931035, 0.6155172413793104, 0.6258620689655172, 0.6362068965517241, 0.646551724137931, 0.656896551724138, 0.6672413793103449, 0.6775862068965517, 0.6879310344827586, 0.6982758620689655, 0.7086206896551724, 0.7189655172413794, 0.7293103448275862, 0.7396551724137932, 0.75]
max_intensity_by_wavelength: [36.53530864197531, 34.91172214507147, 33.39400448147702, 31.973147313112626, 30.641080455524776, 29.39055703168361, 28.215054699633836, 27.108690433399783, 26.066146772656342, 25.082607810531623, 24.153703477256624, 23.275460913316312, 22.44426191957724, 21.65680563169482, 20.910075698382695, 20.201311352992263, 19.527981859410428, 18.887763889837522, 18.278521456217273, 17.698288071111115, 17.145250859390607, 16.617736380692932, 16.114197955312115, 15.633204314043255, 15.173429416247526, 14.733643300714537, 14.312703851307443, 13.90954937433284, 13.52319189745763, 13.152711111111115]
dispersive_range_size_um: 0.3
dispersive_ranges_um: [[0.45, 0.75]]

#* PDAF Functionality Properties
pdaf_focal_spot_x_um: 0.51
pdaf_focal_spot_y_um: 0.51
pdaf_lambda_min_um: 0.45
pdaf_lambda_max_um: 0.55
pdaf_lambda_values_um: [0.45, 0.453448275862069, 0.45689655172413796, 0.46034482758620693, 0.4637931034482759, 0.4672413793103448, 0.4706896551724138, 0.47413793103448276, 0.47758620689655173, 0.4810344827586207, 0.4844827586206897, 0.48793103448275865, 0.4913793103448276, 0.4948275862068966, 0.49827586206896557, 0.5017241379310345, 0.5051724137931035, 0.5086206896551725, 0.5120689655172415, 0.5155172413793103, 0.5189655172413794, 0.5224137931034483, 0.5258620689655172, 0.5293103448275862, 0.5327586206896552, 0.5362068965517242, 0.5396551724137931, 0.5431034482758621, 0.5465517241379311, 0.55]
pdaf_max_intensity_by_wavelength: [36.53530864197531, 35.98175136260464, 35.440680099679604, 34.91172214507147, 34.394518594270394, 33.88872373742188, 33.39400448147702, 32.9100398016529, 32.436520220516364, 31.973147313112626, 31.519633236661136, 31.075700283434678, 30.641080455524776, 30.21551506027753, 29.798754325259512, 29.39055703168361, 28.990690165290218, 28.598928583740303, 28.215054699633825, 27.838858178320162, 27.470135649716887, 27.108690433399783, 26.754332276269828, 26.40687710214432, 26.066146772656342, 25.73196885888277, 25.404176423154265, 25.082607810531623, 24.767106449462133, 24.457520661157027]

#* Forward (Input) Source Properties
lateral_aperture_um: 2.244
src_maximum_vertical_um: 2.89
src_minimum_vertical_um: -2.1675
mid_lambda_um: 0.6
gaussian_waist_radius_um: 1
source_angle_theta_rad: 0.0
source_angle_theta_deg: 0.0

#* Adjoint Source Properties
adjoint_vertical_um: -1.5299999999999998
num_adjoint_sources: 2
adjoint_x_positions_um: [0.51, -0.51, -0.51, 0.51]
adjoint_y_positions_um: [0.51, 0.51, -0.51, -0.51]

#* Optimzation Properties
epoch_range_design_change_max: 0.09999999999999999
epoch_range_design_change_min: 0.05
spectral_focal_plane_map: [[0, 15], [15, 30], [30, 45], [15, 30]]
desired_peak_location_per_band: [0, 9, 19]
2024-02-23 11:10:53,406 - template_logger - INFO - Successfully saved output to runs\test_run\processed_config.yml
2024-02-23 11:10:58,823 - template_logger - INFO - Rendered Output:
{: 
    "info": {
        "name": "optimization",
        "path": "",
        "simulator_name": "LumericalFDTD",
        "coordinates": None
    },
    "objects": {
        "FDTD": {
            "name": "FDTD",
            "obj_type": "fdtd",
            "properties": {
                "dimension": "2D",
                "x span": 3.06e-06,
                "y span": 3.06e-06,
                "z max": 3.3150000000000004e-06,
                "z min": -2.8049999999999994e-06,
                "simulation time": 6.000000000000001e-13,
                "index": 1.5
            }
        },
        "forward_src_x": {
            "name": "forward_src_x",
            "obj_type": "gaussian",
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 0,
                "direction": "Backward",
                "x span": 6.12e-06,
                "y span": 6.12e-06,
                "z": 2.89e-06,
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
        "forward_src_y": {
            "name": "forward_src_y",
            "obj_type": "gaussian",
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 90,
                "direction": "Backward",
                "x span": 6.12e-06,
                "y span": 6.12e-06,
                "z": 2.89e-06,
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
        "adj_src_0x": {
            "name": "adj_src_0x",
            "obj_type": "dipole",
            "properties": {
                "x": 5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "theta": 90,
                "phi": 0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07
            }
        },
        "adj_src_0y": {
            "name": "adj_src_0y",
            "obj_type": "dipole",
            "properties": {
                "x": 5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "theta": 90,
                "phi": 90,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07
            }
        },
        "adj_src_1x": {
            "name": "adj_src_1x",
            "obj_type": "dipole",
            "properties": {
                "x": -5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "theta": 90,
                "phi": 0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07
            }
        },
        "adj_src_1y": {
            "name": "adj_src_1y",
            "obj_type": "dipole",
            "properties": {
                "x": -5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "theta": 90,
                "phi": 90,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07
            }
        },
        "focal_monitor_0": {
            "name": "focal_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": 5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "focal_monitor_1": {
            "name": "focal_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": -5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_0": {
            "name": "transmission_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "x": 5.1e-07,
                "x span": 1.02e-06,
                "y": 5.1e-07,
                "y span": 1.02e-06,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_1": {
            "name": "transmission_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "x": -5.1e-07,
                "x span": 1.02e-06,
                "y": 5.1e-07,
                "y span": 1.02e-06,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_focal_monitor_": {
            "name": "transmission_focal_monitor_",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "x": 0,
                "x span": 2.04e-06,
                "y": 0,
                "y span": 2.04e-06,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "PEC_screen": {
            "name": "PEC_screen",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 3.5904e-06,
                "y": 0,
                "y span": 3.5904e-06,
                "z min": 2.193e-06,
                "z max": 2.346e-06,
                "material": "PEC (Perfect Electrical Conductor)"
            }
        },
        "source_aperture": {
            "name": "source_aperture",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 2.04e-06,
                "y": 0,
                "y span": 2.04e-06,
                "z min": 2.193e-06,
                "z max": 2.346e-06,
                "index": 1.5
            }
        },
        "design_import": {
            "name": "design_import",
            "obj_type": "import",
            "properties": {
                "x span": 2.04e-06,
                "y span": 2.04e-06,
                "z min": 0.0,
                "z max": 2.04e-06
            }
        },
        "design_mesh": {
            "name": "design_mesh",
            "obj_type": "mesh",
            "properties": {
                "x": 0,
                "x span": 3.06e-06,
                "y": 0,
                "y span": 3.06e-06,
                "z min": -5e-07,
                "z max": 2.54e-06,
                "dx": 5.0999999999999993e-08,
                "dy": 5.0999999999999993e-08,
                "dz": 5.0999999999999993e-08
            }
        },
        "design_index_monitor": {
            "name": "design_index_monitor",
            "obj_type": "index",
            "properties": {
                "monitor type": "3D",
                "x span": 2.04e-06,
                "y span": 2.04e-06,
                "z min": 0.0,
                "z max": 2.04e-06,
                "spatial interpolation": "nearest mesh cell"
            }
        },
        "design_efield_monitor": {
            "name": "design_efield_monitor",
            "obj_type": "profile",
            "properties": {
                "monitor type": "3D",
                "x span": 2.04e-06,
                "y span": 2.04e-06,
                "z min": 0.0,
                "z max": 2.04e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "frequency points": 30,
                "output Hx": 0,
                "output Hy": 0,
                "output Hz": 0
            }
        }
    }
}
2024-02-23 11:10:58,826 - template_logger - INFO - Successfully saved output to runs\test_run\sim.json
2024-02-23 11:13:32,843 - template_logger - INFO - Rendered Output:
#* Original Properties

start_from_step: 0
shelf_fn: save_state
restart_epoch: 0
restart_iter: 0
lumapi_filepath_local: C:\Program Files\Lumerical\v212\api\python\lumapi.py
lumapi_filepath_hpc: /central/home/ifoo/lumerical/2021a_r22/api/python/lumapi.py
simulator_name: LumericalFDTD
simulator_dimension: 2D
simulator_max_wait_time: 3600
use_autograd: False
convert_existing: False
mesh_spacing_um: 0.051
geometry_spacing_lateral_um: 0.085
device_scale_um: 0.051
use_smooth_blur: False
min_feature_size_um: 0.085
background_index: 1.5
min_device_index: 1.5
max_device_index: 2.4
init_permittivity_0_1_scale: 0.5
binarize_3_levels: False
focal_plane_center_lateral_um: 0
num_vertical_layers: 5
vertical_layer_height_um: 0.408
device_size_lateral_um: 2.04
device_vertical_minimum_um: 0
objects_above_device: []
num_sidewalls: 0
sidewall_material: etch
sidewall_extend_pml: False
sidewall_extend_focalplane: True
sidewall_thickness_um: 0.085
sidewall_vertical_minimum_um: -0.765
add_infrared: False
lambda_min_um: 0.45
lambda_max_um: 0.75
lambda_min_eval_um: 0.45
lambda_max_eval_um: 0.75
num_bands: 2
num_points_per_band: 15
num_dispersive_ranges: 1
add_pdaf: False
pdaf_angle_phi_degrees: 45
pdaf_angle_theta_degrees: -8
pdaf_adj_src_idx: 0
fdtd_simulation_time_fs: 600
weight_by_individual_wavelength: True
use_gaussian_sources: True
use_airy_approximation: True
f_number: 2.2
airy_correction_factor: 0.84
beam_size_multiplier: 1
source_angle_theta_vacuum_deg: 0
source_angle_phi_deg: 0
xy_phi_rotations: [0, 90]
xy_adjtheta_rotations: [90, 0]
xy_pol_rotations: [0, 90]
xy_names: ['x', 'y']
use_source_aperture: True
num_focal_spots: 2
dispersive_range_to_adjoint_src_map: [[0, 1, 2, 3]]
adjoint_src_to_dispersive_range_map: [0, 0, 0, 0]
enforce_xy_gradient_symmetry: False
weight_by_quadrant_transmission: True
num_epochs: 10
num_iterations_per_epoch: 30
total_num_iterations: 80
epoch_list: [0, 16, 32, 48, 64, 80]
optimizer_algorithm: ADAM
adam_betas: (0.9, 0.999)
use_fixed_step_size: True
fixed_step_size: 0.01
epoch_start_design_change_max: 0.15
epoch_end_design_change_max: 0.05
epoch_start_design_change_min: 0.05
epoch_end_design_change_min: 0
fom_types: ['transmission', 'intensity']
optimization_fom: intensity
reinterpolate_permittivity: True
reinterpolate_permittivity_factor: 2
reinterpolate_type: nearest
border_optimization: False
layer_gradient: False
flip_gradient: False
polarizations_focal_plane_map: [['x', 'y'], ['x', 'y'], ['x', 'y'], ['x', 'y']]
weight_focal_plane_map_performance_weighting: [1.0, 1.0, 1.0, 1.0]
weight_focal_plane_map: [1.0, 1.0, 1.0, 1.0]
do_green_balance: False
polarization_name_to_idx: {'x': 0, 'y': 1, 'z': 2}
desired_peaks_per_band_um: [0.45, 0.54, 0.65]
explicit_band_centering: True
shuffle_green: False
infrared_center_um: 0.94
do_rejection: False
softplus_kappa: 2
evaluate_bordered_extended: False
do_normalize: False
should_fix_layers: True
fixed_layers: [1, 3]
fixed_layers_density: 0
mpi_exe: /central/software/mpich/4.0.0/bin/mpirun
solver_exe: /central/home/tmcnicho/lumerical/v232/bin/fdtd-engine-mpich2nem
nprocs: 8
optimizer: AdamOptimizer
optimizer_settings: {'step_size': 0.01, 'betas': [0.9, 0.99], 'eps': '1e-9', 'moments': [0.0, 0.0]}
figures_of_merit: {'fom_0': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_0']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_0x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2], 'weight': 1.0}}


#
# Derived Properties
#

#* Mesh Properties

min_feature_size_voxels: 1.0
blur_half_width_voxels: 0

#* Optical Properties
min_device_permittivity: 2.25
max_device_permittivity: 5.76
focal_length_um: 1.5299999999999998
focal_plane_center_vertical_um: -1.5299999999999998

#* Device Properties
vertical_layer_height_voxels: 8
device_size_vertical_um: 2.04
device_voxels_lateral: 24
device_voxels_vertical: 40
device_voxels_simulation_mesh_lateral: 41
device_voxels_simulation_mesh_vertical: 42
device_vertical_maximum_um: 2.04
device_size_lateral_bordered_um: 2.04
device_voxels_simulation_mesh_lateral_bordered: 41
border_size_um: 0.255
border_size_voxels: 3
device_voxels_lateral_bordered: 24

#* FDTD Properties

vertical_gap_size_um: 1.2750000000000001
lateral_gap_size_um: 0.51
fdtd_region_size_vertical_um: 6.119999999999999
fdtd_region_size_lateral_um: 3.06
fdtd_region_maximum_vertical_um: 3.3150000000000004
fdtd_region_minimum_vertical_um: -2.8049999999999997

#* Surrounding Properties
pec_aperture_thickness_um: 0.153
sidewall_x_positions_um: [1.0625, 0, -1.0625, 0]
sidewall_y_positions_um: [0, 1.0625, 0, -1.0625]
sidewall_xspan_positions_um: [0.085, 2.21, 0.085, 2.21]
sidewall_yspan_positions_um: [2.21, 0.085, 2.21, 0.085]

#* Spectral Properties
bandwidth_um: 0.3
num_design_frequency_points: 30
num_eval_frequency_points: 180
lambda_values_um: [0.45, 0.46034482758620693, 0.4706896551724138, 0.4810344827586207, 0.4913793103448276, 0.5017241379310345, 0.5120689655172413, 0.5224137931034483, 0.5327586206896552, 0.5431034482758621, 0.553448275862069, 0.5637931034482759, 0.5741379310344827, 0.5844827586206897, 0.5948275862068966, 0.6051724137931035, 0.6155172413793104, 0.6258620689655172, 0.6362068965517241, 0.646551724137931, 0.656896551724138, 0.6672413793103449, 0.6775862068965517, 0.6879310344827586, 0.6982758620689655, 0.7086206896551724, 0.7189655172413794, 0.7293103448275862, 0.7396551724137932, 0.75]
max_intensity_by_wavelength: [36.53530864197531, 34.91172214507147, 33.39400448147702, 31.973147313112626, 30.641080455524776, 29.39055703168361, 28.215054699633836, 27.108690433399783, 26.066146772656342, 25.082607810531623, 24.153703477256624, 23.275460913316312, 22.44426191957724, 21.65680563169482, 20.910075698382695, 20.201311352992263, 19.527981859410428, 18.887763889837522, 18.278521456217273, 17.698288071111115, 17.145250859390607, 16.617736380692932, 16.114197955312115, 15.633204314043255, 15.173429416247526, 14.733643300714537, 14.312703851307443, 13.90954937433284, 13.52319189745763, 13.152711111111115]
dispersive_range_size_um: 0.3
dispersive_ranges_um: [[0.45, 0.75]]

#* PDAF Functionality Properties
pdaf_focal_spot_x_um: 0.51
pdaf_focal_spot_y_um: 0.51
pdaf_lambda_min_um: 0.45
pdaf_lambda_max_um: 0.55
pdaf_lambda_values_um: [0.45, 0.453448275862069, 0.45689655172413796, 0.46034482758620693, 0.4637931034482759, 0.4672413793103448, 0.4706896551724138, 0.47413793103448276, 0.47758620689655173, 0.4810344827586207, 0.4844827586206897, 0.48793103448275865, 0.4913793103448276, 0.4948275862068966, 0.49827586206896557, 0.5017241379310345, 0.5051724137931035, 0.5086206896551725, 0.5120689655172415, 0.5155172413793103, 0.5189655172413794, 0.5224137931034483, 0.5258620689655172, 0.5293103448275862, 0.5327586206896552, 0.5362068965517242, 0.5396551724137931, 0.5431034482758621, 0.5465517241379311, 0.55]
pdaf_max_intensity_by_wavelength: [36.53530864197531, 35.98175136260464, 35.440680099679604, 34.91172214507147, 34.394518594270394, 33.88872373742188, 33.39400448147702, 32.9100398016529, 32.436520220516364, 31.973147313112626, 31.519633236661136, 31.075700283434678, 30.641080455524776, 30.21551506027753, 29.798754325259512, 29.39055703168361, 28.990690165290218, 28.598928583740303, 28.215054699633825, 27.838858178320162, 27.470135649716887, 27.108690433399783, 26.754332276269828, 26.40687710214432, 26.066146772656342, 25.73196885888277, 25.404176423154265, 25.082607810531623, 24.767106449462133, 24.457520661157027]

#* Forward (Input) Source Properties
lateral_aperture_um: 2.244
src_maximum_vertical_um: 2.89
src_minimum_vertical_um: -2.1675
mid_lambda_um: 0.6
gaussian_waist_radius_um: 1
source_angle_theta_rad: 0.0
source_angle_theta_deg: 0.0

#* Adjoint Source Properties
adjoint_vertical_um: -1.5299999999999998
num_adjoint_sources: 2
adjoint_x_positions_um: [0.51, -0.51, -0.51, 0.51]
adjoint_y_positions_um: [0.51, 0.51, -0.51, -0.51]

#* Optimzation Properties
epoch_range_design_change_max: 0.09999999999999999
epoch_range_design_change_min: 0.05
spectral_focal_plane_map: [[0, 15], [15, 30], [30, 45], [15, 30]]
desired_peak_location_per_band: [0, 9, 19]
2024-02-23 11:13:32,846 - template_logger - INFO - Successfully saved output to runs\test_run\processed_config.yml
2024-02-23 11:13:38,729 - template_logger - INFO - Rendered Output:
{ 
    "info": {
        "name": "optimization",
        "path": "",
        "simulator_name": "LumericalFDTD",
        "coordinates": {}
    },
    "objects": {
        "FDTD": {
            "name": "FDTD",
            "obj_type": "fdtd",
            "properties": {
                "dimension": "2D",
                "x span": 3.06e-06,
                "y span": 3.06e-06,
                "z max": 3.3150000000000004e-06,
                "z min": -2.8049999999999994e-06,
                "simulation time": 6.000000000000001e-13,
                "index": 1.5
            }
        },
        "forward_src_x": {
            "name": "forward_src_x",
            "obj_type": "gaussian",
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 0,
                "direction": "Backward",
                "x span": 6.12e-06,
                "y span": 6.12e-06,
                "z": 2.89e-06,
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
        "forward_src_y": {
            "name": "forward_src_y",
            "obj_type": "gaussian",
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 90,
                "direction": "Backward",
                "x span": 6.12e-06,
                "y span": 6.12e-06,
                "z": 2.89e-06,
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
        "adj_src_0x": {
            "name": "adj_src_0x",
            "obj_type": "dipole",
            "properties": {
                "x": 5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "theta": 90,
                "phi": 0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07
            }
        },
        "adj_src_0y": {
            "name": "adj_src_0y",
            "obj_type": "dipole",
            "properties": {
                "x": 5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "theta": 90,
                "phi": 90,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07
            }
        },
        "adj_src_1x": {
            "name": "adj_src_1x",
            "obj_type": "dipole",
            "properties": {
                "x": -5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "theta": 90,
                "phi": 0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07
            }
        },
        "adj_src_1y": {
            "name": "adj_src_1y",
            "obj_type": "dipole",
            "properties": {
                "x": -5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "theta": 90,
                "phi": 90,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07
            }
        },
        "focal_monitor_0": {
            "name": "focal_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": 5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "focal_monitor_1": {
            "name": "focal_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": -5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_0": {
            "name": "transmission_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "x": 5.1e-07,
                "x span": 1.02e-06,
                "y": 5.1e-07,
                "y span": 1.02e-06,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_1": {
            "name": "transmission_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "x": -5.1e-07,
                "x span": 1.02e-06,
                "y": 5.1e-07,
                "y span": 1.02e-06,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_focal_monitor_": {
            "name": "transmission_focal_monitor_",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "x": 0,
                "x span": 2.04e-06,
                "y": 0,
                "y span": 2.04e-06,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "PEC_screen": {
            "name": "PEC_screen",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 3.5904e-06,
                "y": 0,
                "y span": 3.5904e-06,
                "z min": 2.193e-06,
                "z max": 2.346e-06,
                "material": "PEC (Perfect Electrical Conductor)"
            }
        },
        "source_aperture": {
            "name": "source_aperture",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 2.04e-06,
                "y": 0,
                "y span": 2.04e-06,
                "z min": 2.193e-06,
                "z max": 2.346e-06,
                "index": 1.5
            }
        },
        "design_import": {
            "name": "design_import",
            "obj_type": "import",
            "properties": {
                "x span": 2.04e-06,
                "y span": 2.04e-06,
                "z min": 0.0,
                "z max": 2.04e-06
            }
        },
        "design_mesh": {
            "name": "design_mesh",
            "obj_type": "mesh",
            "properties": {
                "x": 0,
                "x span": 3.06e-06,
                "y": 0,
                "y span": 3.06e-06,
                "z min": -5e-07,
                "z max": 2.54e-06,
                "dx": 5.0999999999999993e-08,
                "dy": 5.0999999999999993e-08,
                "dz": 5.0999999999999993e-08
            }
        },
        "design_index_monitor": {
            "name": "design_index_monitor",
            "obj_type": "index",
            "properties": {
                "monitor type": "3D",
                "x span": 2.04e-06,
                "y span": 2.04e-06,
                "z min": 0.0,
                "z max": 2.04e-06,
                "spatial interpolation": "nearest mesh cell"
            }
        },
        "design_efield_monitor": {
            "name": "design_efield_monitor",
            "obj_type": "profile",
            "properties": {
                "monitor type": "3D",
                "x span": 2.04e-06,
                "y span": 2.04e-06,
                "z min": 0.0,
                "z max": 2.04e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "frequency points": 30,
                "output Hx": 0,
                "output Hy": 0,
                "output Hz": 0
            }
        }
    }
}
2024-02-23 11:13:38,733 - template_logger - INFO - Successfully saved output to runs\test_run\sim.json
2024-02-23 11:35:07,623 - template_logger - INFO - Rendered Output:
{ 
    "info": {
        "name": "optimization",
        "path": "",
        "simulator_name": "LumericalFDTD",
        "coordinates": {}
    },
    "objects": {
        "FDTD": {
            "name": "FDTD",
            "obj_type": "fdtd",
            "properties": {
                "dimension": "2D",
                "x span": 3.06e-06,
                "y span": 3.06e-06,
                "z max": 3.3150000000000004e-06,
                "z min": -2.8049999999999994e-06,
                "simulation time": 6.000000000000001e-13,
                "index": 1.5
            }
        },
        "forward_src_x": {
            "name": "forward_src_x",
            "obj_type": "gaussian",
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 0,
                "direction": "Backward",
                "x span": 6.12e-06,
                "y span": 6.12e-06,
                "z": 2.89e-06,
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
        "forward_src_y": {
            "name": "forward_src_y",
            "obj_type": "gaussian",
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 90,
                "direction": "Backward",
                "x span": 6.12e-06,
                "y span": 6.12e-06,
                "z": 2.89e-06,
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
        "adj_src_0x": {
            "name": "adj_src_0x",
            "obj_type": "dipole",
            "properties": {
                "x": 5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "theta": 90,
                "phi": 0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07
            }
        },
        "adj_src_0y": {
            "name": "adj_src_0y",
            "obj_type": "dipole",
            "properties": {
                "x": 5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "theta": 90,
                "phi": 90,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07
            }
        },
        "adj_src_1x": {
            "name": "adj_src_1x",
            "obj_type": "dipole",
            "properties": {
                "x": -5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "theta": 90,
                "phi": 0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07
            }
        },
        "adj_src_1y": {
            "name": "adj_src_1y",
            "obj_type": "dipole",
            "properties": {
                "x": -5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "theta": 90,
                "phi": 90,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07
            }
        },
        "focal_monitor_0": {
            "name": "focal_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": 5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "focal_monitor_1": {
            "name": "focal_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": -5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_0": {
            "name": "transmission_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "x": 5.1e-07,
                "x span": 1.02e-06,
                "y": 5.1e-07,
                "y span": 1.02e-06,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_1": {
            "name": "transmission_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "x": -5.1e-07,
                "x span": 1.02e-06,
                "y": 5.1e-07,
                "y span": 1.02e-06,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_focal_monitor_": {
            "name": "transmission_focal_monitor_",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "x": 0,
                "x span": 2.04e-06,
                "y": 0,
                "y span": 2.04e-06,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "PEC_screen": {
            "name": "PEC_screen",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 3.5904e-06,
                "y": 0,
                "y span": 3.5904e-06,
                "z min": 2.193e-06,
                "z max": 2.346e-06,
                "material": "PEC (Perfect Electrical Conductor)"
            }
        },
        "source_aperture": {
            "name": "source_aperture",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 2.04e-06,
                "y": 0,
                "y span": 2.04e-06,
                "z min": 2.193e-06,
                "z max": 2.346e-06,
                "index": 1.5
            }
        },
        "design_import": {
            "name": "design_import",
            "obj_type": "import",
            "properties": {
                "x span": 2.04e-06,
                "y span": 2.04e-06,
                "z min": 0.0,
                "z max": 2.04e-06
            }
        },
        "design_mesh": {
            "name": "design_mesh",
            "obj_type": "mesh",
            "properties": {
                "x": 0,
                "x span": 3.06e-06,
                "y": 0,
                "y span": 3.06e-06,
                "z min": -5e-07,
                "z max": 2.54e-06,
                "dx": 5.0999999999999993e-08,
                "dy": 5.0999999999999993e-08,
                "dz": 5.0999999999999993e-08
            }
        },
        "design_index_monitor": {
            "name": "design_index_monitor",
            "obj_type": "index",
            "properties": {
                "monitor type": "3D",
                "x span": 2.04e-06,
                "y span": 2.04e-06,
                "z min": 0.0,
                "z max": 2.04e-06,
                "spatial interpolation": "nearest mesh cell"
            }
        },
        "design_efield_monitor": {
            "name": "design_efield_monitor",
            "obj_type": "profile",
            "properties": {
                "monitor type": "3D",
                "x span": 2.04e-06,
                "y span": 2.04e-06,
                "z min": 0.0,
                "z max": 2.04e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "frequency points": 30,
                "output Hx": 0,
                "output Hy": 0,
                "output Hz": 0
            }
        }
    }
}
2024-02-23 11:35:07,628 - template_logger - INFO - Successfully saved output to runs\test_run\sim.json
2024-02-23 11:35:56,878 - template_logger - INFO - Rendered Output:
{ 
    "info": {
        "name": "optimization",
        "path": "",
        "simulator_name": "LumericalFDTD",
        "coordinates": {}
    },
    "objects": {
        "FDTD": {
            "name": "FDTD",
            "obj_type": "fdtd",
            "properties": {
                "dimension": "2D",
                "x span": 3.06e-06,
                "y max": 3.3150000000000004e-06,
                "y min": -2.8049999999999994e-06,
                
                "simulation time": 6.000000000000001e-13,
                "index": 1.5
            }
        },
        "forward_src_x": {
            "name": "forward_src_x",
            "obj_type": "gaussian",
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 0,
                "direction": "Backward",
                "x span": 6.12e-06,
                "y span": 6.12e-06,
                "z": 2.89e-06,
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
        "forward_src_y": {
            "name": "forward_src_y",
            "obj_type": "gaussian",
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 90,
                "direction": "Backward",
                "x span": 6.12e-06,
                "y span": 6.12e-06,
                "z": 2.89e-06,
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
        "adj_src_0x": {
            "name": "adj_src_0x",
            "obj_type": "dipole",
            "properties": {
                "x": 5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "theta": 90,
                "phi": 0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07
            }
        },
        "adj_src_0y": {
            "name": "adj_src_0y",
            "obj_type": "dipole",
            "properties": {
                "x": 5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "theta": 90,
                "phi": 90,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07
            }
        },
        "adj_src_1x": {
            "name": "adj_src_1x",
            "obj_type": "dipole",
            "properties": {
                "x": -5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "theta": 90,
                "phi": 0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07
            }
        },
        "adj_src_1y": {
            "name": "adj_src_1y",
            "obj_type": "dipole",
            "properties": {
                "x": -5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "theta": 90,
                "phi": 90,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07
            }
        },
        "focal_monitor_0": {
            "name": "focal_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": 5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "focal_monitor_1": {
            "name": "focal_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": -5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_0": {
            "name": "transmission_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "x": 5.1e-07,
                "x span": 1.02e-06,
                "y": 5.1e-07,
                "y span": 1.02e-06,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_1": {
            "name": "transmission_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "x": -5.1e-07,
                "x span": 1.02e-06,
                "y": 5.1e-07,
                "y span": 1.02e-06,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_focal_monitor_": {
            "name": "transmission_focal_monitor_",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "x": 0,
                "x span": 2.04e-06,
                "y": 0,
                "y span": 2.04e-06,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "PEC_screen": {
            "name": "PEC_screen",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 3.5904e-06,
                "y": 0,
                "y span": 3.5904e-06,
                "z min": 2.193e-06,
                "z max": 2.346e-06,
                "material": "PEC (Perfect Electrical Conductor)"
            }
        },
        "source_aperture": {
            "name": "source_aperture",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 2.04e-06,
                "y": 0,
                "y span": 2.04e-06,
                "z min": 2.193e-06,
                "z max": 2.346e-06,
                "index": 1.5
            }
        },
        "design_import": {
            "name": "design_import",
            "obj_type": "import",
            "properties": {
                "x span": 2.04e-06,
                "y span": 2.04e-06,
                "z min": 0.0,
                "z max": 2.04e-06
            }
        },
        "design_mesh": {
            "name": "design_mesh",
            "obj_type": "mesh",
            "properties": {
                "x": 0,
                "x span": 3.06e-06,
                "y": 0,
                "y span": 3.06e-06,
                "z min": -5e-07,
                "z max": 2.54e-06,
                "dx": 5.0999999999999993e-08,
                "dy": 5.0999999999999993e-08,
                "dz": 5.0999999999999993e-08
            }
        },
        "design_index_monitor": {
            "name": "design_index_monitor",
            "obj_type": "index",
            "properties": {
                "monitor type": "3D",
                "x span": 2.04e-06,
                "y span": 2.04e-06,
                "z min": 0.0,
                "z max": 2.04e-06,
                "spatial interpolation": "nearest mesh cell"
            }
        },
        "design_efield_monitor": {
            "name": "design_efield_monitor",
            "obj_type": "profile",
            "properties": {
                "monitor type": "3D",
                "x span": 2.04e-06,
                "y span": 2.04e-06,
                "z min": 0.0,
                "z max": 2.04e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "frequency points": 30,
                "output Hx": 0,
                "output Hy": 0,
                "output Hz": 0
            }
        }
    }
}
2024-02-23 11:35:56,882 - template_logger - INFO - Successfully saved output to runs\test_run\sim.json
2024-02-23 11:41:06,557 - template_logger - INFO - Rendered Output:
{ 
    "info": {
        "name": "optimization",
        "path": "",
        "simulator_name": "LumericalFDTD",
        "coordinates": {}
    },
    "objects": {
        "FDTD": {
            "name": "FDTD",
            "obj_type": "fdtd",
            "properties": {
                "dimension": "2D",
                "x span": 3.06e-06,
                "y max": 3.3150000000000004e-06,
                "y min": -2.8049999999999994e-06,
                
                "simulation time": 6.000000000000001e-13,
                "index": 1.5
            }
        },
        "forward_src_x": {
            "name": "forward_src_x",
            "obj_type": "gaussian",
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 0,
                "direction": "Backward",
                "attached monitor": 0
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
        "forward_src_y": {
            "name": "forward_src_y",
            "obj_type": "gaussian",
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 90,
                "direction": "Backward",
                "attached monitor": 1
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
        "adj_src_0x": {
            "name": "adj_src_0x",
            "obj_type": "dipole",
            "properties": {
                "x": 5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "theta": 90,
                "phi": 0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07
            }
        },
        "adj_src_0y": {
            "name": "adj_src_0y",
            "obj_type": "dipole",
            "properties": {
                "x": 5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "theta": 90,
                "phi": 90,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07
            }
        },
        "adj_src_1x": {
            "name": "adj_src_1x",
            "obj_type": "dipole",
            "properties": {
                "x": -5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "theta": 90,
                "phi": 0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07
            }
        },
        "adj_src_1y": {
            "name": "adj_src_1y",
            "obj_type": "dipole",
            "properties": {
                "x": -5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "theta": 90,
                "phi": 90,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07
            }
        },
        "focal_monitor_0": {
            "name": "focal_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": 5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "focal_monitor_1": {
            "name": "focal_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": -5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_0": {
            "name": "transmission_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "x": 5.1e-07,
                "x span": 1.02e-06,
                "y": 5.1e-07,
                "y span": 1.02e-06,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_1": {
            "name": "transmission_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "x": -5.1e-07,
                "x span": 1.02e-06,
                "y": 5.1e-07,
                "y span": 1.02e-06,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_focal_monitor_": {
            "name": "transmission_focal_monitor_",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "x": 0,
                "x span": 2.04e-06,
                "y": 0,
                "y span": 2.04e-06,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "PEC_screen": {
            "name": "PEC_screen",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 3.5904e-06,
                "y": 0,
                "y span": 3.5904e-06,
                "z min": 2.193e-06,
                "z max": 2.346e-06,
                "material": "PEC (Perfect Electrical Conductor)"
            }
        },
        "source_aperture": {
            "name": "source_aperture",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 2.04e-06,
                "y": 0,
                "y span": 2.04e-06,
                "z min": 2.193e-06,
                "z max": 2.346e-06,
                "index": 1.5
            }
        },
        "design_import": {
            "name": "design_import",
            "obj_type": "import",
            "properties": {
                "x span": 2.04e-06,
                "y span": 2.04e-06,
                "z min": 0.0,
                "z max": 2.04e-06
            }
        },
        "design_mesh": {
            "name": "design_mesh",
            "obj_type": "mesh",
            "properties": {
                "x": 0,
                "x span": 3.06e-06,
                "y": 0,
                "y span": 3.06e-06,
                "z min": -5e-07,
                "z max": 2.54e-06,
                "dx": 5.0999999999999993e-08,
                "dy": 5.0999999999999993e-08,
                "dz": 5.0999999999999993e-08
            }
        },
        "design_index_monitor": {
            "name": "design_index_monitor",
            "obj_type": "index",
            "properties": {
                "monitor type": "3D",
                "x span": 2.04e-06,
                "y span": 2.04e-06,
                "z min": 0.0,
                "z max": 2.04e-06,
                "spatial interpolation": "nearest mesh cell"
            }
        },
        "design_efield_monitor": {
            "name": "design_efield_monitor",
            "obj_type": "profile",
            "properties": {
                "monitor type": "3D",
                "x span": 2.04e-06,
                "y span": 2.04e-06,
                "z min": 0.0,
                "z max": 2.04e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "frequency points": 30,
                "output Hx": 0,
                "output Hy": 0,
                "output Hz": 0
            }
        }
    }
}
2024-02-23 11:41:06,561 - template_logger - INFO - Successfully saved output to runs\test_run\sim.json
2024-02-23 11:42:10,201 - template_logger - INFO - Rendered Output:
{ 
    "info": {
        "name": "optimization",
        "path": "",
        "simulator_name": "LumericalFDTD",
        "coordinates": {}
    },
    "objects": {
        "FDTD": {
            "name": "FDTD",
            "obj_type": "fdtd",
            "properties": {
                "dimension": "2D",
                "x span": 3.06e-06,
                "y max": 3.3150000000000004e-06,
                "y min": -2.8049999999999994e-06,
                
                "simulation time": 6.000000000000001e-13,
                "index": 1.5
            }
        },
        "forward_src_x": {
            "name": "forward_src_x",
            "obj_type": "gaussian",
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 0,
                "direction": "Backward",
                "attached monitor": 0,
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
        "forward_src_y": {
            "name": "forward_src_y",
            "obj_type": "gaussian",
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 90,
                "direction": "Backward",
                "attached monitor": 1,
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
        "adj_src_0x": {
            "name": "adj_src_0x",
            "obj_type": "dipole",
            "properties": {
                "x": 5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "theta": 90,
                "phi": 0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07
            }
        },
        "adj_src_0y": {
            "name": "adj_src_0y",
            "obj_type": "dipole",
            "properties": {
                "x": 5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "theta": 90,
                "phi": 90,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07
            }
        },
        "adj_src_1x": {
            "name": "adj_src_1x",
            "obj_type": "dipole",
            "properties": {
                "x": -5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "theta": 90,
                "phi": 0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07
            }
        },
        "adj_src_1y": {
            "name": "adj_src_1y",
            "obj_type": "dipole",
            "properties": {
                "x": -5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "theta": 90,
                "phi": 90,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07
            }
        },
        "focal_monitor_0": {
            "name": "focal_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": 5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "focal_monitor_1": {
            "name": "focal_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": -5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_0": {
            "name": "transmission_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "x": 5.1e-07,
                "x span": 1.02e-06,
                "y": 5.1e-07,
                "y span": 1.02e-06,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_1": {
            "name": "transmission_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "x": -5.1e-07,
                "x span": 1.02e-06,
                "y": 5.1e-07,
                "y span": 1.02e-06,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_focal_monitor_": {
            "name": "transmission_focal_monitor_",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "x": 0,
                "x span": 2.04e-06,
                "y": 0,
                "y span": 2.04e-06,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "PEC_screen": {
            "name": "PEC_screen",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 3.5904e-06,
                "y": 0,
                "y span": 3.5904e-06,
                "z min": 2.193e-06,
                "z max": 2.346e-06,
                "material": "PEC (Perfect Electrical Conductor)"
            }
        },
        "source_aperture": {
            "name": "source_aperture",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 2.04e-06,
                "y": 0,
                "y span": 2.04e-06,
                "z min": 2.193e-06,
                "z max": 2.346e-06,
                "index": 1.5
            }
        },
        "design_import": {
            "name": "design_import",
            "obj_type": "import",
            "properties": {
                "x span": 2.04e-06,
                "y span": 2.04e-06,
                "z min": 0.0,
                "z max": 2.04e-06
            }
        },
        "design_mesh": {
            "name": "design_mesh",
            "obj_type": "mesh",
            "properties": {
                "x": 0,
                "x span": 3.06e-06,
                "y": 0,
                "y span": 3.06e-06,
                "z min": -5e-07,
                "z max": 2.54e-06,
                "dx": 5.0999999999999993e-08,
                "dy": 5.0999999999999993e-08,
                "dz": 5.0999999999999993e-08
            }
        },
        "design_index_monitor": {
            "name": "design_index_monitor",
            "obj_type": "index",
            "properties": {
                "monitor type": "3D",
                "x span": 2.04e-06,
                "y span": 2.04e-06,
                "z min": 0.0,
                "z max": 2.04e-06,
                "spatial interpolation": "nearest mesh cell"
            }
        },
        "design_efield_monitor": {
            "name": "design_efield_monitor",
            "obj_type": "profile",
            "properties": {
                "monitor type": "3D",
                "x span": 2.04e-06,
                "y span": 2.04e-06,
                "z min": 0.0,
                "z max": 2.04e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "frequency points": 30,
                "output Hx": 0,
                "output Hy": 0,
                "output Hz": 0
            }
        }
    }
}
2024-02-23 11:42:10,205 - template_logger - INFO - Successfully saved output to runs\test_run\sim.json
2024-02-23 11:53:03,895 - template_logger - INFO - Rendered Output:
#* Original Properties

start_from_step: 0
shelf_fn: save_state
restart_epoch: 0
restart_iter: 0
lumapi_filepath_local: C:\Program Files\Lumerical\v212\api\python\lumapi.py
lumapi_filepath_hpc: /central/home/ifoo/lumerical/2021a_r22/api/python/lumapi.py
simulator_name: LumericalFDTD
simulator_dimension: 2D
simulator_max_wait_time: 3600
use_autograd: False
convert_existing: False
mesh_spacing_um: 0.051
geometry_spacing_lateral_um: 0.085
device_scale_um: 0.051
use_smooth_blur: False
min_feature_size_um: 0.085
background_index: 1.5
min_device_index: 1.5
max_device_index: 2.4
init_permittivity_0_1_scale: 0.5
binarize_3_levels: False
focal_plane_center_lateral_um: 0
num_vertical_layers: 5
vertical_layer_height_um: 0.408
device_size_lateral_um: 2.04
device_vertical_minimum_um: 0
objects_above_device: []
num_sidewalls: 0
sidewall_material: etch
sidewall_extend_pml: False
sidewall_extend_focalplane: True
sidewall_thickness_um: 0.085
sidewall_vertical_minimum_um: -0.765
add_infrared: False
lambda_min_um: 0.45
lambda_max_um: 0.75
lambda_min_eval_um: 0.45
lambda_max_eval_um: 0.75
num_bands: 2
num_points_per_band: 15
num_dispersive_ranges: 1
add_pdaf: False
pdaf_angle_phi_degrees: 45
pdaf_angle_theta_degrees: -8
pdaf_adj_src_idx: 0
fdtd_simulation_time_fs: 600
weight_by_individual_wavelength: True
use_gaussian_sources: True
use_airy_approximation: True
f_number: 2.2
airy_correction_factor: 0.84
beam_size_multiplier: 1
source_angle_theta_vacuum_deg: 0
source_angle_phi_deg: 0
xy_phi_rotations: [0, 90]
xy_adjtheta_rotations: [90, 0]
xy_pol_rotations: [0, 90]
xy_names: ['x', 'y']
use_source_aperture: True
num_focal_spots: 2
dispersive_range_to_adjoint_src_map: [[0, 1, 2, 3]]
adjoint_src_to_dispersive_range_map: [0, 0, 0, 0]
enforce_xy_gradient_symmetry: False
weight_by_quadrant_transmission: True
num_epochs: 10
num_iterations_per_epoch: 30
total_num_iterations: 80
epoch_list: [0, 16, 32, 48, 64, 80]
optimizer_algorithm: ADAM
adam_betas: (0.9, 0.999)
use_fixed_step_size: True
fixed_step_size: 0.01
epoch_start_design_change_max: 0.15
epoch_end_design_change_max: 0.05
epoch_start_design_change_min: 0.05
epoch_end_design_change_min: 0
fom_types: ['transmission', 'intensity']
optimization_fom: intensity
reinterpolate_permittivity: True
reinterpolate_permittivity_factor: 2
reinterpolate_type: nearest
border_optimization: False
layer_gradient: False
flip_gradient: False
polarizations_focal_plane_map: [['x', 'y'], ['x', 'y'], ['x', 'y'], ['x', 'y']]
weight_focal_plane_map_performance_weighting: [1.0, 1.0, 1.0, 1.0]
weight_focal_plane_map: [1.0, 1.0, 1.0, 1.0]
do_green_balance: False
polarization_name_to_idx: {'x': 0, 'y': 1, 'z': 2}
desired_peaks_per_band_um: [0.45, 0.54, 0.65]
explicit_band_centering: True
shuffle_green: False
infrared_center_um: 0.94
do_rejection: False
softplus_kappa: 2
evaluate_bordered_extended: False
do_normalize: False
should_fix_layers: True
fixed_layers: [1, 3]
fixed_layers_density: 0
mpi_exe: /central/software/mpich/4.0.0/bin/mpirun
solver_exe: /central/home/tmcnicho/lumerical/v232/bin/fdtd-engine-mpich2nem
nprocs: 8
optimizer: AdamOptimizer
optimizer_settings: {'step_size': 0.01, 'betas': [0.9, 0.99], 'eps': '1e-9', 'moments': [0.0, 0.0]}
figures_of_merit: {'fom_0': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_0']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_0x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2], 'weight': 1.0}}


#
# Derived Properties
#

#* Mesh Properties

min_feature_size_voxels: 1.0
blur_half_width_voxels: 0

#* Optical Properties
min_device_permittivity: 2.25
max_device_permittivity: 5.76
focal_length_um: 1.5299999999999998
focal_plane_center_vertical_um: -1.5299999999999998

#* Device Properties
vertical_layer_height_voxels: 8
device_size_vertical_um: 2.04
device_voxels_lateral: 24
device_voxels_vertical: 40
device_voxels_simulation_mesh_lateral: 41
device_voxels_simulation_mesh_vertical: 42
device_vertical_maximum_um: 2.04
device_size_lateral_bordered_um: 2.04
device_voxels_simulation_mesh_lateral_bordered: 41
border_size_um: 0.255
border_size_voxels: 3
device_voxels_lateral_bordered: 24

#* FDTD Properties

vertical_gap_size_um: 1.2750000000000001
lateral_gap_size_um: 0.51
fdtd_region_size_vertical_um: 6.119999999999999
fdtd_region_size_lateral_um: 3.06
fdtd_region_maximum_vertical_um: 3.3150000000000004
fdtd_region_minimum_vertical_um: -2.8049999999999997

#* Surrounding Properties
pec_aperture_thickness_um: 0.153
sidewall_x_positions_um: [1.0625, 0, -1.0625, 0]
sidewall_y_positions_um: [0, 1.0625, 0, -1.0625]
sidewall_xspan_positions_um: [0.085, 2.21, 0.085, 2.21]
sidewall_yspan_positions_um: [2.21, 0.085, 2.21, 0.085]

#* Spectral Properties
bandwidth_um: 0.3
num_design_frequency_points: 30
num_eval_frequency_points: 180
lambda_values_um: [0.45, 0.46034482758620693, 0.4706896551724138, 0.4810344827586207, 0.4913793103448276, 0.5017241379310345, 0.5120689655172413, 0.5224137931034483, 0.5327586206896552, 0.5431034482758621, 0.553448275862069, 0.5637931034482759, 0.5741379310344827, 0.5844827586206897, 0.5948275862068966, 0.6051724137931035, 0.6155172413793104, 0.6258620689655172, 0.6362068965517241, 0.646551724137931, 0.656896551724138, 0.6672413793103449, 0.6775862068965517, 0.6879310344827586, 0.6982758620689655, 0.7086206896551724, 0.7189655172413794, 0.7293103448275862, 0.7396551724137932, 0.75]
max_intensity_by_wavelength: [36.53530864197531, 34.91172214507147, 33.39400448147702, 31.973147313112626, 30.641080455524776, 29.39055703168361, 28.215054699633836, 27.108690433399783, 26.066146772656342, 25.082607810531623, 24.153703477256624, 23.275460913316312, 22.44426191957724, 21.65680563169482, 20.910075698382695, 20.201311352992263, 19.527981859410428, 18.887763889837522, 18.278521456217273, 17.698288071111115, 17.145250859390607, 16.617736380692932, 16.114197955312115, 15.633204314043255, 15.173429416247526, 14.733643300714537, 14.312703851307443, 13.90954937433284, 13.52319189745763, 13.152711111111115]
dispersive_range_size_um: 0.3
dispersive_ranges_um: [[0.45, 0.75]]

#* PDAF Functionality Properties
pdaf_focal_spot_x_um: 0.51
pdaf_focal_spot_y_um: 0.51
pdaf_lambda_min_um: 0.45
pdaf_lambda_max_um: 0.55
pdaf_lambda_values_um: [0.45, 0.453448275862069, 0.45689655172413796, 0.46034482758620693, 0.4637931034482759, 0.4672413793103448, 0.4706896551724138, 0.47413793103448276, 0.47758620689655173, 0.4810344827586207, 0.4844827586206897, 0.48793103448275865, 0.4913793103448276, 0.4948275862068966, 0.49827586206896557, 0.5017241379310345, 0.5051724137931035, 0.5086206896551725, 0.5120689655172415, 0.5155172413793103, 0.5189655172413794, 0.5224137931034483, 0.5258620689655172, 0.5293103448275862, 0.5327586206896552, 0.5362068965517242, 0.5396551724137931, 0.5431034482758621, 0.5465517241379311, 0.55]
pdaf_max_intensity_by_wavelength: [36.53530864197531, 35.98175136260464, 35.440680099679604, 34.91172214507147, 34.394518594270394, 33.88872373742188, 33.39400448147702, 32.9100398016529, 32.436520220516364, 31.973147313112626, 31.519633236661136, 31.075700283434678, 30.641080455524776, 30.21551506027753, 29.798754325259512, 29.39055703168361, 28.990690165290218, 28.598928583740303, 28.215054699633825, 27.838858178320162, 27.470135649716887, 27.108690433399783, 26.754332276269828, 26.40687710214432, 26.066146772656342, 25.73196885888277, 25.404176423154265, 25.082607810531623, 24.767106449462133, 24.457520661157027]

#* Forward (Input) Source Properties
lateral_aperture_um: 2.244
src_maximum_vertical_um: 2.89
src_minimum_vertical_um: -2.1675
mid_lambda_um: 0.6
gaussian_waist_radius_um: 1
source_angle_theta_rad: 0.0
source_angle_theta_deg: 0.0

#* Adjoint Source Properties
adjoint_vertical_um: -1.5299999999999998
num_adjoint_sources: 2
adjoint_x_positions_um: [0.51, -0.51, -0.51, 0.51]
adjoint_y_positions_um: [0.51, 0.51, -0.51, -0.51]

#* Optimzation Properties
epoch_range_design_change_max: 0.09999999999999999
epoch_range_design_change_min: 0.05
spectral_focal_plane_map: [[0, 15], [15, 30], [30, 45], [15, 30]]
desired_peak_location_per_band: [0, 9, 19]
2024-02-23 11:53:03,899 - template_logger - INFO - Successfully saved output to runs\test_run\processed_config.yml
2024-02-23 11:53:09,543 - template_logger - INFO - Rendered Output:
{ 
    "info": {
        "name": "optimization",
        "path": "",
        "simulator_name": "LumericalFDTD",
        "coordinates": {}
    },
    "objects": {
        "FDTD": {
            "name": "FDTD",
            "obj_type": "fdtd",
            "properties": {
                "dimension": "2D",
                "x span": 3.06e-06,
                "y max": 3.3150000000000004e-06,
                "y min": -2.8049999999999994e-06,
                
                "simulation time": 6.000000000000001e-13,
                "index": 1.5
            }
        },
        "forward_src_x": {
            "name": "forward_src_x",
            "obj_type": "gaussian",
            "attached monitor": 0,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 0,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
        "forward_src_y": {
            "name": "forward_src_y",
            "obj_type": "gaussian",
            "attached monitor": 1,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 90,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
        "adj_src_0x": {
            "name": "adj_src_0x",
            "obj_type": "dipole",
            "properties": {
                "x": 5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "theta": 90,
                "phi": 0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07
            }
        },
        "adj_src_0y": {
            "name": "adj_src_0y",
            "obj_type": "dipole",
            "properties": {
                "x": 5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "theta": 90,
                "phi": 90,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07
            }
        },
        "adj_src_1x": {
            "name": "adj_src_1x",
            "obj_type": "dipole",
            "properties": {
                "x": -5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "theta": 90,
                "phi": 0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07
            }
        },
        "adj_src_1y": {
            "name": "adj_src_1y",
            "obj_type": "dipole",
            "properties": {
                "x": -5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "theta": 90,
                "phi": 90,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07
            }
        },
        "focal_monitor_0": {
            "name": "focal_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": 5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "focal_monitor_1": {
            "name": "focal_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": -5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_0": {
            "name": "transmission_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "x": 5.1e-07,
                "x span": 1.02e-06,
                "y": 5.1e-07,
                "y span": 1.02e-06,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_1": {
            "name": "transmission_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "x": -5.1e-07,
                "x span": 1.02e-06,
                "y": 5.1e-07,
                "y span": 1.02e-06,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_focal_monitor_": {
            "name": "transmission_focal_monitor_",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "x": 0,
                "x span": 2.04e-06,
                "y": 0,
                "y span": 2.04e-06,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "PEC_screen": {
            "name": "PEC_screen",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 3.5904e-06,
                "y": 0,
                "y span": 3.5904e-06,
                "z min": 2.193e-06,
                "z max": 2.346e-06,
                "material": "PEC (Perfect Electrical Conductor)"
            }
        },
        "source_aperture": {
            "name": "source_aperture",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 2.04e-06,
                "y": 0,
                "y span": 2.04e-06,
                "z min": 2.193e-06,
                "z max": 2.346e-06,
                "index": 1.5
            }
        },
        "design_import": {
            "name": "design_import",
            "obj_type": "import",
            "properties": {
                "x span": 2.04e-06,
                "y span": 2.04e-06,
                "z min": 0.0,
                "z max": 2.04e-06
            }
        },
        "design_mesh": {
            "name": "design_mesh",
            "obj_type": "mesh",
            "properties": {
                "x": 0,
                "x span": 3.06e-06,
                "y": 0,
                "y span": 3.06e-06,
                "z min": -5e-07,
                "z max": 2.54e-06,
                "dx": 5.0999999999999993e-08,
                "dy": 5.0999999999999993e-08,
                "dz": 5.0999999999999993e-08
            }
        },
        "design_index_monitor": {
            "name": "design_index_monitor",
            "obj_type": "index",
            "properties": {
                "monitor type": "3D",
                "x span": 2.04e-06,
                "y span": 2.04e-06,
                "z min": 0.0,
                "z max": 2.04e-06,
                "spatial interpolation": "nearest mesh cell"
            }
        },
        "design_efield_monitor": {
            "name": "design_efield_monitor",
            "obj_type": "profile",
            "properties": {
                "monitor type": "3D",
                "x span": 2.04e-06,
                "y span": 2.04e-06,
                "z min": 0.0,
                "z max": 2.04e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "frequency points": 30,
                "output Hx": 0,
                "output Hy": 0,
                "output Hz": 0
            }
        }
    }
}
2024-02-23 11:53:09,547 - template_logger - INFO - Successfully saved output to runs\test_run\sim.json
2024-02-23 13:15:25,422 - template_logger - INFO - Rendered Output:
#* Original Properties

start_from_step: 0
shelf_fn: save_state
restart_epoch: 0
restart_iter: 0
lumapi_filepath_local: C:\Program Files\Lumerical\v212\api\python\lumapi.py
lumapi_filepath_hpc: /central/home/ifoo/lumerical/2021a_r22/api/python/lumapi.py
simulator_name: LumericalFDTD
simulator_dimension: 2D
simulator_max_wait_time: 3600
use_autograd: False
convert_existing: False
mesh_spacing_um: 0.051
geometry_spacing_lateral_um: 0.085
device_scale_um: 0.051
use_smooth_blur: False
min_feature_size_um: 0.085
background_index: 1.5
min_device_index: 1.5
max_device_index: 2.4
init_permittivity_0_1_scale: 0.5
binarize_3_levels: False
focal_plane_center_lateral_um: 0
num_vertical_layers: 5
vertical_layer_height_um: 0.408
device_size_lateral_um: 2.04
device_vertical_minimum_um: 0
objects_above_device: []
num_sidewalls: 0
sidewall_material: etch
sidewall_extend_pml: False
sidewall_extend_focalplane: True
sidewall_thickness_um: 0.085
sidewall_vertical_minimum_um: -0.765
add_infrared: False
lambda_min_um: 0.45
lambda_max_um: 0.75
lambda_min_eval_um: 0.45
lambda_max_eval_um: 0.75
num_bands: 2
num_points_per_band: 15
num_dispersive_ranges: 1
add_pdaf: False
pdaf_angle_phi_degrees: 45
pdaf_angle_theta_degrees: -8
pdaf_adj_src_idx: 0
fdtd_simulation_time_fs: 600
weight_by_individual_wavelength: True
use_gaussian_sources: True
use_airy_approximation: True
f_number: 2.2
airy_correction_factor: 0.84
beam_size_multiplier: 1
source_angle_theta_vacuum_deg: 0
source_angle_phi_deg: 0
xy_phi_rotations: [0, 90]
xy_adjtheta_rotations: [90, 0]
xy_pol_rotations: [0, 90]
xy_names: ['x', 'y']
use_source_aperture: True
num_focal_spots: 2
dispersive_range_to_adjoint_src_map: [[0, 1, 2, 3]]
adjoint_src_to_dispersive_range_map: [0, 0, 0, 0]
enforce_xy_gradient_symmetry: False
weight_by_quadrant_transmission: True
num_epochs: 10
num_iterations_per_epoch: 30
total_num_iterations: 80
epoch_list: [0, 16, 32, 48, 64, 80]
optimizer_algorithm: ADAM
adam_betas: (0.9, 0.999)
use_fixed_step_size: True
fixed_step_size: 0.01
epoch_start_design_change_max: 0.15
epoch_end_design_change_max: 0.05
epoch_start_design_change_min: 0.05
epoch_end_design_change_min: 0
fom_types: ['transmission', 'intensity']
optimization_fom: intensity
reinterpolate_permittivity: True
reinterpolate_permittivity_factor: 2
reinterpolate_type: nearest
border_optimization: False
layer_gradient: False
flip_gradient: False
polarizations_focal_plane_map: [['x', 'y'], ['x', 'y'], ['x', 'y'], ['x', 'y']]
weight_focal_plane_map_performance_weighting: [1.0, 1.0, 1.0, 1.0]
weight_focal_plane_map: [1.0, 1.0, 1.0, 1.0]
do_green_balance: False
polarization_name_to_idx: {'x': 0, 'y': 1, 'z': 2}
desired_peaks_per_band_um: [0.45, 0.54, 0.65]
explicit_band_centering: True
shuffle_green: False
infrared_center_um: 0.94
do_rejection: False
softplus_kappa: 2
evaluate_bordered_extended: False
do_normalize: False
should_fix_layers: True
fixed_layers: [1, 3]
fixed_layers_density: 0
mpi_exe: /central/software/mpich/4.0.0/bin/mpirun
solver_exe: /central/home/tmcnicho/lumerical/v232/bin/fdtd-engine-mpich2nem
nprocs: 8
optimizer: AdamOptimizer
optimizer_settings: {'step_size': 0.01, 'betas': [0.9, 0.99], 'eps': '1e-9', 'moments': [0.0, 0.0]}
figures_of_merit: {'fom_0': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_0']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_0x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2], 'weight': 1.0}}


#
# Derived Properties
#

#* Mesh Properties

min_feature_size_voxels: 1.0
blur_half_width_voxels: 0

#* Optical Properties
min_device_permittivity: 2.25
max_device_permittivity: 5.76
focal_length_um: 1.5299999999999998
focal_plane_center_vertical_um: -1.5299999999999998

#* Device Properties
vertical_layer_height_voxels: 8
device_size_vertical_um: 2.04
device_voxels_lateral: 24
device_voxels_vertical: 40
device_voxels_simulation_mesh_lateral: 41
device_voxels_simulation_mesh_vertical: 42
device_vertical_maximum_um: 2.04
device_size_lateral_bordered_um: 2.04
device_voxels_simulation_mesh_lateral_bordered: 41
border_size_um: 0.255
border_size_voxels: 3
device_voxels_lateral_bordered: 24

#* FDTD Properties

vertical_gap_size_um: 1.2750000000000001
lateral_gap_size_um: 0.51
fdtd_region_size_vertical_um: 6.119999999999999
fdtd_region_size_lateral_um: 3.06
fdtd_region_maximum_vertical_um: 3.3150000000000004
fdtd_region_minimum_vertical_um: -2.8049999999999997

#* Surrounding Properties
pec_aperture_thickness_um: 0.153
sidewall_x_positions_um: [1.0625, 0, -1.0625, 0]
sidewall_y_positions_um: [0, 1.0625, 0, -1.0625]
sidewall_xspan_positions_um: [0.085, 2.21, 0.085, 2.21]
sidewall_yspan_positions_um: [2.21, 0.085, 2.21, 0.085]

#* Spectral Properties
bandwidth_um: 0.3
num_design_frequency_points: 30
num_eval_frequency_points: 180
lambda_values_um: [0.45, 0.46034482758620693, 0.4706896551724138, 0.4810344827586207, 0.4913793103448276, 0.5017241379310345, 0.5120689655172413, 0.5224137931034483, 0.5327586206896552, 0.5431034482758621, 0.553448275862069, 0.5637931034482759, 0.5741379310344827, 0.5844827586206897, 0.5948275862068966, 0.6051724137931035, 0.6155172413793104, 0.6258620689655172, 0.6362068965517241, 0.646551724137931, 0.656896551724138, 0.6672413793103449, 0.6775862068965517, 0.6879310344827586, 0.6982758620689655, 0.7086206896551724, 0.7189655172413794, 0.7293103448275862, 0.7396551724137932, 0.75]
max_intensity_by_wavelength: [36.53530864197531, 34.91172214507147, 33.39400448147702, 31.973147313112626, 30.641080455524776, 29.39055703168361, 28.215054699633836, 27.108690433399783, 26.066146772656342, 25.082607810531623, 24.153703477256624, 23.275460913316312, 22.44426191957724, 21.65680563169482, 20.910075698382695, 20.201311352992263, 19.527981859410428, 18.887763889837522, 18.278521456217273, 17.698288071111115, 17.145250859390607, 16.617736380692932, 16.114197955312115, 15.633204314043255, 15.173429416247526, 14.733643300714537, 14.312703851307443, 13.90954937433284, 13.52319189745763, 13.152711111111115]
dispersive_range_size_um: 0.3
dispersive_ranges_um: [[0.45, 0.75]]

#* PDAF Functionality Properties
pdaf_focal_spot_x_um: 0.51
pdaf_focal_spot_y_um: 0.51
pdaf_lambda_min_um: 0.45
pdaf_lambda_max_um: 0.55
pdaf_lambda_values_um: [0.45, 0.453448275862069, 0.45689655172413796, 0.46034482758620693, 0.4637931034482759, 0.4672413793103448, 0.4706896551724138, 0.47413793103448276, 0.47758620689655173, 0.4810344827586207, 0.4844827586206897, 0.48793103448275865, 0.4913793103448276, 0.4948275862068966, 0.49827586206896557, 0.5017241379310345, 0.5051724137931035, 0.5086206896551725, 0.5120689655172415, 0.5155172413793103, 0.5189655172413794, 0.5224137931034483, 0.5258620689655172, 0.5293103448275862, 0.5327586206896552, 0.5362068965517242, 0.5396551724137931, 0.5431034482758621, 0.5465517241379311, 0.55]
pdaf_max_intensity_by_wavelength: [36.53530864197531, 35.98175136260464, 35.440680099679604, 34.91172214507147, 34.394518594270394, 33.88872373742188, 33.39400448147702, 32.9100398016529, 32.436520220516364, 31.973147313112626, 31.519633236661136, 31.075700283434678, 30.641080455524776, 30.21551506027753, 29.798754325259512, 29.39055703168361, 28.990690165290218, 28.598928583740303, 28.215054699633825, 27.838858178320162, 27.470135649716887, 27.108690433399783, 26.754332276269828, 26.40687710214432, 26.066146772656342, 25.73196885888277, 25.404176423154265, 25.082607810531623, 24.767106449462133, 24.457520661157027]

#* Forward (Input) Source Properties
lateral_aperture_um: 2.244
src_maximum_vertical_um: 2.89
src_minimum_vertical_um: -2.1675
mid_lambda_um: 0.6
gaussian_waist_radius_um: 1
source_angle_theta_rad: 0.0
source_angle_theta_deg: 0.0

#* Adjoint Source Properties
adjoint_vertical_um: -1.5299999999999998
num_adjoint_sources: 2
adjoint_x_positions_um: [0.51, -0.51, -0.51, 0.51]
adjoint_y_positions_um: [0.51, 0.51, -0.51, -0.51]

#* Optimzation Properties
epoch_range_design_change_max: 0.09999999999999999
epoch_range_design_change_min: 0.05
spectral_focal_plane_map: [[0, 15], [15, 30], [30, 45], [15, 30]]
desired_peak_location_per_band: [0, 9, 19]
2024-02-23 13:15:25,424 - template_logger - INFO - Successfully saved output to runs\test_run\processed_config.yml
2024-02-23 13:23:26,942 - template_logger - INFO - Rendered Output:
#* Original Properties

start_from_step: 0
shelf_fn: save_state
restart_epoch: 0
restart_iter: 0
lumapi_filepath_local: C:\Program Files\Lumerical\v212\api\python\lumapi.py
lumapi_filepath_hpc: /central/home/ifoo/lumerical/2021a_r22/api/python/lumapi.py
simulator_name: LumericalFDTD
simulator_dimension: 2D
simulator_max_wait_time: 3600
use_autograd: False
convert_existing: False
mesh_spacing_um: 0.051
geometry_spacing_lateral_um: 0.085
device_scale_um: 0.051
use_smooth_blur: False
min_feature_size_um: 0.085
background_index: 1.5
min_device_index: 1.5
max_device_index: 2.4
init_permittivity_0_1_scale: 0.5
binarize_3_levels: False
focal_plane_center_lateral_um: 0
num_vertical_layers: 5
vertical_layer_height_um: 0.408
device_size_lateral_um: 2.04
device_vertical_minimum_um: 0
objects_above_device: []
num_sidewalls: 0
sidewall_material: etch
sidewall_extend_pml: False
sidewall_extend_focalplane: True
sidewall_thickness_um: 0.085
sidewall_vertical_minimum_um: -0.765
add_infrared: False
lambda_min_um: 0.45
lambda_max_um: 0.75
lambda_min_eval_um: 0.45
lambda_max_eval_um: 0.75
num_bands: 2
num_points_per_band: 15
num_dispersive_ranges: 1
add_pdaf: False
pdaf_angle_phi_degrees: 45
pdaf_angle_theta_degrees: -8
pdaf_adj_src_idx: 0
fdtd_simulation_time_fs: 600
weight_by_individual_wavelength: True
use_gaussian_sources: True
use_airy_approximation: True
f_number: 2.2
airy_correction_factor: 0.84
beam_size_multiplier: 1
source_angle_theta_vacuum_deg: 0
source_angle_phi_deg: 0
xy_phi_rotations: [0, 90]
xy_adjtheta_rotations: [90, 0]
xy_pol_rotations: [0, 90]
xy_names: ['x', 'y']
use_source_aperture: True
num_focal_spots: 2
dispersive_range_to_adjoint_src_map: [[0, 1, 2, 3]]
adjoint_src_to_dispersive_range_map: [0, 0, 0, 0]
enforce_xy_gradient_symmetry: False
weight_by_quadrant_transmission: True
num_epochs: 10
num_iterations_per_epoch: 30
total_num_iterations: 80
epoch_list: [0, 16, 32, 48, 64, 80]
optimizer_algorithm: ADAM
adam_betas: (0.9, 0.999)
use_fixed_step_size: True
fixed_step_size: 0.01
epoch_start_design_change_max: 0.15
epoch_end_design_change_max: 0.05
epoch_start_design_change_min: 0.05
epoch_end_design_change_min: 0
fom_types: ['transmission', 'intensity']
optimization_fom: intensity
reinterpolate_permittivity: True
reinterpolate_permittivity_factor: 2
reinterpolate_type: nearest
border_optimization: False
layer_gradient: False
flip_gradient: False
polarizations_focal_plane_map: [['x', 'y'], ['x', 'y'], ['x', 'y'], ['x', 'y']]
weight_focal_plane_map_performance_weighting: [1.0, 1.0, 1.0, 1.0]
weight_focal_plane_map: [1.0, 1.0, 1.0, 1.0]
do_green_balance: False
polarization_name_to_idx: {'x': 0, 'y': 1, 'z': 2}
desired_peaks_per_band_um: [0.45, 0.54, 0.65]
explicit_band_centering: True
shuffle_green: False
infrared_center_um: 0.94
do_rejection: False
softplus_kappa: 2
evaluate_bordered_extended: False
do_normalize: False
should_fix_layers: True
fixed_layers: [1, 3]
fixed_layers_density: 0
mpi_exe: /central/software/mpich/4.0.0/bin/mpirun
solver_exe: /central/home/tmcnicho/lumerical/v232/bin/fdtd-engine-mpich2nem
nprocs: 8
optimizer: AdamOptimizer
optimizer_settings: {'step_size': 0.01, 'betas': [0.9, 0.99], 'eps': '1e-9', 'moments': [0.0, 0.0]}
figures_of_merit: {'fom_0': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_0']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_0x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2], 'weight': 1.0}}


#
# Derived Properties
#

#* Mesh Properties

min_feature_size_voxels: 1.0
blur_half_width_voxels: 0

#* Optical Properties
min_device_permittivity: 2.25
max_device_permittivity: 5.76
focal_length_um: 1.5299999999999998
focal_plane_center_vertical_um: -1.5299999999999998

#* Device Properties
vertical_layer_height_voxels: 8
device_size_vertical_um: 2.04
device_voxels_lateral: 24
device_voxels_vertical: 40
device_voxels_simulation_mesh_lateral: 41
device_voxels_simulation_mesh_vertical: 42
device_vertical_maximum_um: 2.04
device_size_lateral_bordered_um: 2.04
device_voxels_simulation_mesh_lateral_bordered: 41
border_size_um: 0.255
border_size_voxels: 3
device_voxels_lateral_bordered: 24

#* FDTD Properties

vertical_gap_size_um: 1.2750000000000001
lateral_gap_size_um: 0.51
fdtd_region_size_vertical_um: 6.119999999999999
fdtd_region_size_lateral_um: 3.06
fdtd_region_maximum_vertical_um: 3.3150000000000004
fdtd_region_minimum_vertical_um: -2.8049999999999997

#* Surrounding Properties
pec_aperture_thickness_um: 0.153
sidewall_x_positions_um: [1.0625, 0, -1.0625, 0]
sidewall_y_positions_um: [0, 1.0625, 0, -1.0625]
sidewall_xspan_positions_um: [0.085, 2.21, 0.085, 2.21]
sidewall_yspan_positions_um: [2.21, 0.085, 2.21, 0.085]

#* Spectral Properties
bandwidth_um: 0.3
num_design_frequency_points: 30
num_eval_frequency_points: 180
lambda_values_um: [0.45, 0.46034482758620693, 0.4706896551724138, 0.4810344827586207, 0.4913793103448276, 0.5017241379310345, 0.5120689655172413, 0.5224137931034483, 0.5327586206896552, 0.5431034482758621, 0.553448275862069, 0.5637931034482759, 0.5741379310344827, 0.5844827586206897, 0.5948275862068966, 0.6051724137931035, 0.6155172413793104, 0.6258620689655172, 0.6362068965517241, 0.646551724137931, 0.656896551724138, 0.6672413793103449, 0.6775862068965517, 0.6879310344827586, 0.6982758620689655, 0.7086206896551724, 0.7189655172413794, 0.7293103448275862, 0.7396551724137932, 0.75]
max_intensity_by_wavelength: [36.53530864197531, 34.91172214507147, 33.39400448147702, 31.973147313112626, 30.641080455524776, 29.39055703168361, 28.215054699633836, 27.108690433399783, 26.066146772656342, 25.082607810531623, 24.153703477256624, 23.275460913316312, 22.44426191957724, 21.65680563169482, 20.910075698382695, 20.201311352992263, 19.527981859410428, 18.887763889837522, 18.278521456217273, 17.698288071111115, 17.145250859390607, 16.617736380692932, 16.114197955312115, 15.633204314043255, 15.173429416247526, 14.733643300714537, 14.312703851307443, 13.90954937433284, 13.52319189745763, 13.152711111111115]
dispersive_range_size_um: 0.3
dispersive_ranges_um: [[0.45, 0.75]]

#* PDAF Functionality Properties
pdaf_focal_spot_x_um: 0.51
pdaf_focal_spot_y_um: 0.51
pdaf_lambda_min_um: 0.45
pdaf_lambda_max_um: 0.55
pdaf_lambda_values_um: [0.45, 0.453448275862069, 0.45689655172413796, 0.46034482758620693, 0.4637931034482759, 0.4672413793103448, 0.4706896551724138, 0.47413793103448276, 0.47758620689655173, 0.4810344827586207, 0.4844827586206897, 0.48793103448275865, 0.4913793103448276, 0.4948275862068966, 0.49827586206896557, 0.5017241379310345, 0.5051724137931035, 0.5086206896551725, 0.5120689655172415, 0.5155172413793103, 0.5189655172413794, 0.5224137931034483, 0.5258620689655172, 0.5293103448275862, 0.5327586206896552, 0.5362068965517242, 0.5396551724137931, 0.5431034482758621, 0.5465517241379311, 0.55]
pdaf_max_intensity_by_wavelength: [36.53530864197531, 35.98175136260464, 35.440680099679604, 34.91172214507147, 34.394518594270394, 33.88872373742188, 33.39400448147702, 32.9100398016529, 32.436520220516364, 31.973147313112626, 31.519633236661136, 31.075700283434678, 30.641080455524776, 30.21551506027753, 29.798754325259512, 29.39055703168361, 28.990690165290218, 28.598928583740303, 28.215054699633825, 27.838858178320162, 27.470135649716887, 27.108690433399783, 26.754332276269828, 26.40687710214432, 26.066146772656342, 25.73196885888277, 25.404176423154265, 25.082607810531623, 24.767106449462133, 24.457520661157027]

#* Forward (Input) Source Properties
lateral_aperture_um: 2.244
src_maximum_vertical_um: 2.89
src_minimum_vertical_um: -2.1675
mid_lambda_um: 0.6
gaussian_waist_radius_um: 1
source_angle_theta_rad: 0.0
source_angle_theta_deg: 0.0

#* Adjoint Source Properties
adjoint_vertical_um: -1.5299999999999998
num_adjoint_sources: 2
adjoint_x_positions_um: [0.51, -0.51, -0.51, 0.51]
adjoint_y_positions_um: [0.51, 0.51, -0.51, -0.51]

#* Optimzation Properties
epoch_range_design_change_max: 0.09999999999999999
epoch_range_design_change_min: 0.05
spectral_focal_plane_map: [[0, 15], [15, 30], [30, 45], [15, 30]]
desired_peak_location_per_band: [0, 9, 19]
2024-02-23 13:23:26,946 - template_logger - INFO - Successfully saved output to runs\test_run\processed_config.yml
2024-02-23 13:23:32,244 - template_logger - INFO - Rendered Output:
{ 
    "info": {
        "name": "optimization",
        "path": "",
        "simulator_name": "LumericalFDTD",
        "coordinates": {}
    },

    "objects": {
        "FDTD": {"name": "FDTD",
            "obj_type": "fdtd",
            "properties": {
                "dimension": "2D",
                "x span": 3.06e-06,
                "y max": 3.3150000000000004e-06,
                "y min": -2.8049999999999994e-06,
                
                "simulation time": 6.000000000000001e-13,
                "index": 1.5
            }
        },
        "forward_src_x": {
            "name": "forward_src_x",
            "obj_type": "gaussian",
            "attached monitor": 0,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 0,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
        "forward_src_y": {
            "name": "forward_src_y",
            "obj_type": "gaussian",
            "attached monitor": 1,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 90,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
            "adj_src_0x": {
                "name": "adj_src_0x",
                "obj_type": "dipole","properties": {
                    "x": 5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_0y": {
                "name": "adj_src_0y",
                "obj_type": "dipole","properties": {
                    "x": 5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 0,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_1x": {
                "name": "adj_src_1x",
                "obj_type": "dipole","properties": {
                    "x": -5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_1y": {
                "name": "adj_src_1y",
                "obj_type": "dipole","properties": {
                    "x": -5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 0,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
        "focal_monitor_0": {
            "name": "focal_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": 5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "focal_monitor_1": {
            "name": "focal_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": -5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_0": {
            "name": "transmission_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "x": 5.1e-07,
                "x span": 1.02e-06,
                "y": 5.1e-07,
                "y span": 1.02e-06,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_1": {
            "name": "transmission_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "x": -5.1e-07,
                "x span": 1.02e-06,
                "y": 5.1e-07,
                "y span": 1.02e-06,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_focal_monitor_": {
            "name": "transmission_focal_monitor_",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "x": 0,
                "x span": 2.04e-06,
                "y": 0,
                "y span": 2.04e-06,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "PEC_screen": {
            "name": "PEC_screen",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 3.5904e-06,
                "y": 0,
                "y span": 3.5904e-06,
                "z min": 2.193e-06,
                "z max": 2.346e-06,
                "material": "PEC (Perfect Electrical Conductor)"
            }
        },
        "source_aperture": {
            "name": "source_aperture",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 2.04e-06,
                "y": 0,
                "y span": 2.04e-06,
                "z min": 2.193e-06,
                "z max": 2.346e-06,
                "index": 1.5
            }
        },
        "design_import": {
            "name": "design_import",
            "obj_type": "import",
            "properties": {
                "x span": 2.04e-06,
                "y span": 2.04e-06,
                "z min": 0.0,
                "z max": 2.04e-06
            }
        },
        "design_mesh": {
            "name": "design_mesh",
            "obj_type": "mesh",
            "properties": {
                "x": 0,
                "x span": 3.06e-06,
                "y": 0,
                "y span": 3.06e-06,
                "z min": -5e-07,
                "z max": 2.54e-06,
                "dx": 5.0999999999999993e-08,
                "dy": 5.0999999999999993e-08,
                "dz": 5.0999999999999993e-08
            }
        },
        "design_index_monitor": {
            "name": "design_index_monitor",
            "obj_type": "index",
            "properties": {
                "monitor type": "3D",
                "x span": 2.04e-06,
                "y span": 2.04e-06,
                "z min": 0.0,
                "z max": 2.04e-06,
                "spatial interpolation": "nearest mesh cell"
            }
        },
        "design_efield_monitor": {
            "name": "design_efield_monitor",
            "obj_type": "profile",
            "properties": {
                "monitor type": "3D",
                "x span": 2.04e-06,
                "y span": 2.04e-06,
                "z min": 0.0,
                "z max": 2.04e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "frequency points": 30,
                "output Hx": 0,
                "output Hy": 0,
                "output Hz": 0
            }
        }
    }
}
2024-02-23 13:23:32,248 - template_logger - INFO - Successfully saved output to runs\test_run\sim.json
2024-02-23 15:12:32,790 - template_logger - INFO - Rendered Output:
{ 
    "info": {
        "name": "optimization",
        "path": "",
        "simulator_name": "LumericalFDTD",
        "coordinates": {}
    },

    "objects": {
        "FDTD": {
            
            "name": "FDTD",
            "obj_type": "fdtd",
            "properties": {
                "dimension": "2D",
                "x span": 3.06e-06,
                "y max": 3.3150000000000004e-06,
                "y min": -2.8049999999999994e-06,
                
                "simulation time": 6.000000000000001e-13,
                "index": 1.5
            }
        },
        "forward_src_x": {
            "name": "forward_src_x",
            "obj_type": "gaussian",
            "attached monitor": 0,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 0,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
        "forward_src_y": {
            "name": "forward_src_y",
            "obj_type": "gaussian",
            "attached monitor": 1,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 90,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
            "adj_src_0x": {
                "name": "adj_src_0x",
                "obj_type": "dipole","properties": {
                    "x": 5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_0y": {
                "name": "adj_src_0y",
                "obj_type": "dipole","properties": {
                    "x": 5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 0,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_1x": {
                "name": "adj_src_1x",
                "obj_type": "dipole","properties": {
                    "x": -5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_1y": {
                "name": "adj_src_1y",
                "obj_type": "dipole","properties": {
                    "x": -5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 0,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
        "focal_monitor_0": {
            "name": "focal_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": 5.1e-07,
                "y": -1.5299999999999998e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "focal_monitor_1": {
            "name": "focal_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": -5.1e-07,
                "y": -1.5299999999999998e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_0": {
            "name": "transmission_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "y": -1.5299999999999998e-06,
                
                "x": 5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_1": {
            "name": "transmission_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "y": -1.5299999999999998e-06,
                
                "x": -5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_focal_monitor_": {
            "name": "transmission_focal_monitor_",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "x": 0,
                "x span": 2.04e-06,
                "y": 0,
                "y span": 2.04e-06,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "PEC_screen": {
            "name": "PEC_screen",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 3.5904e-06,
                "y": 0,
                "y span": 3.5904e-06,
                "z min": 2.193e-06,
                "z max": 2.346e-06,
                "material": "PEC (Perfect Electrical Conductor)"
            }
        },
        "source_aperture": {
            "name": "source_aperture",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 2.04e-06,
                "y": 0,
                "y span": 2.04e-06,
                "z min": 2.193e-06,
                "z max": 2.346e-06,
                "index": 1.5
            }
        },
        "design_import": {
            "name": "design_import",
            "obj_type": "import",
            "properties": {
                "x span": 2.04e-06,
                "y span": 2.04e-06,
                "z min": 0.0,
                "z max": 2.04e-06
            }
        },
        "design_mesh": {
            "name": "design_mesh",
            "obj_type": "mesh",
            "properties": {
                "x": 0,
                "x span": 3.06e-06,
                "y": 0,
                "y span": 3.06e-06,
                "z min": -5e-07,
                "z max": 2.54e-06,
                "dx": 5.0999999999999993e-08,
                "dy": 5.0999999999999993e-08,
                "dz": 5.0999999999999993e-08
            }
        },
        "design_index_monitor": {
            "name": "design_index_monitor",
            "obj_type": "index",
            "properties": {
                "monitor type": "3D",
                "x span": 2.04e-06,
                "y span": 2.04e-06,
                "z min": 0.0,
                "z max": 2.04e-06,
                "spatial interpolation": "nearest mesh cell"
            }
        },
        "design_efield_monitor": {
            "name": "design_efield_monitor",
            "obj_type": "profile",
            "properties": {
                "monitor type": "3D",
                "x span": 2.04e-06,
                "y span": 2.04e-06,
                "z min": 0.0,
                "z max": 2.04e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "frequency points": 30,
                "output Hx": 0,
                "output Hy": 0,
                "output Hz": 0
            }
        }
    }
}
2024-02-23 15:12:32,795 - template_logger - INFO - Successfully saved output to runs\test_run\sim.json
2024-02-23 15:26:31,751 - template_logger - INFO - Rendered Output:
#* Original Properties

start_from_step: 0
shelf_fn: save_state
restart_epoch: 0
restart_iter: 0
lumapi_filepath_local: C:\Program Files\Lumerical\v212\api\python\lumapi.py
lumapi_filepath_hpc: /central/home/ifoo/lumerical/2021a_r22/api/python/lumapi.py
simulator_name: LumericalFDTD
simulator_dimension: 2D
simulator_max_wait_time: 3600
use_autograd: False
convert_existing: False
mesh_spacing_um: 0.051
geometry_spacing_lateral_um: 0.085
device_scale_um: 0.051
use_smooth_blur: False
min_feature_size_um: 0.085
background_index: 1.5
min_device_index: 1.5
max_device_index: 2.4
init_permittivity_0_1_scale: 0.5
binarize_3_levels: False
focal_plane_center_lateral_um: 0
num_vertical_layers: 5
vertical_layer_height_um: 0.408
device_size_lateral_um: 2.04
device_vertical_minimum_um: 0
objects_above_device: []
num_sidewalls: 0
sidewall_material: etch
sidewall_extend_pml: False
sidewall_extend_focalplane: True
sidewall_thickness_um: 0.085
sidewall_vertical_minimum_um: -0.765
add_infrared: False
lambda_min_um: 0.45
lambda_max_um: 0.75
lambda_min_eval_um: 0.45
lambda_max_eval_um: 0.75
num_bands: 2
num_points_per_band: 15
num_dispersive_ranges: 1
add_pdaf: False
pdaf_angle_phi_degrees: 45
pdaf_angle_theta_degrees: -8
pdaf_adj_src_idx: 0
fdtd_simulation_time_fs: 600
weight_by_individual_wavelength: True
use_gaussian_sources: True
use_airy_approximation: True
f_number: 2.2
airy_correction_factor: 0.84
beam_size_multiplier: 1
source_angle_theta_vacuum_deg: 0
source_angle_phi_deg: 0
xy_phi_rotations: [0, 90]
xy_adjtheta_rotations: [90, 0]
xy_pol_rotations: [0, 90]
xy_names: ['x', 'y']
use_source_aperture: True
num_focal_spots: 2
dispersive_range_to_adjoint_src_map: [[0, 1, 2, 3]]
adjoint_src_to_dispersive_range_map: [0, 0, 0, 0]
enforce_xy_gradient_symmetry: False
weight_by_quadrant_transmission: True
num_epochs: 10
num_iterations_per_epoch: 30
total_num_iterations: 80
epoch_list: [0, 16, 32, 48, 64, 80]
optimizer_algorithm: ADAM
adam_betas: (0.9, 0.999)
use_fixed_step_size: True
fixed_step_size: 0.01
epoch_start_design_change_max: 0.15
epoch_end_design_change_max: 0.05
epoch_start_design_change_min: 0.05
epoch_end_design_change_min: 0
fom_types: ['transmission', 'intensity']
optimization_fom: intensity
reinterpolate_permittivity: True
reinterpolate_permittivity_factor: 2
reinterpolate_type: nearest
border_optimization: False
layer_gradient: False
flip_gradient: False
polarizations_focal_plane_map: [['x', 'y'], ['x', 'y'], ['x', 'y'], ['x', 'y']]
weight_focal_plane_map_performance_weighting: [1.0, 1.0, 1.0, 1.0]
weight_focal_plane_map: [1.0, 1.0, 1.0, 1.0]
do_green_balance: False
polarization_name_to_idx: {'x': 0, 'y': 1, 'z': 2}
desired_peaks_per_band_um: [0.45, 0.54, 0.65]
explicit_band_centering: True
shuffle_green: False
infrared_center_um: 0.94
do_rejection: False
softplus_kappa: 2
evaluate_bordered_extended: False
do_normalize: False
should_fix_layers: True
fixed_layers: [1, 3]
fixed_layers_density: 0
mpi_exe: /central/software/mpich/4.0.0/bin/mpirun
solver_exe: /central/home/tmcnicho/lumerical/v232/bin/fdtd-engine-mpich2nem
nprocs: 8
optimizer: AdamOptimizer
optimizer_settings: {'step_size': 0.01, 'betas': [0.9, 0.99], 'eps': '1e-9', 'moments': [0.0, 0.0]}
figures_of_merit: {'fom_0': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_0']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_0x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2], 'weight': 1.0}}


#
# Derived Properties
#

#* Mesh Properties

min_feature_size_voxels: 1.0
blur_half_width_voxels: 0

#* Optical Properties
min_device_permittivity: 2.25
max_device_permittivity: 5.76
focal_length_um: 1.5299999999999998
focal_plane_center_vertical_um: -1.5299999999999998

#* Device Properties
vertical_layer_height_voxels: 8
device_size_vertical_um: 2.04
device_voxels_lateral: 24
device_voxels_vertical: 40
device_voxels_simulation_mesh_lateral: 41
device_voxels_simulation_mesh_vertical: 42
device_vertical_maximum_um: 2.04
device_size_lateral_bordered_um: 2.04
device_voxels_simulation_mesh_lateral_bordered: 41
border_size_um: 0.255
border_size_voxels: 3
device_voxels_lateral_bordered: 24

#* FDTD Properties

vertical_gap_size_um: 1.2750000000000001
lateral_gap_size_um: 0.51
fdtd_region_size_vertical_um: 6.119999999999999
fdtd_region_size_lateral_um: 3.06
fdtd_region_maximum_vertical_um: 3.3150000000000004
fdtd_region_minimum_vertical_um: -2.8049999999999997

#* Surrounding Properties
pec_aperture_thickness_um: 0.153
sidewall_x_positions_um: [1.0625, 0, -1.0625, 0]
sidewall_y_positions_um: [0, 1.0625, 0, -1.0625]
sidewall_xspan_positions_um: [0.085, 2.21, 0.085, 2.21]
sidewall_yspan_positions_um: [2.21, 0.085, 2.21, 0.085]

#* Spectral Properties
bandwidth_um: 0.3
num_design_frequency_points: 30
num_eval_frequency_points: 180
lambda_values_um: [0.45, 0.46034482758620693, 0.4706896551724138, 0.4810344827586207, 0.4913793103448276, 0.5017241379310345, 0.5120689655172413, 0.5224137931034483, 0.5327586206896552, 0.5431034482758621, 0.553448275862069, 0.5637931034482759, 0.5741379310344827, 0.5844827586206897, 0.5948275862068966, 0.6051724137931035, 0.6155172413793104, 0.6258620689655172, 0.6362068965517241, 0.646551724137931, 0.656896551724138, 0.6672413793103449, 0.6775862068965517, 0.6879310344827586, 0.6982758620689655, 0.7086206896551724, 0.7189655172413794, 0.7293103448275862, 0.7396551724137932, 0.75]
max_intensity_by_wavelength: [36.53530864197531, 34.91172214507147, 33.39400448147702, 31.973147313112626, 30.641080455524776, 29.39055703168361, 28.215054699633836, 27.108690433399783, 26.066146772656342, 25.082607810531623, 24.153703477256624, 23.275460913316312, 22.44426191957724, 21.65680563169482, 20.910075698382695, 20.201311352992263, 19.527981859410428, 18.887763889837522, 18.278521456217273, 17.698288071111115, 17.145250859390607, 16.617736380692932, 16.114197955312115, 15.633204314043255, 15.173429416247526, 14.733643300714537, 14.312703851307443, 13.90954937433284, 13.52319189745763, 13.152711111111115]
dispersive_range_size_um: 0.3
dispersive_ranges_um: [[0.45, 0.75]]

#* PDAF Functionality Properties
pdaf_focal_spot_x_um: 0.51
pdaf_focal_spot_y_um: 0.51
pdaf_lambda_min_um: 0.45
pdaf_lambda_max_um: 0.55
pdaf_lambda_values_um: [0.45, 0.453448275862069, 0.45689655172413796, 0.46034482758620693, 0.4637931034482759, 0.4672413793103448, 0.4706896551724138, 0.47413793103448276, 0.47758620689655173, 0.4810344827586207, 0.4844827586206897, 0.48793103448275865, 0.4913793103448276, 0.4948275862068966, 0.49827586206896557, 0.5017241379310345, 0.5051724137931035, 0.5086206896551725, 0.5120689655172415, 0.5155172413793103, 0.5189655172413794, 0.5224137931034483, 0.5258620689655172, 0.5293103448275862, 0.5327586206896552, 0.5362068965517242, 0.5396551724137931, 0.5431034482758621, 0.5465517241379311, 0.55]
pdaf_max_intensity_by_wavelength: [36.53530864197531, 35.98175136260464, 35.440680099679604, 34.91172214507147, 34.394518594270394, 33.88872373742188, 33.39400448147702, 32.9100398016529, 32.436520220516364, 31.973147313112626, 31.519633236661136, 31.075700283434678, 30.641080455524776, 30.21551506027753, 29.798754325259512, 29.39055703168361, 28.990690165290218, 28.598928583740303, 28.215054699633825, 27.838858178320162, 27.470135649716887, 27.108690433399783, 26.754332276269828, 26.40687710214432, 26.066146772656342, 25.73196885888277, 25.404176423154265, 25.082607810531623, 24.767106449462133, 24.457520661157027]

#* Forward (Input) Source Properties
lateral_aperture_um: 2.244
src_maximum_vertical_um: 2.89
src_minimum_vertical_um: -2.1675
mid_lambda_um: 0.6
gaussian_waist_radius_um: 1
source_angle_theta_rad: 0.0
source_angle_theta_deg: 0.0

#* Adjoint Source Properties
adjoint_vertical_um: -1.5299999999999998
num_adjoint_sources: 2
adjoint_x_positions_um: [0.51, -0.51, -0.51, 0.51]
adjoint_y_positions_um: [0.51, 0.51, -0.51, -0.51]

#* Optimzation Properties
epoch_range_design_change_max: 0.09999999999999999
epoch_range_design_change_min: 0.05
spectral_focal_plane_map: [[0, 15], [15, 30], [30, 45], [15, 30]]
desired_peak_location_per_band: [0, 9, 19]
2024-02-23 15:26:31,755 - template_logger - INFO - Successfully saved output to runs\test_run\processed_config.yml
2024-02-23 15:26:37,128 - template_logger - INFO - Rendered Output:
{ 
    "info": {
        "name": "optimization",
        "path": "",
        "simulator_name": "LumericalFDTD",
        "coordinates": {}
    },

    "objects": {
        "FDTD": {
            
            "name": "FDTD",
            "obj_type": "fdtd",
            "properties": {
                "dimension": "2D",
                "x span": 3.06e-06,
                "y max": 3.3150000000000004e-06,
                "y min": -2.8049999999999994e-06,
                
                "simulation time": 6.000000000000001e-13,
                "index": 1.5
            }
        },
        "forward_src_x": {
            "name": "forward_src_x",
            "obj_type": "gaussian",
            "attached monitor": 0,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 0,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
        "forward_src_y": {
            "name": "forward_src_y",
            "obj_type": "gaussian",
            "attached monitor": 1,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 90,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
            "adj_src_0x": {
                "name": "adj_src_0x",
                "obj_type": "dipole","properties": {
                    "x": 5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_0y": {
                "name": "adj_src_0y",
                "obj_type": "dipole","properties": {
                    "x": 5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 0,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_1x": {
                "name": "adj_src_1x",
                "obj_type": "dipole","properties": {
                    "x": -5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_1y": {
                "name": "adj_src_1y",
                "obj_type": "dipole","properties": {
                    "x": -5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 0,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
        "focal_monitor_0": {
            "name": "focal_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": 5.1e-07,
                "y": -1.5299999999999998e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "focal_monitor_1": {
            "name": "focal_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": -5.1e-07,
                "y": -1.5299999999999998e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_0": {
            "name": "transmission_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": 5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_1": {
            "name": "transmission_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": -5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },

        "transmission_focal_monitor_": {
            "name": "transmission_focal_monitor_",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": 0,
                "x span": 2.04e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "PEC_screen": {
            "name": "PEC_screen",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 3.5904e-06,
                "y min": 2.193e-06,
                "y max": 2.346e-06,
                
                "material": "PEC (Perfect Electrical Conductor)"
            }
        },
        "source_aperture": {
            "name": "source_aperture",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 2.04e-06,
                "y min": 2.193e-06,
                "y max": 2.346e-06,
                
                "index": 1.5
            }
        },
        "design_import": {
            "name": "design_import",
            "obj_type": "import",
            "properties": {
                "x span": 2.04e-06,
                "y span": 2.04e-06,
                "z min": 0.0,
                "z max": 2.04e-06
            }
        },
        "design_mesh": {
            "name": "design_mesh",
            "obj_type": "mesh",
            "properties": {
                "x": 0,
                "x span": 3.06e-06,
                "y": 0,
                "y span": 3.06e-06,
                "z min": -5e-07,
                "z max": 2.54e-06,
                "dx": 5.0999999999999993e-08,
                "dy": 5.0999999999999993e-08,
                "dz": 5.0999999999999993e-08
            }
        },
        "design_index_monitor": {
            "name": "design_index_monitor",
            "obj_type": "index",
            "properties": {
                "monitor type": "3D",
                "x span": 2.04e-06,
                "y span": 2.04e-06,
                "z min": 0.0,
                "z max": 2.04e-06,
                "spatial interpolation": "nearest mesh cell"
            }
        },
        "design_efield_monitor": {
            "name": "design_efield_monitor",
            "obj_type": "profile",
            "properties": {
                "monitor type": "3D",
                "x span": 2.04e-06,
                "y span": 2.04e-06,
                "z min": 0.0,
                "z max": 2.04e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "frequency points": 30,
                "output Hx": 0,
                "output Hy": 0,
                "output Hz": 0
            }
        }
    }
}
2024-02-23 15:26:37,133 - template_logger - INFO - Successfully saved output to runs\test_run\sim.json
2024-02-23 15:37:00,122 - template_logger - INFO - Rendered Output:
{ 
    "info": {
        "name": "optimization",
        "path": "",
        "simulator_name": "LumericalFDTD",
        "coordinates": {}
    },

    "objects": {
        "FDTD": {
            
            "name": "FDTD",
            "obj_type": "fdtd",
            "properties": {
                "dimension": "2D",
                "x span": 3.06e-06,
                "y max": 3.3150000000000004e-06,
                "y min": -2.8049999999999994e-06,
                
                "simulation time": 6.000000000000001e-13,
                "index": 1.5
            }
        },
        "forward_src_x": {
            "name": "forward_src_x",
            "obj_type": "gaussian",
            "attached monitor": 0,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 0,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
        "forward_src_y": {
            "name": "forward_src_y",
            "obj_type": "gaussian",
            "attached monitor": 1,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 90,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
            "adj_src_0x": {
                "name": "adj_src_0x",
                "obj_type": "dipole",
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_0y": {
                "name": "adj_src_0y",
                "obj_type": "dipole",
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 0,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_1x": {
                "name": "adj_src_1x",
                "obj_type": "dipole",
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_1y": {
                "name": "adj_src_1y",
                "obj_type": "dipole",
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 0,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
        "focal_monitor_0": {
            "name": "focal_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": 5.1e-07,
                "y": -1.5299999999999998e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "focal_monitor_1": {
            "name": "focal_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": -5.1e-07,
                "y": -1.5299999999999998e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_0": {
            "name": "transmission_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": 5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_1": {
            "name": "transmission_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": -5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },

        "transmission_focal_monitor_": {
            "name": "transmission_focal_monitor_",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": 0,
                "x span": 2.04e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "PEC_screen": {
            "name": "PEC_screen",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 3.5904e-06,
                "y min": 2.193e-06,
                "y max": 2.346e-06,
                
                "material": "PEC (Perfect Electrical Conductor)"
            }
        },
        "source_aperture": {
            "name": "source_aperture",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 2.04e-06,
                "y min": 2.193e-06,
                "y max": 2.346e-06,
                
                "index": 1.5
            }
        },
        "design_import": {
            "name": "design_import",
            "obj_type": "import",
            "dev_id": 0,                
            "properties": {
                "x span": 2.04e-06,
                "y min": 0.0,
                "y max": 2.04e-06
                
            }
        },
        "design_mesh": {
            "name": "design_mesh",
            "obj_type": "mesh",
            "dev_id": 0,
            "properties": {
                "x": 0,
                "x span": 3.06e-06,
                "y min": -5e-07,
                "y max": 2.54e-06,
                
                "dx": 5.0999999999999993e-08,
                "dy": 5.0999999999999993e-08,
                "dz": 5.0999999999999993e-08
            }
        },
        "design_index_monitor": {
            "name": "design_index_monitor",
            "obj_type": "index",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "2D Z-Normal",
                "y min": 0.0,
                "y max": 2.04e-06,
                
                "spatial interpolation": "nearest mesh cell"
            }
        },
        "design_efield_monitor": {
            "name": "design_efield_monitor",
            "obj_type": "profile",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "2D Z-Normal",
                "y min": 0.0,
                "y max": 2.04e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "frequency points": 30,
                "output Hx": 0,
                "output Hy": 0,
                "output Hz": 0
            }
        }
    }
}
2024-02-23 15:37:00,138 - template_logger - INFO - Successfully saved output to runs\test_run\sim.json
2024-02-24 14:20:54,314 - template_logger - INFO - Rendered Output:
#* Original Properties

start_from_step: 0
shelf_fn: save_state
restart_epoch: 0
restart_iter: 0
lumapi_filepath_local: C:\Program Files\Lumerical\v212\api\python\lumapi.py
lumapi_filepath_hpc: /central/home/ifoo/lumerical/2021a_r22/api/python/lumapi.py
simulator_name: LumericalFDTD
simulator_dimension: 2D
simulator_max_wait_time: 3600
use_autograd: False
convert_existing: False
mesh_spacing_um: 0.051
geometry_spacing_lateral_um: 0.085
device_scale_um: 0.051
use_smooth_blur: False
min_feature_size_um: 0.085
background_index: 1.5
min_device_index: 1.5
max_device_index: 2.4
init_permittivity_0_1_scale: 0.5
binarize_3_levels: False
focal_plane_center_lateral_um: 0
num_vertical_layers: 5
vertical_layer_height_um: 0.408
device_size_lateral_um: 2.04
device_vertical_minimum_um: 0
objects_above_device: []
num_sidewalls: 0
sidewall_material: etch
sidewall_extend_pml: False
sidewall_extend_focalplane: True
sidewall_thickness_um: 0.085
sidewall_vertical_minimum_um: -0.765
add_infrared: False
lambda_min_um: 0.45
lambda_max_um: 0.75
lambda_min_eval_um: 0.45
lambda_max_eval_um: 0.75
num_bands: 2
num_points_per_band: 15
num_dispersive_ranges: 1
add_pdaf: False
pdaf_angle_phi_degrees: 45
pdaf_angle_theta_degrees: -8
pdaf_adj_src_idx: 0
fdtd_simulation_time_fs: 600
weight_by_individual_wavelength: True
use_gaussian_sources: True
use_airy_approximation: True
f_number: 2.2
airy_correction_factor: 0.84
beam_size_multiplier: 1
source_angle_theta_vacuum_deg: 0
source_angle_phi_deg: 0
xy_phi_rotations: [0, 90]
xy_adjtheta_rotations: [90, 0]
xy_pol_rotations: [0, 90]
xy_names: ['x', 'y']
use_source_aperture: True
num_focal_spots: 2
dispersive_range_to_adjoint_src_map: [[0, 1, 2, 3]]
adjoint_src_to_dispersive_range_map: [0, 0, 0, 0]
enforce_xy_gradient_symmetry: False
weight_by_quadrant_transmission: True
num_epochs: 10
num_iterations_per_epoch: 30
total_num_iterations: 80
epoch_list: [0, 16, 32, 48, 64, 80]
optimizer_algorithm: ADAM
adam_betas: (0.9, 0.999)
use_fixed_step_size: True
fixed_step_size: 0.01
epoch_start_design_change_max: 0.15
epoch_end_design_change_max: 0.05
epoch_start_design_change_min: 0.05
epoch_end_design_change_min: 0
fom_types: ['transmission', 'intensity']
optimization_fom: intensity
reinterpolate_permittivity: True
reinterpolate_permittivity_factor: 2
reinterpolate_type: nearest
border_optimization: False
layer_gradient: False
flip_gradient: False
polarizations_focal_plane_map: [['x', 'y'], ['x', 'y'], ['x', 'y'], ['x', 'y']]
weight_focal_plane_map_performance_weighting: [1.0, 1.0, 1.0, 1.0]
weight_focal_plane_map: [1.0, 1.0, 1.0, 1.0]
do_green_balance: False
polarization_name_to_idx: {'x': 0, 'y': 1, 'z': 2}
desired_peaks_per_band_um: [0.45, 0.54, 0.65]
explicit_band_centering: True
shuffle_green: False
infrared_center_um: 0.94
do_rejection: False
softplus_kappa: 2
evaluate_bordered_extended: False
do_normalize: False
should_fix_layers: True
fixed_layers: [1, 3]
fixed_layers_density: 0
mpi_exe: /central/software/mpich/4.0.0/bin/mpirun
solver_exe: /central/home/tmcnicho/lumerical/v232/bin/fdtd-engine-mpich2nem
nprocs: 8
optimizer: AdamOptimizer
optimizer_settings: {'step_size': 0.01, 'betas': [0.9, 0.99], 'eps': '1e-9', 'moments': [0.0, 0.0]}
fom_dict: [{'fwd': [0], 'adj': [0], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}, {'fwd': [0], 'adj': [2], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}]
figures_of_merit: {'fom_0': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_0']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_0x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2], 'weight': 1.0}}


#
# Derived Properties
#

#* Mesh Properties

min_feature_size_voxels: 1.0
blur_half_width_voxels: 0

#* Optical Properties
min_device_permittivity: 2.25
max_device_permittivity: 5.76
focal_length_um: 1.5299999999999998
focal_plane_center_vertical_um: -1.5299999999999998

#* Device Properties
vertical_layer_height_voxels: 8
device_size_vertical_um: 2.04
device_voxels_lateral: 24
device_voxels_vertical: 40
device_voxels_simulation_mesh_lateral: 41
device_voxels_simulation_mesh_vertical: 42
device_vertical_maximum_um: 2.04
device_size_lateral_bordered_um: 2.04
device_voxels_simulation_mesh_lateral_bordered: 41
border_size_um: 0.255
border_size_voxels: 3
device_voxels_lateral_bordered: 24

#* FDTD Properties

vertical_gap_size_um: 1.2750000000000001
lateral_gap_size_um: 0.51
fdtd_region_size_vertical_um: 6.119999999999999
fdtd_region_size_lateral_um: 3.06
fdtd_region_maximum_vertical_um: 3.3150000000000004
fdtd_region_minimum_vertical_um: -2.8049999999999997

#* Surrounding Properties
pec_aperture_thickness_um: 0.153
sidewall_x_positions_um: [1.0625, 0, -1.0625, 0]
sidewall_y_positions_um: [0, 1.0625, 0, -1.0625]
sidewall_xspan_positions_um: [0.085, 2.21, 0.085, 2.21]
sidewall_yspan_positions_um: [2.21, 0.085, 2.21, 0.085]

#* Spectral Properties
bandwidth_um: 0.3
num_design_frequency_points: 30
num_eval_frequency_points: 180
lambda_values_um: [0.45, 0.46034482758620693, 0.4706896551724138, 0.4810344827586207, 0.4913793103448276, 0.5017241379310345, 0.5120689655172413, 0.5224137931034483, 0.5327586206896552, 0.5431034482758621, 0.553448275862069, 0.5637931034482759, 0.5741379310344827, 0.5844827586206897, 0.5948275862068966, 0.6051724137931035, 0.6155172413793104, 0.6258620689655172, 0.6362068965517241, 0.646551724137931, 0.656896551724138, 0.6672413793103449, 0.6775862068965517, 0.6879310344827586, 0.6982758620689655, 0.7086206896551724, 0.7189655172413794, 0.7293103448275862, 0.7396551724137932, 0.75]
max_intensity_by_wavelength: [36.53530864197531, 34.91172214507147, 33.39400448147702, 31.973147313112626, 30.641080455524776, 29.39055703168361, 28.215054699633836, 27.108690433399783, 26.066146772656342, 25.082607810531623, 24.153703477256624, 23.275460913316312, 22.44426191957724, 21.65680563169482, 20.910075698382695, 20.201311352992263, 19.527981859410428, 18.887763889837522, 18.278521456217273, 17.698288071111115, 17.145250859390607, 16.617736380692932, 16.114197955312115, 15.633204314043255, 15.173429416247526, 14.733643300714537, 14.312703851307443, 13.90954937433284, 13.52319189745763, 13.152711111111115]
dispersive_range_size_um: 0.3
dispersive_ranges_um: [[0.45, 0.75]]

#* PDAF Functionality Properties
pdaf_focal_spot_x_um: 0.51
pdaf_focal_spot_y_um: 0.51
pdaf_lambda_min_um: 0.45
pdaf_lambda_max_um: 0.55
pdaf_lambda_values_um: [0.45, 0.453448275862069, 0.45689655172413796, 0.46034482758620693, 0.4637931034482759, 0.4672413793103448, 0.4706896551724138, 0.47413793103448276, 0.47758620689655173, 0.4810344827586207, 0.4844827586206897, 0.48793103448275865, 0.4913793103448276, 0.4948275862068966, 0.49827586206896557, 0.5017241379310345, 0.5051724137931035, 0.5086206896551725, 0.5120689655172415, 0.5155172413793103, 0.5189655172413794, 0.5224137931034483, 0.5258620689655172, 0.5293103448275862, 0.5327586206896552, 0.5362068965517242, 0.5396551724137931, 0.5431034482758621, 0.5465517241379311, 0.55]
pdaf_max_intensity_by_wavelength: [36.53530864197531, 35.98175136260464, 35.440680099679604, 34.91172214507147, 34.394518594270394, 33.88872373742188, 33.39400448147702, 32.9100398016529, 32.436520220516364, 31.973147313112626, 31.519633236661136, 31.075700283434678, 30.641080455524776, 30.21551506027753, 29.798754325259512, 29.39055703168361, 28.990690165290218, 28.598928583740303, 28.215054699633825, 27.838858178320162, 27.470135649716887, 27.108690433399783, 26.754332276269828, 26.40687710214432, 26.066146772656342, 25.73196885888277, 25.404176423154265, 25.082607810531623, 24.767106449462133, 24.457520661157027]

#* Forward (Input) Source Properties
lateral_aperture_um: 2.244
src_maximum_vertical_um: 2.89
src_minimum_vertical_um: -2.1675
mid_lambda_um: 0.6
gaussian_waist_radius_um: 1
source_angle_theta_rad: 0.0
source_angle_theta_deg: 0.0

#* Adjoint Source Properties
adjoint_vertical_um: -1.5299999999999998
num_adjoint_sources: 2
adjoint_x_positions_um: [0.51, -0.51, -0.51, 0.51]
adjoint_y_positions_um: [0.51, 0.51, -0.51, -0.51]

#* Optimzation Properties
epoch_range_design_change_max: 0.09999999999999999
epoch_range_design_change_min: 0.05
spectral_focal_plane_map: [[0, 15], [15, 30], [30, 45], [15, 30]]
desired_peak_location_per_band: [0, 9, 19]
2024-02-24 14:20:54,329 - template_logger - INFO - Successfully saved output to runs\test_run\processed_config.yml
2024-02-24 14:21:05,463 - template_logger - INFO - Rendered Output:
{ 
    "info": {
        "name": "optimization",
        "path": "",
        "simulator_name": "LumericalFDTD",
        "coordinates": {}
    },

    "objects": {
        "FDTD": {
            
            "name": "FDTD",
            "obj_type": "fdtd",
            "properties": {
                "dimension": "2D",
                "x span": 3.06e-06,
                "y max": 3.3150000000000004e-06,
                "y min": -2.8049999999999994e-06,
                
                "simulation time": 6.000000000000001e-13,
                "index": 1.5
            }
        },
        "forward_src_x": {
            "name": "forward_src_x",
            "obj_type": "gaussian",
            "attached_monitor": 0,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 0,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
        "forward_src_y": {
            "name": "forward_src_y",
            "obj_type": "gaussian",
            "attached_monitor": 1,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 90,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
            "adj_src_0x": {
                "name": "adj_src_0x",
                "obj_type": "dipole",
                "attached_monitor": 0
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_0y": {
                "name": "adj_src_0y",
                "obj_type": "dipole",
                "attached_monitor": 0
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 0,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_1x": {
                "name": "adj_src_1x",
                "obj_type": "dipole",
                "attached_monitor": 1
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_1y": {
                "name": "adj_src_1y",
                "obj_type": "dipole",
                "attached_monitor": 1
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 0,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
        "focal_monitor_0": {
            "name": "focal_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": 5.1e-07,
                "y": -1.5299999999999998e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "focal_monitor_1": {
            "name": "focal_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": -5.1e-07,
                "y": -1.5299999999999998e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_0": {
            "name": "transmission_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": 5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_1": {
            "name": "transmission_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": -5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },

        "transmission_focal_monitor_": {
            "name": "transmission_focal_monitor_",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": 0,
                "x span": 2.04e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "PEC_screen": {
            "name": "PEC_screen",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 3.5904e-06,
                "y min": 2.193e-06,
                "y max": 2.346e-06,
                
                "material": "PEC (Perfect Electrical Conductor)"
            }
        },
        "source_aperture": {
            "name": "source_aperture",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 2.04e-06,
                "y min": 2.193e-06,
                "y max": 2.346e-06,
                
                "index": 1.5
            }
        },
        "design_import": {
            "name": "design_import",
            "obj_type": "import",
            "dev_id": 0,                
            "properties": {
                "x span": 2.04e-06,
                "y min": 0.0,
                "y max": 2.04e-06
                
            }
        },
        "design_mesh": {
            "name": "design_mesh",
            "obj_type": "mesh",
            "dev_id": 0,
            "properties": {
                "x": 0,
                "x span": 3.06e-06,
                "y min": -5e-07,
                "y max": 2.54e-06,
                
                "dx": 5.0999999999999993e-08,
                "dy": 5.0999999999999993e-08,
                "dz": 5.0999999999999993e-08
            }
        },
        "design_index_monitor": {
            "name": "design_index_monitor",
            "obj_type": "index",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "2D Z-Normal",
                "y min": 0.0,
                "y max": 2.04e-06,
                
                "spatial interpolation": "nearest mesh cell"
            }
        },
        "design_efield_monitor": {
            "name": "design_efield_monitor",
            "obj_type": "profile",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "2D Z-Normal",
                "y min": 0.0,
                "y max": 2.04e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "frequency points": 30,
                "output Hx": 0,
                "output Hy": 0,
                "output Hz": 0
            }
        }
    }
}
2024-02-24 14:21:05,470 - template_logger - INFO - Successfully saved output to runs\test_run\sim.json
2024-02-24 14:22:18,375 - template_logger - INFO - Rendered Output:
{ 
    "info": {
        "name": "optimization",
        "path": "",
        "simulator_name": "LumericalFDTD",
        "coordinates": {}
    },

    "objects": {
        "FDTD": {
            
            "name": "FDTD",
            "obj_type": "fdtd",
            "properties": {
                "dimension": "2D",
                "x span": 3.06e-06,
                "y max": 3.3150000000000004e-06,
                "y min": -2.8049999999999994e-06,
                
                "simulation time": 6.000000000000001e-13,
                "index": 1.5
            }
        },
        "forward_src_x": {
            "name": "forward_src_x",
            "obj_type": "gaussian",
            "attached_monitor": 0,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 0,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
        "forward_src_y": {
            "name": "forward_src_y",
            "obj_type": "gaussian",
            "attached_monitor": 1,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 90,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
            "adj_src_0x": {
                "name": "adj_src_0x",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_0y": {
                "name": "adj_src_0y",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 0,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_1x": {
                "name": "adj_src_1x",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_1y": {
                "name": "adj_src_1y",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 0,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
        "focal_monitor_0": {
            "name": "focal_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": 5.1e-07,
                "y": -1.5299999999999998e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "focal_monitor_1": {
            "name": "focal_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": -5.1e-07,
                "y": -1.5299999999999998e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_0": {
            "name": "transmission_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": 5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_1": {
            "name": "transmission_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": -5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },

        "transmission_focal_monitor_": {
            "name": "transmission_focal_monitor_",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": 0,
                "x span": 2.04e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "PEC_screen": {
            "name": "PEC_screen",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 3.5904e-06,
                "y min": 2.193e-06,
                "y max": 2.346e-06,
                
                "material": "PEC (Perfect Electrical Conductor)"
            }
        },
        "source_aperture": {
            "name": "source_aperture",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 2.04e-06,
                "y min": 2.193e-06,
                "y max": 2.346e-06,
                
                "index": 1.5
            }
        },
        "design_import": {
            "name": "design_import",
            "obj_type": "import",
            "dev_id": 0,                
            "properties": {
                "x span": 2.04e-06,
                "y min": 0.0,
                "y max": 2.04e-06
                
            }
        },
        "design_mesh": {
            "name": "design_mesh",
            "obj_type": "mesh",
            "dev_id": 0,
            "properties": {
                "x": 0,
                "x span": 3.06e-06,
                "y min": -5e-07,
                "y max": 2.54e-06,
                
                "dx": 5.0999999999999993e-08,
                "dy": 5.0999999999999993e-08,
                "dz": 5.0999999999999993e-08
            }
        },
        "design_index_monitor": {
            "name": "design_index_monitor",
            "obj_type": "index",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "2D Z-Normal",
                "y min": 0.0,
                "y max": 2.04e-06,
                
                "spatial interpolation": "nearest mesh cell"
            }
        },
        "design_efield_monitor": {
            "name": "design_efield_monitor",
            "obj_type": "profile",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "2D Z-Normal",
                "y min": 0.0,
                "y max": 2.04e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "frequency points": 30,
                "output Hx": 0,
                "output Hy": 0,
                "output Hz": 0
            }
        }
    }
}
2024-02-24 14:22:18,383 - template_logger - INFO - Successfully saved output to runs\test_run\sim.json
2024-02-24 16:43:11,937 - template_logger - INFO - Rendered Output:
#* Original Properties

start_from_step: 0
shelf_fn: save_state
restart_epoch: 0
restart_iter: 0
lumapi_filepath_local: C:\Program Files\Lumerical\v212\api\python\lumapi.py
lumapi_filepath_hpc: /central/home/ifoo/lumerical/2021a_r22/api/python/lumapi.py
simulator_name: LumericalFDTD
simulator_dimension: 2D
simulator_max_wait_time: 3600
use_autograd: False
convert_existing: False
mesh_spacing_um: 0.051
geometry_spacing_lateral_um: 0.085
device_scale_um: 0.051
use_smooth_blur: False
min_feature_size_um: 0.085
background_index: 1.5
min_device_index: 1.5
max_device_index: 2.4
init_permittivity_0_1_scale: 0.5
binarize_3_levels: False
focal_plane_center_lateral_um: 0
num_vertical_layers: 5
vertical_layer_height_um: 0.408
device_size_lateral_um: 2.04
device_vertical_minimum_um: 0
objects_above_device: []
num_sidewalls: 0
sidewall_material: etch
sidewall_extend_pml: False
sidewall_extend_focalplane: True
sidewall_thickness_um: 0.085
sidewall_vertical_minimum_um: -0.765
add_infrared: False
lambda_min_um: 0.45
lambda_max_um: 0.75
lambda_min_eval_um: 0.45
lambda_max_eval_um: 0.75
num_bands: 2
num_points_per_band: 15
num_dispersive_ranges: 1
add_pdaf: False
pdaf_angle_phi_degrees: 45
pdaf_angle_theta_degrees: -8
pdaf_adj_src_idx: 0
fdtd_simulation_time_fs: 600
weight_by_individual_wavelength: True
use_gaussian_sources: True
use_airy_approximation: True
f_number: 2.2
airy_correction_factor: 0.84
beam_size_multiplier: 1
source_angle_theta_vacuum_deg: 0
source_angle_phi_deg: 0
xy_phi_rotations: [0, 90]
xy_adjtheta_rotations: [90, 0]
xy_pol_rotations: [0, 90]
xy_names: ['x', 'y']
use_source_aperture: True
num_focal_spots: 2
dispersive_range_to_adjoint_src_map: [[0, 1, 2, 3]]
adjoint_src_to_dispersive_range_map: [0, 0, 0, 0]
enforce_xy_gradient_symmetry: False
weight_by_quadrant_transmission: True
num_epochs: 10
num_iterations_per_epoch: 30
total_num_iterations: 80
epoch_list: [0, 16, 32, 48, 64, 80]
optimizer_algorithm: ADAM
adam_betas: (0.9, 0.999)
use_fixed_step_size: True
fixed_step_size: 0.01
epoch_start_design_change_max: 0.15
epoch_end_design_change_max: 0.05
epoch_start_design_change_min: 0.05
epoch_end_design_change_min: 0
fom_types: ['transmission', 'intensity']
optimization_fom: intensity
reinterpolate_permittivity: True
reinterpolate_permittivity_factor: 2
reinterpolate_type: nearest
border_optimization: False
layer_gradient: False
flip_gradient: False
polarizations_focal_plane_map: [['x', 'y'], ['x', 'y'], ['x', 'y'], ['x', 'y']]
weight_focal_plane_map_performance_weighting: [1.0, 1.0, 1.0, 1.0]
weight_focal_plane_map: [1.0, 1.0, 1.0, 1.0]
do_green_balance: False
polarization_name_to_idx: {'x': 0, 'y': 1, 'z': 2}
desired_peaks_per_band_um: [0.45, 0.54, 0.65]
explicit_band_centering: True
shuffle_green: False
infrared_center_um: 0.94
do_rejection: False
softplus_kappa: 2
evaluate_bordered_extended: False
do_normalize: False
should_fix_layers: True
fixed_layers: [1, 3]
fixed_layers_density: 0
mpi_exe: /central/software/mpich/4.0.0/bin/mpirun
solver_exe: /central/home/tmcnicho/lumerical/v232/bin/fdtd-engine-mpich2nem
nprocs: 8
optimizer: AdamOptimizer
optimizer_settings: {'step_size': 0.01, 'betas': [0.9, 0.99], 'eps': '1e-9', 'moments': [0.0, 0.0]}
fom_dict: [{'fwd': [0], 'adj': [0], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}, {'fwd': [0], 'adj': [2], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}]
figures_of_merit: {'fom_0': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_0']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_0x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2], 'weight': 1.0}, 'fom_1': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_y', 'focal_monitor_0']], 'grad_monitors': [['forward_src_y', 'design_efield_monitor'], ['adj_src_0y', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2], 'weight': 1.0}}


#
# Derived Properties
#

#* Mesh Properties

min_feature_size_voxels: 1.0
blur_half_width_voxels: 0

#* Optical Properties
min_device_permittivity: 2.25
max_device_permittivity: 5.76
focal_length_um: 1.5299999999999998
focal_plane_center_vertical_um: -1.5299999999999998

#* Device Properties
vertical_layer_height_voxels: 8
device_size_vertical_um: 2.04
device_voxels_lateral: 24
device_voxels_vertical: 40
device_voxels_simulation_mesh_lateral: 41
device_voxels_simulation_mesh_vertical: 42
device_vertical_maximum_um: 2.04
device_size_lateral_bordered_um: 2.04
device_voxels_simulation_mesh_lateral_bordered: 41
border_size_um: 0.255
border_size_voxels: 3
device_voxels_lateral_bordered: 24

#* FDTD Properties

vertical_gap_size_um: 1.2750000000000001
lateral_gap_size_um: 0.51
fdtd_region_size_vertical_um: 6.119999999999999
fdtd_region_size_lateral_um: 3.06
fdtd_region_maximum_vertical_um: 3.3150000000000004
fdtd_region_minimum_vertical_um: -2.8049999999999997

#* Surrounding Properties
pec_aperture_thickness_um: 0.153
sidewall_x_positions_um: [1.0625, 0, -1.0625, 0]
sidewall_y_positions_um: [0, 1.0625, 0, -1.0625]
sidewall_xspan_positions_um: [0.085, 2.21, 0.085, 2.21]
sidewall_yspan_positions_um: [2.21, 0.085, 2.21, 0.085]

#* Spectral Properties
bandwidth_um: 0.3
num_design_frequency_points: 30
num_eval_frequency_points: 180
lambda_values_um: [0.45, 0.46034482758620693, 0.4706896551724138, 0.4810344827586207, 0.4913793103448276, 0.5017241379310345, 0.5120689655172413, 0.5224137931034483, 0.5327586206896552, 0.5431034482758621, 0.553448275862069, 0.5637931034482759, 0.5741379310344827, 0.5844827586206897, 0.5948275862068966, 0.6051724137931035, 0.6155172413793104, 0.6258620689655172, 0.6362068965517241, 0.646551724137931, 0.656896551724138, 0.6672413793103449, 0.6775862068965517, 0.6879310344827586, 0.6982758620689655, 0.7086206896551724, 0.7189655172413794, 0.7293103448275862, 0.7396551724137932, 0.75]
max_intensity_by_wavelength: [36.53530864197531, 34.91172214507147, 33.39400448147702, 31.973147313112626, 30.641080455524776, 29.39055703168361, 28.215054699633836, 27.108690433399783, 26.066146772656342, 25.082607810531623, 24.153703477256624, 23.275460913316312, 22.44426191957724, 21.65680563169482, 20.910075698382695, 20.201311352992263, 19.527981859410428, 18.887763889837522, 18.278521456217273, 17.698288071111115, 17.145250859390607, 16.617736380692932, 16.114197955312115, 15.633204314043255, 15.173429416247526, 14.733643300714537, 14.312703851307443, 13.90954937433284, 13.52319189745763, 13.152711111111115]
dispersive_range_size_um: 0.3
dispersive_ranges_um: [[0.45, 0.75]]

#* PDAF Functionality Properties
pdaf_focal_spot_x_um: 0.51
pdaf_focal_spot_y_um: 0.51
pdaf_lambda_min_um: 0.45
pdaf_lambda_max_um: 0.55
pdaf_lambda_values_um: [0.45, 0.453448275862069, 0.45689655172413796, 0.46034482758620693, 0.4637931034482759, 0.4672413793103448, 0.4706896551724138, 0.47413793103448276, 0.47758620689655173, 0.4810344827586207, 0.4844827586206897, 0.48793103448275865, 0.4913793103448276, 0.4948275862068966, 0.49827586206896557, 0.5017241379310345, 0.5051724137931035, 0.5086206896551725, 0.5120689655172415, 0.5155172413793103, 0.5189655172413794, 0.5224137931034483, 0.5258620689655172, 0.5293103448275862, 0.5327586206896552, 0.5362068965517242, 0.5396551724137931, 0.5431034482758621, 0.5465517241379311, 0.55]
pdaf_max_intensity_by_wavelength: [36.53530864197531, 35.98175136260464, 35.440680099679604, 34.91172214507147, 34.394518594270394, 33.88872373742188, 33.39400448147702, 32.9100398016529, 32.436520220516364, 31.973147313112626, 31.519633236661136, 31.075700283434678, 30.641080455524776, 30.21551506027753, 29.798754325259512, 29.39055703168361, 28.990690165290218, 28.598928583740303, 28.215054699633825, 27.838858178320162, 27.470135649716887, 27.108690433399783, 26.754332276269828, 26.40687710214432, 26.066146772656342, 25.73196885888277, 25.404176423154265, 25.082607810531623, 24.767106449462133, 24.457520661157027]

#* Forward (Input) Source Properties
lateral_aperture_um: 2.244
src_maximum_vertical_um: 2.89
src_minimum_vertical_um: -2.1675
mid_lambda_um: 0.6
gaussian_waist_radius_um: 1
source_angle_theta_rad: 0.0
source_angle_theta_deg: 0.0

#* Adjoint Source Properties
adjoint_vertical_um: -1.5299999999999998
num_adjoint_sources: 2
adjoint_x_positions_um: [0.51, -0.51, -0.51, 0.51]
adjoint_y_positions_um: [0.51, 0.51, -0.51, -0.51]

#* Optimzation Properties
epoch_range_design_change_max: 0.09999999999999999
epoch_range_design_change_min: 0.05
spectral_focal_plane_map: [[0, 15], [15, 30], [30, 45], [15, 30]]
desired_peak_location_per_band: [0, 9, 19]
2024-02-24 16:43:11,942 - template_logger - INFO - Successfully saved output to runs\test_run\processed_config.yml
2024-02-24 16:43:18,415 - template_logger - INFO - Rendered Output:
{ 
    "info": {
        "name": "optimization",
        "path": "",
        "simulator_name": "LumericalFDTD",
        "coordinates": {}
    },

    "objects": {
        "FDTD": {
            
            "name": "FDTD",
            "obj_type": "fdtd",
            "properties": {
                "dimension": "2D",
                "x span": 3.06e-06,
                "y max": 3.3150000000000004e-06,
                "y min": -2.8049999999999994e-06,
                
                "simulation time": 6.000000000000001e-13,
                "index": 1.5
            }
        },
        "forward_src_x": {
            "name": "forward_src_x",
            "obj_type": "gaussian",
            "attached_monitor": 0,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 0,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
        "forward_src_y": {
            "name": "forward_src_y",
            "obj_type": "gaussian",
            "attached_monitor": 1,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 90,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
            "adj_src_0x": {
                "name": "adj_src_0x",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_0y": {
                "name": "adj_src_0y",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 0,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_1x": {
                "name": "adj_src_1x",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_1y": {
                "name": "adj_src_1y",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 0,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
        "focal_monitor_0": {
            "name": "focal_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": 5.1e-07,
                "y": -1.5299999999999998e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "focal_monitor_1": {
            "name": "focal_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": -5.1e-07,
                "y": -1.5299999999999998e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_0": {
            "name": "transmission_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": 5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_1": {
            "name": "transmission_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": -5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },

        "transmission_focal_monitor_": {
            "name": "transmission_focal_monitor_",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": 0,
                "x span": 2.04e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "PEC_screen": {
            "name": "PEC_screen",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 3.5904e-06,
                "y min": 2.193e-06,
                "y max": 2.346e-06,
                
                "material": "PEC (Perfect Electrical Conductor)"
            }
        },
        "source_aperture": {
            "name": "source_aperture",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 2.04e-06,
                "y min": 2.193e-06,
                "y max": 2.346e-06,
                
                "index": 1.5
            }
        },
        "design_import": {
            "name": "design_import",
            "obj_type": "import",
            "dev_id": 0,                
            "properties": {
                "x span": 2.04e-06,
                "y min": 0.0,
                "y max": 2.04e-06
                
            }
        },
        "design_mesh": {
            "name": "design_mesh",
            "obj_type": "mesh",
            "dev_id": 0,
            "properties": {
                "x": 0,
                "x span": 3.06e-06,
                "y min": -5e-07,
                "y max": 2.54e-06,
                
                "dx": 5.0999999999999993e-08,
                "dy": 5.0999999999999993e-08,
                "dz": 5.0999999999999993e-08
            }
        },
        "design_index_monitor": {
            "name": "design_index_monitor",
            "obj_type": "index",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "2D Z-Normal",
                "y min": 0.0,
                "y max": 2.04e-06,
                
                "spatial interpolation": "nearest mesh cell"
            }
        },
        "design_efield_monitor": {
            "name": "design_efield_monitor",
            "obj_type": "profile",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "2D Z-Normal",
                "y min": 0.0,
                "y max": 2.04e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "frequency points": 30,
                "output Hx": 0,
                "output Hy": 0,
                "output Hz": 0
            }
        }
    }
}
2024-02-24 16:43:18,427 - template_logger - INFO - Successfully saved output to runs\test_run\sim.json
2024-02-26 21:34:25,905 - template_logger - INFO - Rendered Output:
#* Original Properties

start_from_step: 0
shelf_fn: save_state
restart_epoch: 0
restart_iter: 0
lumapi_filepath_local: C:\Program Files\Lumerical\v212\api\python\lumapi.py
lumapi_filepath_hpc: /central/home/ifoo/lumerical/2021a_r22/api/python/lumapi.py
simulator_name: LumericalFDTD
simulator_dimension: 2D
simulator_max_wait_time: 3600
use_autograd: False
convert_existing: False
mesh_spacing_um: 0.051
geometry_spacing_lateral_um: 0.085
device_scale_um: 0.051
use_smooth_blur: False
min_feature_size_um: 0.085
background_index: 1.5
min_device_index: 1.5
max_device_index: 2.4
init_permittivity_0_1_scale: 0.5
binarize_3_levels: False
focal_plane_center_lateral_um: 0
num_vertical_layers: 5
vertical_layer_height_um: 0.408
device_size_lateral_um: 2.04
device_vertical_minimum_um: 0
objects_above_device: []
num_sidewalls: 0
sidewall_material: etch
sidewall_extend_pml: False
sidewall_extend_focalplane: True
sidewall_thickness_um: 0.085
sidewall_vertical_minimum_um: -0.765
add_infrared: False
lambda_min_um: 0.45
lambda_max_um: 0.75
lambda_min_eval_um: 0.45
lambda_max_eval_um: 0.75
num_bands: 2
num_points_per_band: 15
num_dispersive_ranges: 1
add_pdaf: False
pdaf_angle_phi_degrees: 45
pdaf_angle_theta_degrees: -8
pdaf_adj_src_idx: 0
fdtd_simulation_time_fs: 600
weight_by_individual_wavelength: True
use_gaussian_sources: True
use_airy_approximation: True
f_number: 2.2
airy_correction_factor: 0.84
beam_size_multiplier: 1
source_angle_theta_vacuum_deg: 0
source_angle_phi_deg: 0
xy_phi_rotations: [0, 90]
xy_adjtheta_rotations: [90, 0]
xy_pol_rotations: [0, 90]
xy_names: ['x', 'y']
use_source_aperture: True
num_focal_spots: 2
dispersive_range_to_adjoint_src_map: [[0, 1, 2, 3]]
adjoint_src_to_dispersive_range_map: [0, 0, 0, 0]
enforce_xy_gradient_symmetry: False
weight_by_quadrant_transmission: True
num_epochs: 10
num_iterations_per_epoch: 30
total_num_iterations: 80
epoch_list: [0, 16, 32, 48, 64, 80]
optimizer_algorithm: ADAM
adam_betas: (0.9, 0.999)
use_fixed_step_size: True
fixed_step_size: 0.01
epoch_start_design_change_max: 0.15
epoch_end_design_change_max: 0.05
epoch_start_design_change_min: 0.05
epoch_end_design_change_min: 0
fom_types: ['transmission', 'intensity']
optimization_fom: intensity
reinterpolate_permittivity: True
reinterpolate_permittivity_factor: 2
reinterpolate_type: nearest
border_optimization: False
layer_gradient: False
flip_gradient: False
polarizations_focal_plane_map: [['x', 'y'], ['x', 'y'], ['x', 'y'], ['x', 'y']]
weight_focal_plane_map_performance_weighting: [1.0, 1.0, 1.0, 1.0]
weight_focal_plane_map: [1.0, 1.0, 1.0, 1.0]
do_green_balance: False
polarization_name_to_idx: {'x': 0, 'y': 1, 'z': 2}
desired_peaks_per_band_um: [0.45, 0.54, 0.65]
explicit_band_centering: True
shuffle_green: False
infrared_center_um: 0.94
do_rejection: False
softplus_kappa: 2
evaluate_bordered_extended: False
do_normalize: False
should_fix_layers: True
fixed_layers: [1, 3]
fixed_layers_density: 0
mpi_exe: C:\ProgramData\Miniconda3\envs\def2\Library\bin\mpiexec.exe
solver_exe: C:\Program Files\Lumerical\v241\bin\fdtd-engine-msmpi.exe
nprocs: 8
optimizer: AdamOptimizer
optimizer_settings: {'step_size': 0.01, 'betas': [0.9, 0.99], 'eps': '1e-9', 'moments': [0.0, 0.0]}
fom_dict: [{'fwd': [0], 'adj': [0], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}, {'fwd': [0], 'adj': [2], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}]
figures_of_merit: {'fom_0': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_0']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_0x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2], 'weight': 1.0}, 'fom_1': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_y', 'focal_monitor_0']], 'grad_monitors': [['forward_src_y', 'design_efield_monitor'], ['adj_src_0y', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2], 'weight': 1.0}}


#
# Derived Properties
#

#* Mesh Properties

min_feature_size_voxels: 1.0
blur_half_width_voxels: 0

#* Optical Properties
min_device_permittivity: 2.25
max_device_permittivity: 5.76
focal_length_um: 1.5299999999999998
focal_plane_center_vertical_um: -1.5299999999999998

#* Device Properties
vertical_layer_height_voxels: 8
device_size_vertical_um: 2.04
device_voxels_lateral: 24
device_voxels_vertical: 40
device_voxels_simulation_mesh_lateral: 41
device_voxels_simulation_mesh_vertical: 42
device_vertical_maximum_um: 2.04
device_size_lateral_bordered_um: 2.04
device_voxels_simulation_mesh_lateral_bordered: 41
border_size_um: 0.255
border_size_voxels: 3
device_voxels_lateral_bordered: 24

#* FDTD Properties

vertical_gap_size_um: 1.2750000000000001
lateral_gap_size_um: 0.51
fdtd_region_size_vertical_um: 6.119999999999999
fdtd_region_size_lateral_um: 3.06
fdtd_region_maximum_vertical_um: 3.3150000000000004
fdtd_region_minimum_vertical_um: -2.8049999999999997

#* Surrounding Properties
pec_aperture_thickness_um: 0.153
sidewall_x_positions_um: [1.0625, 0, -1.0625, 0]
sidewall_y_positions_um: [0, 1.0625, 0, -1.0625]
sidewall_xspan_positions_um: [0.085, 2.21, 0.085, 2.21]
sidewall_yspan_positions_um: [2.21, 0.085, 2.21, 0.085]

#* Spectral Properties
bandwidth_um: 0.3
num_design_frequency_points: 30
num_eval_frequency_points: 180
lambda_values_um: [0.45, 0.46034482758620693, 0.4706896551724138, 0.4810344827586207, 0.4913793103448276, 0.5017241379310345, 0.5120689655172413, 0.5224137931034483, 0.5327586206896552, 0.5431034482758621, 0.553448275862069, 0.5637931034482759, 0.5741379310344827, 0.5844827586206897, 0.5948275862068966, 0.6051724137931035, 0.6155172413793104, 0.6258620689655172, 0.6362068965517241, 0.646551724137931, 0.656896551724138, 0.6672413793103449, 0.6775862068965517, 0.6879310344827586, 0.6982758620689655, 0.7086206896551724, 0.7189655172413794, 0.7293103448275862, 0.7396551724137932, 0.75]
max_intensity_by_wavelength: [36.53530864197531, 34.91172214507147, 33.39400448147702, 31.973147313112626, 30.641080455524776, 29.39055703168361, 28.215054699633836, 27.108690433399783, 26.066146772656342, 25.082607810531623, 24.153703477256624, 23.275460913316312, 22.44426191957724, 21.65680563169482, 20.910075698382695, 20.201311352992263, 19.527981859410428, 18.887763889837522, 18.278521456217273, 17.698288071111115, 17.145250859390607, 16.617736380692932, 16.114197955312115, 15.633204314043255, 15.173429416247526, 14.733643300714537, 14.312703851307443, 13.90954937433284, 13.52319189745763, 13.152711111111115]
dispersive_range_size_um: 0.3
dispersive_ranges_um: [[0.45, 0.75]]

#* PDAF Functionality Properties
pdaf_focal_spot_x_um: 0.51
pdaf_focal_spot_y_um: 0.51
pdaf_lambda_min_um: 0.45
pdaf_lambda_max_um: 0.55
pdaf_lambda_values_um: [0.45, 0.453448275862069, 0.45689655172413796, 0.46034482758620693, 0.4637931034482759, 0.4672413793103448, 0.4706896551724138, 0.47413793103448276, 0.47758620689655173, 0.4810344827586207, 0.4844827586206897, 0.48793103448275865, 0.4913793103448276, 0.4948275862068966, 0.49827586206896557, 0.5017241379310345, 0.5051724137931035, 0.5086206896551725, 0.5120689655172415, 0.5155172413793103, 0.5189655172413794, 0.5224137931034483, 0.5258620689655172, 0.5293103448275862, 0.5327586206896552, 0.5362068965517242, 0.5396551724137931, 0.5431034482758621, 0.5465517241379311, 0.55]
pdaf_max_intensity_by_wavelength: [36.53530864197531, 35.98175136260464, 35.440680099679604, 34.91172214507147, 34.394518594270394, 33.88872373742188, 33.39400448147702, 32.9100398016529, 32.436520220516364, 31.973147313112626, 31.519633236661136, 31.075700283434678, 30.641080455524776, 30.21551506027753, 29.798754325259512, 29.39055703168361, 28.990690165290218, 28.598928583740303, 28.215054699633825, 27.838858178320162, 27.470135649716887, 27.108690433399783, 26.754332276269828, 26.40687710214432, 26.066146772656342, 25.73196885888277, 25.404176423154265, 25.082607810531623, 24.767106449462133, 24.457520661157027]

#* Forward (Input) Source Properties
lateral_aperture_um: 2.244
src_maximum_vertical_um: 2.89
src_minimum_vertical_um: -2.1675
mid_lambda_um: 0.6
gaussian_waist_radius_um: 1
source_angle_theta_rad: 0.0
source_angle_theta_deg: 0.0

#* Adjoint Source Properties
adjoint_vertical_um: -1.5299999999999998
num_adjoint_sources: 2
adjoint_x_positions_um: [0.51, -0.51, -0.51, 0.51]
adjoint_y_positions_um: [0.51, 0.51, -0.51, -0.51]

#* Optimzation Properties
epoch_range_design_change_max: 0.09999999999999999
epoch_range_design_change_min: 0.05
spectral_focal_plane_map: [[0, 15], [15, 30], [30, 45], [15, 30]]
desired_peak_location_per_band: [0, 9, 19]
2024-02-26 21:34:25,909 - template_logger - INFO - Successfully saved output to runs\test_run\processed_config.yml
2024-02-26 21:34:33,249 - template_logger - INFO - Rendered Output:
{ 
    "info": {
        "name": "optimization",
        "path": "",
        "simulator_name": "LumericalFDTD",
        "coordinates": {}
    },

    "objects": {
        "FDTD": {
            
            "name": "FDTD",
            "obj_type": "fdtd",
            "properties": {
                "dimension": "2D",
                "x span": 3.06e-06,
                "y max": 3.3150000000000004e-06,
                "y min": -2.8049999999999994e-06,
                
                "simulation time": 6.000000000000001e-13,
                "index": 1.5
            }
        },
        "forward_src_x": {
            "name": "forward_src_x",
            "obj_type": "gaussian",
            "attached_monitor": 0,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 0,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
        "forward_src_y": {
            "name": "forward_src_y",
            "obj_type": "gaussian",
            "attached_monitor": 1,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 90,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
            "adj_src_0x": {
                "name": "adj_src_0x",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_0y": {
                "name": "adj_src_0y",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 0,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_1x": {
                "name": "adj_src_1x",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_1y": {
                "name": "adj_src_1y",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 0,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
        "focal_monitor_0": {
            "name": "focal_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": 5.1e-07,
                "y": -1.5299999999999998e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "focal_monitor_1": {
            "name": "focal_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": -5.1e-07,
                "y": -1.5299999999999998e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_0": {
            "name": "transmission_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": 5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_1": {
            "name": "transmission_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": -5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },

        "transmission_focal_monitor_": {
            "name": "transmission_focal_monitor_",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": 0,
                "x span": 2.04e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "PEC_screen": {
            "name": "PEC_screen",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 3.5904e-06,
                "y min": 2.193e-06,
                "y max": 2.346e-06,
                
                "material": "PEC (Perfect Electrical Conductor)"
            }
        },
        "source_aperture": {
            "name": "source_aperture",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 2.04e-06,
                "y min": 2.193e-06,
                "y max": 2.346e-06,
                
                "index": 1.5
            }
        },
        "design_import": {
            "name": "design_import",
            "obj_type": "import",
            "dev_id": 0,                
            "properties": {
                "x span": 2.04e-06,
                "y min": 0.0,
                "y max": 2.04e-06
                
            }
        },
        "design_mesh": {
            "name": "design_mesh",
            "obj_type": "mesh",
            "dev_id": 0,
            "properties": {
                "x": 0,
                "x span": 3.06e-06,
                "y min": -5e-07,
                "y max": 2.54e-06,
                
                "dx": 5.0999999999999993e-08,
                "dy": 5.0999999999999993e-08,
                "dz": 5.0999999999999993e-08
            }
        },
        "design_index_monitor": {
            "name": "design_index_monitor",
            "obj_type": "index",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "2D Z-Normal",
                "y min": 0.0,
                "y max": 2.04e-06,
                
                "spatial interpolation": "nearest mesh cell"
            }
        },
        "design_efield_monitor": {
            "name": "design_efield_monitor",
            "obj_type": "profile",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "2D Z-Normal",
                "y min": 0.0,
                "y max": 2.04e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "frequency points": 30,
                "output Hx": 0,
                "output Hy": 0,
                "output Hz": 0
            }
        }
    }
}
2024-02-26 21:34:33,253 - template_logger - INFO - Successfully saved output to runs\test_run\sim.json
2024-02-27 00:35:36,049 - template_logger - INFO - Rendered Output:
#* Original Properties

start_from_step: 0
shelf_fn: save_state
restart_epoch: 0
restart_iter: 0
lumapi_filepath_local: C:\Program Files\Lumerical\v212\api\python\lumapi.py
lumapi_filepath_hpc: /central/home/ifoo/lumerical/2021a_r22/api/python/lumapi.py
simulator_name: LumericalFDTD
simulator_dimension: 2D
simulator_max_wait_time: 3600
use_autograd: False
convert_existing: False
mesh_spacing_um: 0.051
geometry_spacing_lateral_um: 0.085
device_scale_um: 0.051
use_smooth_blur: False
min_feature_size_um: 0.085
background_index: 1.5
min_device_index: 1.5
max_device_index: 2.4
init_permittivity_0_1_scale: 0.5
binarize_3_levels: False
focal_plane_center_lateral_um: 0
num_vertical_layers: 5
vertical_layer_height_um: 0.408
device_size_lateral_um: 2.04
device_vertical_minimum_um: 0
objects_above_device: []
num_sidewalls: 0
sidewall_material: etch
sidewall_extend_pml: False
sidewall_extend_focalplane: True
sidewall_thickness_um: 0.085
sidewall_vertical_minimum_um: -0.765
add_infrared: False
lambda_min_um: 0.45
lambda_max_um: 0.75
lambda_min_eval_um: 0.45
lambda_max_eval_um: 0.75
num_bands: 2
num_points_per_band: 15
num_dispersive_ranges: 1
add_pdaf: False
pdaf_angle_phi_degrees: 45
pdaf_angle_theta_degrees: -8
pdaf_adj_src_idx: 0
fdtd_simulation_time_fs: 600
weight_by_individual_wavelength: True
use_gaussian_sources: True
use_airy_approximation: True
f_number: 2.2
airy_correction_factor: 0.84
beam_size_multiplier: 1
source_angle_theta_vacuum_deg: 0
source_angle_phi_deg: 0
xy_phi_rotations: [0, 90]
xy_adjtheta_rotations: [90, 0]
xy_pol_rotations: [0, 90]
xy_names: ['x', 'y']
use_source_aperture: True
num_focal_spots: 2
dispersive_range_to_adjoint_src_map: [[0, 1, 2, 3]]
adjoint_src_to_dispersive_range_map: [0, 0, 0, 0]
enforce_xy_gradient_symmetry: False
weight_by_quadrant_transmission: True
num_epochs: 10
num_iterations_per_epoch: 30
total_num_iterations: 80
epoch_list: [0, 16, 32, 48, 64, 80]
optimizer_algorithm: ADAM
adam_betas: (0.9, 0.999)
use_fixed_step_size: True
fixed_step_size: 0.01
epoch_start_design_change_max: 0.15
epoch_end_design_change_max: 0.05
epoch_start_design_change_min: 0.05
epoch_end_design_change_min: 0
fom_types: ['transmission', 'intensity']
optimization_fom: intensity
reinterpolate_permittivity: True
reinterpolate_permittivity_factor: 2
reinterpolate_type: nearest
border_optimization: False
layer_gradient: False
flip_gradient: False
polarizations_focal_plane_map: [['x', 'y'], ['x', 'y'], ['x', 'y'], ['x', 'y']]
weight_focal_plane_map_performance_weighting: [1.0, 1.0, 1.0, 1.0]
weight_focal_plane_map: [1.0, 1.0, 1.0, 1.0]
do_green_balance: False
polarization_name_to_idx: {'x': 0, 'y': 1, 'z': 2}
desired_peaks_per_band_um: [0.45, 0.54, 0.65]
explicit_band_centering: True
shuffle_green: False
infrared_center_um: 0.94
do_rejection: False
softplus_kappa: 2
evaluate_bordered_extended: False
do_normalize: False
should_fix_layers: True
fixed_layers: [1, 3]
fixed_layers_density: 0
mpi_exe: C:\Program Files (x86)\IntelSWToolsMPI\compilers_and_libraries_2020.4.321\windows\mpi\intel64\bin\mpiexec.exe
solver_exe: C:\Program Files\Lumerical\v212\bin\fdtd-engine-impi.exe
nprocs: 8
optimizer: AdamOptimizer
optimizer_settings: {'step_size': 0.01, 'betas': [0.9, 0.99], 'eps': '1e-9', 'moments': [0.0, 0.0]}
fom_dict: [{'fwd': [0], 'adj': [0], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}, {'fwd': [0], 'adj': [2], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}]
figures_of_merit: {'fom_0': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_0']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_0x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2], 'weight': 1.0}, 'fom_1': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_y', 'focal_monitor_0']], 'grad_monitors': [['forward_src_y', 'design_efield_monitor'], ['adj_src_0y', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2], 'weight': 1.0}}


#
# Derived Properties
#

#* Mesh Properties

min_feature_size_voxels: 1.0
blur_half_width_voxels: 0

#* Optical Properties
min_device_permittivity: 2.25
max_device_permittivity: 5.76
focal_length_um: 1.5299999999999998
focal_plane_center_vertical_um: -1.5299999999999998

#* Device Properties
vertical_layer_height_voxels: 8
device_size_vertical_um: 2.04
device_voxels_lateral: 24
device_voxels_vertical: 40
device_voxels_simulation_mesh_lateral: 41
device_voxels_simulation_mesh_vertical: 42
device_vertical_maximum_um: 2.04
device_size_lateral_bordered_um: 2.04
device_voxels_simulation_mesh_lateral_bordered: 41
border_size_um: 0.255
border_size_voxels: 3
device_voxels_lateral_bordered: 24

#* FDTD Properties

vertical_gap_size_um: 1.2750000000000001
lateral_gap_size_um: 0.51
fdtd_region_size_vertical_um: 6.119999999999999
fdtd_region_size_lateral_um: 3.06
fdtd_region_maximum_vertical_um: 3.3150000000000004
fdtd_region_minimum_vertical_um: -2.8049999999999997

#* Surrounding Properties
pec_aperture_thickness_um: 0.153
sidewall_x_positions_um: [1.0625, 0, -1.0625, 0]
sidewall_y_positions_um: [0, 1.0625, 0, -1.0625]
sidewall_xspan_positions_um: [0.085, 2.21, 0.085, 2.21]
sidewall_yspan_positions_um: [2.21, 0.085, 2.21, 0.085]

#* Spectral Properties
bandwidth_um: 0.3
num_design_frequency_points: 30
num_eval_frequency_points: 180
lambda_values_um: [0.45, 0.46034482758620693, 0.4706896551724138, 0.4810344827586207, 0.4913793103448276, 0.5017241379310345, 0.5120689655172413, 0.5224137931034483, 0.5327586206896552, 0.5431034482758621, 0.553448275862069, 0.5637931034482759, 0.5741379310344827, 0.5844827586206897, 0.5948275862068966, 0.6051724137931035, 0.6155172413793104, 0.6258620689655172, 0.6362068965517241, 0.646551724137931, 0.656896551724138, 0.6672413793103449, 0.6775862068965517, 0.6879310344827586, 0.6982758620689655, 0.7086206896551724, 0.7189655172413794, 0.7293103448275862, 0.7396551724137932, 0.75]
max_intensity_by_wavelength: [36.53530864197531, 34.91172214507147, 33.39400448147702, 31.973147313112626, 30.641080455524776, 29.39055703168361, 28.215054699633836, 27.108690433399783, 26.066146772656342, 25.082607810531623, 24.153703477256624, 23.275460913316312, 22.44426191957724, 21.65680563169482, 20.910075698382695, 20.201311352992263, 19.527981859410428, 18.887763889837522, 18.278521456217273, 17.698288071111115, 17.145250859390607, 16.617736380692932, 16.114197955312115, 15.633204314043255, 15.173429416247526, 14.733643300714537, 14.312703851307443, 13.90954937433284, 13.52319189745763, 13.152711111111115]
dispersive_range_size_um: 0.3
dispersive_ranges_um: [[0.45, 0.75]]

#* PDAF Functionality Properties
pdaf_focal_spot_x_um: 0.51
pdaf_focal_spot_y_um: 0.51
pdaf_lambda_min_um: 0.45
pdaf_lambda_max_um: 0.55
pdaf_lambda_values_um: [0.45, 0.453448275862069, 0.45689655172413796, 0.46034482758620693, 0.4637931034482759, 0.4672413793103448, 0.4706896551724138, 0.47413793103448276, 0.47758620689655173, 0.4810344827586207, 0.4844827586206897, 0.48793103448275865, 0.4913793103448276, 0.4948275862068966, 0.49827586206896557, 0.5017241379310345, 0.5051724137931035, 0.5086206896551725, 0.5120689655172415, 0.5155172413793103, 0.5189655172413794, 0.5224137931034483, 0.5258620689655172, 0.5293103448275862, 0.5327586206896552, 0.5362068965517242, 0.5396551724137931, 0.5431034482758621, 0.5465517241379311, 0.55]
pdaf_max_intensity_by_wavelength: [36.53530864197531, 35.98175136260464, 35.440680099679604, 34.91172214507147, 34.394518594270394, 33.88872373742188, 33.39400448147702, 32.9100398016529, 32.436520220516364, 31.973147313112626, 31.519633236661136, 31.075700283434678, 30.641080455524776, 30.21551506027753, 29.798754325259512, 29.39055703168361, 28.990690165290218, 28.598928583740303, 28.215054699633825, 27.838858178320162, 27.470135649716887, 27.108690433399783, 26.754332276269828, 26.40687710214432, 26.066146772656342, 25.73196885888277, 25.404176423154265, 25.082607810531623, 24.767106449462133, 24.457520661157027]

#* Forward (Input) Source Properties
lateral_aperture_um: 2.244
src_maximum_vertical_um: 2.89
src_minimum_vertical_um: -2.1675
mid_lambda_um: 0.6
gaussian_waist_radius_um: 1
source_angle_theta_rad: 0.0
source_angle_theta_deg: 0.0

#* Adjoint Source Properties
adjoint_vertical_um: -1.5299999999999998
num_adjoint_sources: 2
adjoint_x_positions_um: [0.51, -0.51, -0.51, 0.51]
adjoint_y_positions_um: [0.51, 0.51, -0.51, -0.51]

#* Optimzation Properties
epoch_range_design_change_max: 0.09999999999999999
epoch_range_design_change_min: 0.05
spectral_focal_plane_map: [[0, 15], [15, 30], [30, 45], [15, 30]]
desired_peak_location_per_band: [0, 9, 19]
2024-02-27 00:35:36,053 - template_logger - INFO - Successfully saved output to runs\test_run\processed_config.yml
2024-02-27 00:35:42,182 - template_logger - INFO - Rendered Output:
{ 
    "info": {
        "name": "optimization",
        "path": "",
        "simulator_name": "LumericalFDTD",
        "coordinates": {}
    },

    "objects": {
        "FDTD": {
            
            "name": "FDTD",
            "obj_type": "fdtd",
            "properties": {
                "dimension": "2D",
                "x span": 3.06e-06,
                "y max": 3.3150000000000004e-06,
                "y min": -2.8049999999999994e-06,
                
                "simulation time": 6.000000000000001e-13,
                "index": 1.5
            }
        },
        "forward_src_x": {
            "name": "forward_src_x",
            "obj_type": "gaussian",
            "attached_monitor": 0,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 0,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
        "forward_src_y": {
            "name": "forward_src_y",
            "obj_type": "gaussian",
            "attached_monitor": 1,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 90,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
            "adj_src_0x": {
                "name": "adj_src_0x",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_0y": {
                "name": "adj_src_0y",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 0,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_1x": {
                "name": "adj_src_1x",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_1y": {
                "name": "adj_src_1y",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 0,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
        "focal_monitor_0": {
            "name": "focal_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": 5.1e-07,
                "y": -1.5299999999999998e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "focal_monitor_1": {
            "name": "focal_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": -5.1e-07,
                "y": -1.5299999999999998e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_0": {
            "name": "transmission_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": 5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_1": {
            "name": "transmission_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": -5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },

        "transmission_focal_monitor_": {
            "name": "transmission_focal_monitor_",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": 0,
                "x span": 2.04e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "PEC_screen": {
            "name": "PEC_screen",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 3.5904e-06,
                "y min": 2.193e-06,
                "y max": 2.346e-06,
                
                "material": "PEC (Perfect Electrical Conductor)"
            }
        },
        "source_aperture": {
            "name": "source_aperture",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 2.04e-06,
                "y min": 2.193e-06,
                "y max": 2.346e-06,
                
                "index": 1.5
            }
        },
        "design_import": {
            "name": "design_import",
            "obj_type": "import",
            "dev_id": 0,                
            "properties": {
                "x span": 2.04e-06,
                "y min": 0.0,
                "y max": 2.04e-06
                
            }
        },
        "design_mesh": {
            "name": "design_mesh",
            "obj_type": "mesh",
            "dev_id": 0,
            "properties": {
                "x": 0,
                "x span": 3.06e-06,
                "y min": -5e-07,
                "y max": 2.54e-06,
                
                "dx": 5.0999999999999993e-08,
                "dy": 5.0999999999999993e-08,
                "dz": 5.0999999999999993e-08
            }
        },
        "design_index_monitor": {
            "name": "design_index_monitor",
            "obj_type": "index",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "2D Z-Normal",
                "y min": 0.0,
                "y max": 2.04e-06,
                
                "spatial interpolation": "nearest mesh cell"
            }
        },
        "design_efield_monitor": {
            "name": "design_efield_monitor",
            "obj_type": "profile",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "2D Z-Normal",
                "y min": 0.0,
                "y max": 2.04e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "frequency points": 30,
                "output Hx": 0,
                "output Hy": 0,
                "output Hz": 0
            }
        }
    }
}
2024-02-27 00:35:42,186 - template_logger - INFO - Successfully saved output to runs\test_run\sim.json
2024-02-27 00:42:38,281 - template_logger - INFO - Rendered Output:
#* Original Properties

start_from_step: 0
shelf_fn: save_state
restart_epoch: 0
restart_iter: 0
lumapi_filepath_local: C:\Program Files\Lumerical\v212\api\python\lumapi.py
lumapi_filepath_hpc: /central/home/ifoo/lumerical/2021a_r22/api/python/lumapi.py
simulator_name: LumericalFDTD
simulator_dimension: 2D
simulator_max_wait_time: 3600
use_autograd: False
convert_existing: False
mesh_spacing_um: 0.051
geometry_spacing_lateral_um: 0.085
device_scale_um: 0.051
use_smooth_blur: False
min_feature_size_um: 0.085
background_index: 1.5
min_device_index: 1.5
max_device_index: 2.4
init_permittivity_0_1_scale: 0.5
binarize_3_levels: False
focal_plane_center_lateral_um: 0
num_vertical_layers: 5
vertical_layer_height_um: 0.408
device_size_lateral_um: 2.04
device_vertical_minimum_um: 0
objects_above_device: []
num_sidewalls: 0
sidewall_material: etch
sidewall_extend_pml: False
sidewall_extend_focalplane: True
sidewall_thickness_um: 0.085
sidewall_vertical_minimum_um: -0.765
add_infrared: False
lambda_min_um: 0.45
lambda_max_um: 0.75
lambda_min_eval_um: 0.45
lambda_max_eval_um: 0.75
num_bands: 2
num_points_per_band: 15
num_dispersive_ranges: 1
add_pdaf: False
pdaf_angle_phi_degrees: 45
pdaf_angle_theta_degrees: -8
pdaf_adj_src_idx: 0
fdtd_simulation_time_fs: 600
weight_by_individual_wavelength: True
use_gaussian_sources: True
use_airy_approximation: True
f_number: 2.2
airy_correction_factor: 0.84
beam_size_multiplier: 1
source_angle_theta_vacuum_deg: 0
source_angle_phi_deg: 0
xy_phi_rotations: [0, 90]
xy_adjtheta_rotations: [90, 0]
xy_pol_rotations: [0, 90]
xy_names: ['x', 'y']
use_source_aperture: True
num_focal_spots: 2
dispersive_range_to_adjoint_src_map: [[0, 1, 2, 3]]
adjoint_src_to_dispersive_range_map: [0, 0, 0, 0]
enforce_xy_gradient_symmetry: False
weight_by_quadrant_transmission: True
num_epochs: 10
num_iterations_per_epoch: 30
total_num_iterations: 80
epoch_list: [0, 16, 32, 48, 64, 80]
optimizer_algorithm: ADAM
adam_betas: (0.9, 0.999)
use_fixed_step_size: True
fixed_step_size: 0.01
epoch_start_design_change_max: 0.15
epoch_end_design_change_max: 0.05
epoch_start_design_change_min: 0.05
epoch_end_design_change_min: 0
fom_types: ['transmission', 'intensity']
optimization_fom: intensity
reinterpolate_permittivity: True
reinterpolate_permittivity_factor: 2
reinterpolate_type: nearest
border_optimization: False
layer_gradient: False
flip_gradient: False
polarizations_focal_plane_map: [['x', 'y'], ['x', 'y'], ['x', 'y'], ['x', 'y']]
weight_focal_plane_map_performance_weighting: [1.0, 1.0, 1.0, 1.0]
weight_focal_plane_map: [1.0, 1.0, 1.0, 1.0]
do_green_balance: False
polarization_name_to_idx: {'x': 0, 'y': 1, 'z': 2}
desired_peaks_per_band_um: [0.45, 0.54, 0.65]
explicit_band_centering: True
shuffle_green: False
infrared_center_um: 0.94
do_rejection: False
softplus_kappa: 2
evaluate_bordered_extended: False
do_normalize: False
should_fix_layers: True
fixed_layers: [1, 3]
fixed_layers_density: 0
mpi_exe: C:\ProgramData\Miniconda3\envs\def2\Library\bin\mpiexec.exe
solver_exe: C:\Program Files\Lumerical\v212\bin\fdtd-engine-msmpi.exe
nprocs: 8
optimizer: AdamOptimizer
optimizer_settings: {'step_size': 0.01, 'betas': [0.9, 0.99], 'eps': '1e-9', 'moments': [0.0, 0.0]}
fom_dict: [{'fwd': [0], 'adj': [0], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}, {'fwd': [0], 'adj': [2], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}]
figures_of_merit: {'fom_0': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_0']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_0x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2], 'weight': 1.0}, 'fom_1': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_y', 'focal_monitor_0']], 'grad_monitors': [['forward_src_y', 'design_efield_monitor'], ['adj_src_0y', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2], 'weight': 1.0}}


#
# Derived Properties
#

#* Mesh Properties

min_feature_size_voxels: 1.0
blur_half_width_voxels: 0

#* Optical Properties
min_device_permittivity: 2.25
max_device_permittivity: 5.76
focal_length_um: 1.5299999999999998
focal_plane_center_vertical_um: -1.5299999999999998

#* Device Properties
vertical_layer_height_voxels: 8
device_size_vertical_um: 2.04
device_voxels_lateral: 24
device_voxels_vertical: 40
device_voxels_simulation_mesh_lateral: 41
device_voxels_simulation_mesh_vertical: 42
device_vertical_maximum_um: 2.04
device_size_lateral_bordered_um: 2.04
device_voxels_simulation_mesh_lateral_bordered: 41
border_size_um: 0.255
border_size_voxels: 3
device_voxels_lateral_bordered: 24

#* FDTD Properties

vertical_gap_size_um: 1.2750000000000001
lateral_gap_size_um: 0.51
fdtd_region_size_vertical_um: 6.119999999999999
fdtd_region_size_lateral_um: 3.06
fdtd_region_maximum_vertical_um: 3.3150000000000004
fdtd_region_minimum_vertical_um: -2.8049999999999997

#* Surrounding Properties
pec_aperture_thickness_um: 0.153
sidewall_x_positions_um: [1.0625, 0, -1.0625, 0]
sidewall_y_positions_um: [0, 1.0625, 0, -1.0625]
sidewall_xspan_positions_um: [0.085, 2.21, 0.085, 2.21]
sidewall_yspan_positions_um: [2.21, 0.085, 2.21, 0.085]

#* Spectral Properties
bandwidth_um: 0.3
num_design_frequency_points: 30
num_eval_frequency_points: 180
lambda_values_um: [0.45, 0.46034482758620693, 0.4706896551724138, 0.4810344827586207, 0.4913793103448276, 0.5017241379310345, 0.5120689655172413, 0.5224137931034483, 0.5327586206896552, 0.5431034482758621, 0.553448275862069, 0.5637931034482759, 0.5741379310344827, 0.5844827586206897, 0.5948275862068966, 0.6051724137931035, 0.6155172413793104, 0.6258620689655172, 0.6362068965517241, 0.646551724137931, 0.656896551724138, 0.6672413793103449, 0.6775862068965517, 0.6879310344827586, 0.6982758620689655, 0.7086206896551724, 0.7189655172413794, 0.7293103448275862, 0.7396551724137932, 0.75]
max_intensity_by_wavelength: [36.53530864197531, 34.91172214507147, 33.39400448147702, 31.973147313112626, 30.641080455524776, 29.39055703168361, 28.215054699633836, 27.108690433399783, 26.066146772656342, 25.082607810531623, 24.153703477256624, 23.275460913316312, 22.44426191957724, 21.65680563169482, 20.910075698382695, 20.201311352992263, 19.527981859410428, 18.887763889837522, 18.278521456217273, 17.698288071111115, 17.145250859390607, 16.617736380692932, 16.114197955312115, 15.633204314043255, 15.173429416247526, 14.733643300714537, 14.312703851307443, 13.90954937433284, 13.52319189745763, 13.152711111111115]
dispersive_range_size_um: 0.3
dispersive_ranges_um: [[0.45, 0.75]]

#* PDAF Functionality Properties
pdaf_focal_spot_x_um: 0.51
pdaf_focal_spot_y_um: 0.51
pdaf_lambda_min_um: 0.45
pdaf_lambda_max_um: 0.55
pdaf_lambda_values_um: [0.45, 0.453448275862069, 0.45689655172413796, 0.46034482758620693, 0.4637931034482759, 0.4672413793103448, 0.4706896551724138, 0.47413793103448276, 0.47758620689655173, 0.4810344827586207, 0.4844827586206897, 0.48793103448275865, 0.4913793103448276, 0.4948275862068966, 0.49827586206896557, 0.5017241379310345, 0.5051724137931035, 0.5086206896551725, 0.5120689655172415, 0.5155172413793103, 0.5189655172413794, 0.5224137931034483, 0.5258620689655172, 0.5293103448275862, 0.5327586206896552, 0.5362068965517242, 0.5396551724137931, 0.5431034482758621, 0.5465517241379311, 0.55]
pdaf_max_intensity_by_wavelength: [36.53530864197531, 35.98175136260464, 35.440680099679604, 34.91172214507147, 34.394518594270394, 33.88872373742188, 33.39400448147702, 32.9100398016529, 32.436520220516364, 31.973147313112626, 31.519633236661136, 31.075700283434678, 30.641080455524776, 30.21551506027753, 29.798754325259512, 29.39055703168361, 28.990690165290218, 28.598928583740303, 28.215054699633825, 27.838858178320162, 27.470135649716887, 27.108690433399783, 26.754332276269828, 26.40687710214432, 26.066146772656342, 25.73196885888277, 25.404176423154265, 25.082607810531623, 24.767106449462133, 24.457520661157027]

#* Forward (Input) Source Properties
lateral_aperture_um: 2.244
src_maximum_vertical_um: 2.89
src_minimum_vertical_um: -2.1675
mid_lambda_um: 0.6
gaussian_waist_radius_um: 1
source_angle_theta_rad: 0.0
source_angle_theta_deg: 0.0

#* Adjoint Source Properties
adjoint_vertical_um: -1.5299999999999998
num_adjoint_sources: 2
adjoint_x_positions_um: [0.51, -0.51, -0.51, 0.51]
adjoint_y_positions_um: [0.51, 0.51, -0.51, -0.51]

#* Optimzation Properties
epoch_range_design_change_max: 0.09999999999999999
epoch_range_design_change_min: 0.05
spectral_focal_plane_map: [[0, 15], [15, 30], [30, 45], [15, 30]]
desired_peak_location_per_band: [0, 9, 19]
2024-02-27 00:42:38,285 - template_logger - INFO - Successfully saved output to runs\test_run\processed_config.yml
2024-02-27 00:42:49,321 - template_logger - INFO - Rendered Output:
{ 
    "info": {
        "name": "optimization",
        "path": "",
        "simulator_name": "LumericalFDTD",
        "coordinates": {}
    },

    "objects": {
        "FDTD": {
            
            "name": "FDTD",
            "obj_type": "fdtd",
            "properties": {
                "dimension": "2D",
                "x span": 3.06e-06,
                "y max": 3.3150000000000004e-06,
                "y min": -2.8049999999999994e-06,
                
                "simulation time": 6.000000000000001e-13,
                "index": 1.5
            }
        },
        "forward_src_x": {
            "name": "forward_src_x",
            "obj_type": "gaussian",
            "attached_monitor": 0,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 0,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
        "forward_src_y": {
            "name": "forward_src_y",
            "obj_type": "gaussian",
            "attached_monitor": 1,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 90,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
            "adj_src_0x": {
                "name": "adj_src_0x",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_0y": {
                "name": "adj_src_0y",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 0,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_1x": {
                "name": "adj_src_1x",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_1y": {
                "name": "adj_src_1y",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 0,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
        "focal_monitor_0": {
            "name": "focal_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": 5.1e-07,
                "y": -1.5299999999999998e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "focal_monitor_1": {
            "name": "focal_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": -5.1e-07,
                "y": -1.5299999999999998e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_0": {
            "name": "transmission_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": 5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_1": {
            "name": "transmission_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": -5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },

        "transmission_focal_monitor_": {
            "name": "transmission_focal_monitor_",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": 0,
                "x span": 2.04e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "PEC_screen": {
            "name": "PEC_screen",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 3.5904e-06,
                "y min": 2.193e-06,
                "y max": 2.346e-06,
                
                "material": "PEC (Perfect Electrical Conductor)"
            }
        },
        "source_aperture": {
            "name": "source_aperture",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 2.04e-06,
                "y min": 2.193e-06,
                "y max": 2.346e-06,
                
                "index": 1.5
            }
        },
        "design_import": {
            "name": "design_import",
            "obj_type": "import",
            "dev_id": 0,                
            "properties": {
                "x span": 2.04e-06,
                "y min": 0.0,
                "y max": 2.04e-06
                
            }
        },
        "design_mesh": {
            "name": "design_mesh",
            "obj_type": "mesh",
            "dev_id": 0,
            "properties": {
                "x": 0,
                "x span": 3.06e-06,
                "y min": -5e-07,
                "y max": 2.54e-06,
                
                "dx": 5.0999999999999993e-08,
                "dy": 5.0999999999999993e-08,
                "dz": 5.0999999999999993e-08
            }
        },
        "design_index_monitor": {
            "name": "design_index_monitor",
            "obj_type": "index",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "2D Z-Normal",
                "y min": 0.0,
                "y max": 2.04e-06,
                
                "spatial interpolation": "nearest mesh cell"
            }
        },
        "design_efield_monitor": {
            "name": "design_efield_monitor",
            "obj_type": "profile",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "2D Z-Normal",
                "y min": 0.0,
                "y max": 2.04e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "frequency points": 30,
                "output Hx": 0,
                "output Hy": 0,
                "output Hz": 0
            }
        }
    }
}
2024-02-27 00:42:49,324 - template_logger - INFO - Successfully saved output to runs\test_run\sim.json
2024-02-28 14:56:54,685 - template_logger - INFO - Rendered Output:
#* Original Properties

start_from_step: 0
shelf_fn: save_state
restart_epoch: 0
restart_iter: 0
lumapi_filepath_local: C:\Program Files\Lumerical\v212\api\python\lumapi.py
lumapi_filepath_hpc: /central/home/ifoo/lumerical/2021a_r22/api/python/lumapi.py
simulator_name: LumericalFDTD
simulator_dimension: 2D
simulator_max_wait_time: 3600
use_autograd: False
convert_existing: False
mesh_spacing_um: 0.051
geometry_spacing_lateral_um: 0.085
device_scale_um: 0.051
use_smooth_blur: False
min_feature_size_um: 0.085
background_index: 1.5
min_device_index: 1.5
max_device_index: 2.4
init_permittivity_0_1_scale: 0.5
binarize_3_levels: False
focal_plane_center_lateral_um: 0
num_vertical_layers: 5
vertical_layer_height_um: 0.408
device_size_lateral_um: 2.04
device_vertical_minimum_um: 0
objects_above_device: []
num_sidewalls: 0
sidewall_material: etch
sidewall_extend_pml: False
sidewall_extend_focalplane: True
sidewall_thickness_um: 0.085
sidewall_vertical_minimum_um: -0.765
add_infrared: False
lambda_min_um: 0.45
lambda_max_um: 0.75
lambda_min_eval_um: 0.45
lambda_max_eval_um: 0.75
num_bands: 2
num_points_per_band: 15
num_dispersive_ranges: 1
add_pdaf: False
pdaf_angle_phi_degrees: 45
pdaf_angle_theta_degrees: -8
pdaf_adj_src_idx: 0
fdtd_simulation_time_fs: 600
weight_by_individual_wavelength: True
use_gaussian_sources: True
use_airy_approximation: True
f_number: 2.2
airy_correction_factor: 0.84
beam_size_multiplier: 1
source_angle_theta_vacuum_deg: 0
source_angle_phi_deg: 0
xy_phi_rotations: [0, 90]
xy_adjtheta_rotations: [90, 0]
xy_pol_rotations: [0, 90]
xy_names: ['x', 'y']
use_source_aperture: True
num_focal_spots: 2
dispersive_range_to_adjoint_src_map: [[0, 1, 2, 3]]
adjoint_src_to_dispersive_range_map: [0, 0, 0, 0]
enforce_xy_gradient_symmetry: False
weight_by_quadrant_transmission: True
num_epochs: 10
num_iterations_per_epoch: 30
total_num_iterations: 80
epoch_list: [0, 16, 32, 48, 64, 80]
optimizer_algorithm: ADAM
adam_betas: (0.9, 0.999)
use_fixed_step_size: True
fixed_step_size: 0.01
epoch_start_design_change_max: 0.15
epoch_end_design_change_max: 0.05
epoch_start_design_change_min: 0.05
epoch_end_design_change_min: 0
fom_types: ['transmission', 'intensity']
optimization_fom: intensity
reinterpolate_permittivity: True
reinterpolate_permittivity_factor: 2
reinterpolate_type: nearest
border_optimization: False
layer_gradient: False
flip_gradient: False
polarizations_focal_plane_map: [['x', 'y'], ['x', 'y'], ['x', 'y'], ['x', 'y']]
weight_focal_plane_map_performance_weighting: [1.0, 1.0, 1.0, 1.0]
weight_focal_plane_map: [1.0, 1.0, 1.0, 1.0]
do_green_balance: False
polarization_name_to_idx: {'x': 0, 'y': 1, 'z': 2}
desired_peaks_per_band_um: [0.45, 0.54, 0.65]
explicit_band_centering: True
shuffle_green: False
infrared_center_um: 0.94
do_rejection: False
softplus_kappa: 2
evaluate_bordered_extended: False
do_normalize: False
should_fix_layers: True
fixed_layers: [1, 3]
fixed_layers_density: 0
mpi_exe: C:\ProgramData\Miniconda3\envs\def2\Library\bin\mpiexec.exe
solver_exe: C:\Program Files\Lumerical\v212\bin\fdtd-engine-msmpi.exe
nprocs: 8
optimizer: AdamOptimizer
optimizer_settings: {'step_size': 0.01, 'betas': [0.9, 0.99], 'eps': '1e-9', 'moments': [0.0, 0.0]}
fom_dict: [{'fwd': [0], 'adj': [0], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}, {'fwd': [0], 'adj': [2], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}]
figures_of_merit: {'fom_0': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_0']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_0x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2, 3, 4, 5], 'weight': 1.0}, 'fom_1': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_y', 'focal_monitor_0']], 'grad_monitors': [['forward_src_y', 'design_efield_monitor'], ['adj_src_0y', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2, 3, 4, 5], 'weight': 1.0}}


#
# Derived Properties
#

#* Mesh Properties

min_feature_size_voxels: 1.0
blur_half_width_voxels: 0

#* Optical Properties
min_device_permittivity: 2.25
max_device_permittivity: 5.76
focal_length_um: 1.5299999999999998
focal_plane_center_vertical_um: -1.5299999999999998

#* Device Properties
vertical_layer_height_voxels: 8
device_size_vertical_um: 2.04
device_voxels_lateral: 24
device_voxels_vertical: 40
device_voxels_simulation_mesh_lateral: 41
device_voxels_simulation_mesh_vertical: 42
device_vertical_maximum_um: 2.04
device_size_lateral_bordered_um: 2.04
device_voxels_simulation_mesh_lateral_bordered: 41
border_size_um: 0.255
border_size_voxels: 3
device_voxels_lateral_bordered: 24

#* FDTD Properties

vertical_gap_size_um: 1.2750000000000001
lateral_gap_size_um: 0.51
fdtd_region_size_vertical_um: 6.119999999999999
fdtd_region_size_lateral_um: 3.06
fdtd_region_maximum_vertical_um: 3.3150000000000004
fdtd_region_minimum_vertical_um: -2.8049999999999997

#* Surrounding Properties
pec_aperture_thickness_um: 0.153
sidewall_x_positions_um: [1.0625, 0, -1.0625, 0]
sidewall_y_positions_um: [0, 1.0625, 0, -1.0625]
sidewall_xspan_positions_um: [0.085, 2.21, 0.085, 2.21]
sidewall_yspan_positions_um: [2.21, 0.085, 2.21, 0.085]

#* Spectral Properties
bandwidth_um: 0.3
num_design_frequency_points: 30
num_eval_frequency_points: 180
lambda_values_um: [0.45, 0.46034482758620693, 0.4706896551724138, 0.4810344827586207, 0.4913793103448276, 0.5017241379310345, 0.5120689655172413, 0.5224137931034483, 0.5327586206896552, 0.5431034482758621, 0.553448275862069, 0.5637931034482759, 0.5741379310344827, 0.5844827586206897, 0.5948275862068966, 0.6051724137931035, 0.6155172413793104, 0.6258620689655172, 0.6362068965517241, 0.646551724137931, 0.656896551724138, 0.6672413793103449, 0.6775862068965517, 0.6879310344827586, 0.6982758620689655, 0.7086206896551724, 0.7189655172413794, 0.7293103448275862, 0.7396551724137932, 0.75]
max_intensity_by_wavelength: [36.53530864197531, 34.91172214507147, 33.39400448147702, 31.973147313112626, 30.641080455524776, 29.39055703168361, 28.215054699633836, 27.108690433399783, 26.066146772656342, 25.082607810531623, 24.153703477256624, 23.275460913316312, 22.44426191957724, 21.65680563169482, 20.910075698382695, 20.201311352992263, 19.527981859410428, 18.887763889837522, 18.278521456217273, 17.698288071111115, 17.145250859390607, 16.617736380692932, 16.114197955312115, 15.633204314043255, 15.173429416247526, 14.733643300714537, 14.312703851307443, 13.90954937433284, 13.52319189745763, 13.152711111111115]
dispersive_range_size_um: 0.3
dispersive_ranges_um: [[0.45, 0.75]]

#* PDAF Functionality Properties
pdaf_focal_spot_x_um: 0.51
pdaf_focal_spot_y_um: 0.51
pdaf_lambda_min_um: 0.45
pdaf_lambda_max_um: 0.55
pdaf_lambda_values_um: [0.45, 0.453448275862069, 0.45689655172413796, 0.46034482758620693, 0.4637931034482759, 0.4672413793103448, 0.4706896551724138, 0.47413793103448276, 0.47758620689655173, 0.4810344827586207, 0.4844827586206897, 0.48793103448275865, 0.4913793103448276, 0.4948275862068966, 0.49827586206896557, 0.5017241379310345, 0.5051724137931035, 0.5086206896551725, 0.5120689655172415, 0.5155172413793103, 0.5189655172413794, 0.5224137931034483, 0.5258620689655172, 0.5293103448275862, 0.5327586206896552, 0.5362068965517242, 0.5396551724137931, 0.5431034482758621, 0.5465517241379311, 0.55]
pdaf_max_intensity_by_wavelength: [36.53530864197531, 35.98175136260464, 35.440680099679604, 34.91172214507147, 34.394518594270394, 33.88872373742188, 33.39400448147702, 32.9100398016529, 32.436520220516364, 31.973147313112626, 31.519633236661136, 31.075700283434678, 30.641080455524776, 30.21551506027753, 29.798754325259512, 29.39055703168361, 28.990690165290218, 28.598928583740303, 28.215054699633825, 27.838858178320162, 27.470135649716887, 27.108690433399783, 26.754332276269828, 26.40687710214432, 26.066146772656342, 25.73196885888277, 25.404176423154265, 25.082607810531623, 24.767106449462133, 24.457520661157027]

#* Forward (Input) Source Properties
lateral_aperture_um: 2.244
src_maximum_vertical_um: 2.89
src_minimum_vertical_um: -2.1675
mid_lambda_um: 0.6
gaussian_waist_radius_um: 1
source_angle_theta_rad: 0.0
source_angle_theta_deg: 0.0

#* Adjoint Source Properties
adjoint_vertical_um: -1.5299999999999998
num_adjoint_sources: 2
adjoint_x_positions_um: [0.51, -0.51, -0.51, 0.51]
adjoint_y_positions_um: [0.51, 0.51, -0.51, -0.51]

#* Optimzation Properties
epoch_range_design_change_max: 0.09999999999999999
epoch_range_design_change_min: 0.05
spectral_focal_plane_map: [[0, 15], [15, 30], [30, 45], [15, 30]]
desired_peak_location_per_band: [0, 9, 19]
2024-02-28 14:56:54,690 - template_logger - INFO - Successfully saved output to runs\test_run\processed_config.yml
2024-02-28 14:57:00,743 - template_logger - INFO - Rendered Output:
{ 
    "info": {
        "name": "optimization",
        "path": "",
        "simulator_name": "LumericalFDTD",
        "coordinates": {}
    },

    "objects": {
        "FDTD": {
            
            "name": "FDTD",
            "obj_type": "fdtd",
            "properties": {
                "dimension": "2D",
                "x span": 3.06e-06,
                "y max": 3.3150000000000004e-06,
                "y min": -2.8049999999999994e-06,
                
                "simulation time": 6.000000000000001e-13,
                "index": 1.5
            }
        },
        "forward_src_x": {
            "name": "forward_src_x",
            "obj_type": "gaussian",
            "attached_monitor": 0,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 0,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
        "forward_src_y": {
            "name": "forward_src_y",
            "obj_type": "gaussian",
            "attached_monitor": 1,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 90,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
            "adj_src_0x": {
                "name": "adj_src_0x",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_0y": {
                "name": "adj_src_0y",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 0,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_1x": {
                "name": "adj_src_1x",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_1y": {
                "name": "adj_src_1y",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 0,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
        "focal_monitor_0": {
            "name": "focal_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": 5.1e-07,
                "y": -1.5299999999999998e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "focal_monitor_1": {
            "name": "focal_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": -5.1e-07,
                "y": -1.5299999999999998e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_0": {
            "name": "transmission_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": 5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_1": {
            "name": "transmission_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": -5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },

        "transmission_focal_monitor_": {
            "name": "transmission_focal_monitor_",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": 0,
                "x span": 2.04e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "PEC_screen": {
            "name": "PEC_screen",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 3.5904e-06,
                "y min": 2.193e-06,
                "y max": 2.346e-06,
                
                "material": "PEC (Perfect Electrical Conductor)"
            }
        },
        "source_aperture": {
            "name": "source_aperture",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 2.04e-06,
                "y min": 2.193e-06,
                "y max": 2.346e-06,
                
                "index": 1.5
            }
        },
        "design_import": {
            "name": "design_import",
            "obj_type": "import",
            "dev_id": 0,                
            "properties": {
                "x span": 2.04e-06,
                "y min": 0.0,
                "y max": 2.04e-06
                
            }
        },
        "design_mesh": {
            "name": "design_mesh",
            "obj_type": "mesh",
            "dev_id": 0,
            "properties": {
                "x": 0,
                "x span": 3.06e-06,
                "y min": -5e-07,
                "y max": 2.54e-06,
                
                "dx": 5.0999999999999993e-08,
                "dy": 5.0999999999999993e-08,
                "dz": 5.0999999999999993e-08
            }
        },
        "design_index_monitor": {
            "name": "design_index_monitor",
            "obj_type": "index",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "2D Z-Normal",
                "y min": 0.0,
                "y max": 2.04e-06,
                
                "spatial interpolation": "nearest mesh cell"
            }
        },
        "design_efield_monitor": {
            "name": "design_efield_monitor",
            "obj_type": "profile",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "2D Z-Normal",
                "y min": 0.0,
                "y max": 2.04e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "frequency points": 30,
                "output Hx": 0,
                "output Hy": 0,
                "output Hz": 0
            }
        }
    }
}
2024-02-28 14:57:00,749 - template_logger - INFO - Successfully saved output to runs\test_run\sim.json
2024-02-28 17:14:29,634 - template_logger - INFO - Rendered Output:
#* Original Properties

start_from_step: 0
shelf_fn: save_state
restart_epoch: 0
restart_iter: 0
lumapi_filepath_local: C:\Program Files\Lumerical\v212\api\python\lumapi.py
lumapi_filepath_hpc: /central/home/ifoo/lumerical/2021a_r22/api/python/lumapi.py
simulator_name: LumericalFDTD
simulator_dimension: 2D
simulator_max_wait_time: 3600
use_autograd: False
convert_existing: False
mesh_spacing_um: 0.051
geometry_spacing_lateral_um: 0.085
device_scale_um: 0.051
use_smooth_blur: False
min_feature_size_um: 0.085
background_index: 1.5
min_device_index: 1.5
max_device_index: 2.4
init_permittivity_0_1_scale: 0.5
binarize_3_levels: False
focal_plane_center_lateral_um: 0
num_vertical_layers: 5
vertical_layer_height_um: 0.408
device_size_lateral_um: 2.04
device_vertical_minimum_um: 0
objects_above_device: []
num_sidewalls: 0
sidewall_material: etch
sidewall_extend_pml: False
sidewall_extend_focalplane: True
sidewall_thickness_um: 0.085
sidewall_vertical_minimum_um: -0.765
add_infrared: False
lambda_min_um: 0.45
lambda_max_um: 0.75
lambda_min_eval_um: 0.45
lambda_max_eval_um: 0.75
num_bands: 2
num_points_per_band: 15
num_dispersive_ranges: 1
add_pdaf: False
pdaf_angle_phi_degrees: 45
pdaf_angle_theta_degrees: -8
pdaf_adj_src_idx: 0
fdtd_simulation_time_fs: 600
weight_by_individual_wavelength: True
use_gaussian_sources: True
use_airy_approximation: True
f_number: 2.2
airy_correction_factor: 0.84
beam_size_multiplier: 1
source_angle_theta_vacuum_deg: 0
source_angle_phi_deg: 0
xy_phi_rotations: [0, 90]
xy_adjtheta_rotations: [90, 0]
xy_pol_rotations: [0, 90]
xy_names: ['x', 'y']
use_source_aperture: True
num_focal_spots: 2
dispersive_range_to_adjoint_src_map: [[0, 1, 2, 3]]
adjoint_src_to_dispersive_range_map: [0, 0, 0, 0]
enforce_xy_gradient_symmetry: False
weight_by_quadrant_transmission: True
num_epochs: 10
num_iterations_per_epoch: 30
total_num_iterations: 80
epoch_list: [0, 16, 32, 48, 64, 80]
optimizer_algorithm: ADAM
adam_betas: (0.9, 0.999)
use_fixed_step_size: True
fixed_step_size: 0.01
epoch_start_design_change_max: 0.15
epoch_end_design_change_max: 0.05
epoch_start_design_change_min: 0.05
epoch_end_design_change_min: 0
fom_types: ['transmission', 'intensity']
optimization_fom: intensity
reinterpolate_permittivity: True
reinterpolate_permittivity_factor: 2
reinterpolate_type: nearest
border_optimization: False
layer_gradient: False
flip_gradient: False
polarizations_focal_plane_map: [['x', 'y'], ['x', 'y'], ['x', 'y'], ['x', 'y']]
weight_focal_plane_map_performance_weighting: [1.0, 1.0, 1.0, 1.0]
weight_focal_plane_map: [1.0, 1.0, 1.0, 1.0]
do_green_balance: False
polarization_name_to_idx: {'x': 0, 'y': 1, 'z': 2}
desired_peaks_per_band_um: [0.45, 0.54, 0.65]
explicit_band_centering: True
shuffle_green: False
infrared_center_um: 0.94
do_rejection: False
softplus_kappa: 2
evaluate_bordered_extended: False
do_normalize: False
should_fix_layers: True
fixed_layers: [1, 3]
fixed_layers_density: 0
mpi_exe: C:\ProgramData\Miniconda3\envs\def2\Library\bin\mpiexec.exe
solver_exe: C:\Program Files\Lumerical\v212\bin\fdtd-engine-msmpi.exe
nprocs: 8
optimizer: AdamOptimizer
optimizer_settings: {'step_size': 0.01, 'betas': [0.9, 0.99], 'eps': '1e-9', 'moments': [0.0, 0.0]}
fom_dict: [{'fwd': [0], 'adj': [0], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}, {'fwd': [0], 'adj': [2], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}]
figures_of_merit: {'fom_0': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_0']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_0x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2, 3, 4, 5], 'weight': 1.0}, 'fom_1': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_y', 'focal_monitor_0']], 'grad_monitors': [['forward_src_y', 'design_efield_monitor'], ['adj_src_0y', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2, 3, 4, 5], 'weight': 1.0}}


#
# Derived Properties
#

#* Mesh Properties

min_feature_size_voxels: 1.0
blur_half_width_voxels: 0

#* Optical Properties
min_device_permittivity: 2.25
max_device_permittivity: 5.76
focal_length_um: 1.5299999999999998
focal_plane_center_vertical_um: -1.5299999999999998

#* Device Properties
vertical_layer_height_voxels: 8
device_size_vertical_um: 2.04
device_voxels_lateral: 24
device_voxels_vertical: 40
device_voxels_simulation_mesh_lateral: 41
device_voxels_simulation_mesh_vertical: 42
device_vertical_maximum_um: 2.04
device_size_lateral_bordered_um: 2.04
device_voxels_simulation_mesh_lateral_bordered: 41
border_size_um: 0.255
border_size_voxels: 3
device_voxels_lateral_bordered: 24

#* FDTD Properties

vertical_gap_size_um: 1.2750000000000001
lateral_gap_size_um: 0.51
fdtd_region_size_vertical_um: 6.119999999999999
fdtd_region_size_lateral_um: 3.06
fdtd_region_maximum_vertical_um: 3.3150000000000004
fdtd_region_minimum_vertical_um: -2.8049999999999997

#* Surrounding Properties
pec_aperture_thickness_um: 0.153
sidewall_x_positions_um: [1.0625, 0, -1.0625, 0]
sidewall_y_positions_um: [0, 1.0625, 0, -1.0625]
sidewall_xspan_positions_um: [0.085, 2.21, 0.085, 2.21]
sidewall_yspan_positions_um: [2.21, 0.085, 2.21, 0.085]

#* Spectral Properties
bandwidth_um: 0.3
num_design_frequency_points: 30
num_eval_frequency_points: 180
lambda_values_um: [0.45, 0.46034482758620693, 0.4706896551724138, 0.4810344827586207, 0.4913793103448276, 0.5017241379310345, 0.5120689655172413, 0.5224137931034483, 0.5327586206896552, 0.5431034482758621, 0.553448275862069, 0.5637931034482759, 0.5741379310344827, 0.5844827586206897, 0.5948275862068966, 0.6051724137931035, 0.6155172413793104, 0.6258620689655172, 0.6362068965517241, 0.646551724137931, 0.656896551724138, 0.6672413793103449, 0.6775862068965517, 0.6879310344827586, 0.6982758620689655, 0.7086206896551724, 0.7189655172413794, 0.7293103448275862, 0.7396551724137932, 0.75]
max_intensity_by_wavelength: [36.53530864197531, 34.91172214507147, 33.39400448147702, 31.973147313112626, 30.641080455524776, 29.39055703168361, 28.215054699633836, 27.108690433399783, 26.066146772656342, 25.082607810531623, 24.153703477256624, 23.275460913316312, 22.44426191957724, 21.65680563169482, 20.910075698382695, 20.201311352992263, 19.527981859410428, 18.887763889837522, 18.278521456217273, 17.698288071111115, 17.145250859390607, 16.617736380692932, 16.114197955312115, 15.633204314043255, 15.173429416247526, 14.733643300714537, 14.312703851307443, 13.90954937433284, 13.52319189745763, 13.152711111111115]
dispersive_range_size_um: 0.3
dispersive_ranges_um: [[0.45, 0.75]]

#* PDAF Functionality Properties
pdaf_focal_spot_x_um: 0.51
pdaf_focal_spot_y_um: 0.51
pdaf_lambda_min_um: 0.45
pdaf_lambda_max_um: 0.55
pdaf_lambda_values_um: [0.45, 0.453448275862069, 0.45689655172413796, 0.46034482758620693, 0.4637931034482759, 0.4672413793103448, 0.4706896551724138, 0.47413793103448276, 0.47758620689655173, 0.4810344827586207, 0.4844827586206897, 0.48793103448275865, 0.4913793103448276, 0.4948275862068966, 0.49827586206896557, 0.5017241379310345, 0.5051724137931035, 0.5086206896551725, 0.5120689655172415, 0.5155172413793103, 0.5189655172413794, 0.5224137931034483, 0.5258620689655172, 0.5293103448275862, 0.5327586206896552, 0.5362068965517242, 0.5396551724137931, 0.5431034482758621, 0.5465517241379311, 0.55]
pdaf_max_intensity_by_wavelength: [36.53530864197531, 35.98175136260464, 35.440680099679604, 34.91172214507147, 34.394518594270394, 33.88872373742188, 33.39400448147702, 32.9100398016529, 32.436520220516364, 31.973147313112626, 31.519633236661136, 31.075700283434678, 30.641080455524776, 30.21551506027753, 29.798754325259512, 29.39055703168361, 28.990690165290218, 28.598928583740303, 28.215054699633825, 27.838858178320162, 27.470135649716887, 27.108690433399783, 26.754332276269828, 26.40687710214432, 26.066146772656342, 25.73196885888277, 25.404176423154265, 25.082607810531623, 24.767106449462133, 24.457520661157027]

#* Forward (Input) Source Properties
lateral_aperture_um: 2.244
src_maximum_vertical_um: 2.89
src_minimum_vertical_um: -2.1675
mid_lambda_um: 0.6
gaussian_waist_radius_um: 1
source_angle_theta_rad: 0.0
source_angle_theta_deg: 0.0

#* Adjoint Source Properties
adjoint_vertical_um: -1.5299999999999998
num_adjoint_sources: 2
adjoint_x_positions_um: [0.51, -0.51, -0.51, 0.51]
adjoint_y_positions_um: [0.51, 0.51, -0.51, -0.51]

#* Optimzation Properties
epoch_range_design_change_max: 0.09999999999999999
epoch_range_design_change_min: 0.05
spectral_focal_plane_map: [[0, 15], [15, 30], [30, 45], [15, 30]]
desired_peak_location_per_band: [0, 9, 19]
2024-02-28 17:14:29,638 - template_logger - INFO - Successfully saved output to runs\test_run\processed_config.yml
2024-02-28 17:14:34,485 - template_logger - INFO - Rendered Output:
{ 
    "info": {
        "name": "optimization",
        "path": "",
        "simulator_name": "LumericalFDTD",
        "coordinates": {}
    },

    "objects": {
        "FDTD": {
            
            "name": "FDTD",
            "obj_type": "fdtd",
            "properties": {
                "dimension": "2D",
                "x span": 3.06e-06,
                "y max": 3.3150000000000004e-06,
                "y min": -2.8049999999999994e-06,
                
                "simulation time": 6.000000000000001e-13,
                "index": 1.5
            }
        },
        "forward_src_x": {
            "name": "forward_src_x",
            "obj_type": "gaussian",
            "attached_monitor": 0,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 0,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
        "forward_src_y": {
            "name": "forward_src_y",
            "obj_type": "gaussian",
            "attached_monitor": 1,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 90,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
            "adj_src_0x": {
                "name": "adj_src_0x",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_0y": {
                "name": "adj_src_0y",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 0,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_1x": {
                "name": "adj_src_1x",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_1y": {
                "name": "adj_src_1y",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 0,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
        "focal_monitor_0": {
            "name": "focal_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": 5.1e-07,
                "y": -1.5299999999999998e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "focal_monitor_1": {
            "name": "focal_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": -5.1e-07,
                "y": -1.5299999999999998e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_0": {
            "name": "transmission_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": 5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_1": {
            "name": "transmission_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": -5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },

        "transmission_focal_monitor_": {
            "name": "transmission_focal_monitor_",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": 0,
                "x span": 2.04e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "PEC_screen": {
            "name": "PEC_screen",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 3.5904e-06,
                "y min": 2.193e-06,
                "y max": 2.346e-06,
                
                "material": "PEC (Perfect Electrical Conductor)"
            }
        },
        "source_aperture": {
            "name": "source_aperture",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 2.04e-06,
                "y min": 2.193e-06,
                "y max": 2.346e-06,
                
                "index": 1.5
            }
        },
        "design_import": {
            "name": "design_import",
            "obj_type": "import",
            "dev_id": 0,                
            "properties": {
                "x span": 2.04e-06,
                "y min": 0.0,
                "y max": 2.04e-06
                
            }
        },
        "design_mesh": {
            "name": "design_mesh",
            "obj_type": "mesh",
            "dev_id": 0,
            "properties": {
                "x": 0,
                "x span": 3.06e-06,
                "y min": -5e-07,
                "y max": 2.54e-06,
                
                "dx": 5.0999999999999993e-08,
                "dy": 5.0999999999999993e-08,
                "dz": 5.0999999999999993e-08
            }
        },
        "design_index_monitor": {
            "name": "design_index_monitor",
            "obj_type": "index",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "2D Z-Normal",
                "y min": 0.0,
                "y max": 2.04e-06,
                
                "spatial interpolation": "nearest mesh cell"
            }
        },
        "design_efield_monitor": {
            "name": "design_efield_monitor",
            "obj_type": "profile",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "2D Z-Normal",
                "y min": 0.0,
                "y max": 2.04e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "frequency points": 30,
                "output Hx": 0,
                "output Hy": 0,
                "output Hz": 0
            }
        }
    }
}
2024-02-28 17:14:34,490 - template_logger - INFO - Successfully saved output to runs\test_run\sim.json
2024-02-28 17:15:41,907 - template_logger - INFO - Rendered Output:
#* Original Properties

start_from_step: 0
shelf_fn: save_state
restart_epoch: 0
restart_iter: 0
lumapi_filepath_local: C:\Program Files\Lumerical\v212\api\python\lumapi.py
lumapi_filepath_hpc: /central/home/ifoo/lumerical/2021a_r22/api/python/lumapi.py
simulator_name: LumericalFDTD
simulator_dimension: 2D
simulator_max_wait_time: 3600
use_autograd: False
convert_existing: False
mesh_spacing_um: 0.051
geometry_spacing_lateral_um: 0.085
device_scale_um: 0.051
use_smooth_blur: False
min_feature_size_um: 0.085
background_index: 1.5
min_device_index: 1.5
max_device_index: 2.4
init_permittivity_0_1_scale: 0.5
binarize_3_levels: False
focal_plane_center_lateral_um: 0
num_vertical_layers: 5
vertical_layer_height_um: 0.408
device_size_lateral_um: 2.04
device_vertical_minimum_um: 0
objects_above_device: []
num_sidewalls: 0
sidewall_material: etch
sidewall_extend_pml: False
sidewall_extend_focalplane: True
sidewall_thickness_um: 0.085
sidewall_vertical_minimum_um: -0.765
add_infrared: False
lambda_min_um: 0.45
lambda_max_um: 0.75
lambda_min_eval_um: 0.45
lambda_max_eval_um: 0.75
num_bands: 2
num_points_per_band: 15
num_dispersive_ranges: 1
add_pdaf: False
pdaf_angle_phi_degrees: 45
pdaf_angle_theta_degrees: -8
pdaf_adj_src_idx: 0
fdtd_simulation_time_fs: 600
weight_by_individual_wavelength: True
use_gaussian_sources: True
use_airy_approximation: True
f_number: 2.2
airy_correction_factor: 0.84
beam_size_multiplier: 1
source_angle_theta_vacuum_deg: 0
source_angle_phi_deg: 0
xy_phi_rotations: [0, 90]
xy_adjtheta_rotations: [90, 0]
xy_pol_rotations: [0, 90]
xy_names: ['x', 'y']
use_source_aperture: True
num_focal_spots: 2
dispersive_range_to_adjoint_src_map: [[0, 1, 2, 3]]
adjoint_src_to_dispersive_range_map: [0, 0, 0, 0]
enforce_xy_gradient_symmetry: False
weight_by_quadrant_transmission: True
num_epochs: 10
num_iterations_per_epoch: 30
total_num_iterations: 80
epoch_list: [0, 16, 32, 48, 64, 80]
optimizer_algorithm: ADAM
adam_betas: (0.9, 0.999)
use_fixed_step_size: True
fixed_step_size: 0.01
epoch_start_design_change_max: 0.15
epoch_end_design_change_max: 0.05
epoch_start_design_change_min: 0.05
epoch_end_design_change_min: 0
fom_types: ['transmission', 'intensity']
optimization_fom: intensity
reinterpolate_permittivity: True
reinterpolate_permittivity_factor: 2
reinterpolate_type: nearest
border_optimization: False
layer_gradient: False
flip_gradient: False
polarizations_focal_plane_map: [['x', 'y'], ['x', 'y'], ['x', 'y'], ['x', 'y']]
weight_focal_plane_map_performance_weighting: [1.0, 1.0, 1.0, 1.0]
weight_focal_plane_map: [1.0, 1.0, 1.0, 1.0]
do_green_balance: False
polarization_name_to_idx: {'x': 0, 'y': 1, 'z': 2}
desired_peaks_per_band_um: [0.45, 0.54, 0.65]
explicit_band_centering: True
shuffle_green: False
infrared_center_um: 0.94
do_rejection: False
softplus_kappa: 2
evaluate_bordered_extended: False
do_normalize: False
should_fix_layers: True
fixed_layers: [1, 3]
fixed_layers_density: 0
mpi_exe: C:\ProgramData\Miniconda3\envs\def2\Library\bin\mpiexec.exe
solver_exe: C:\Program Files\Lumerical\v212\bin\fdtd-engine-msmpi.exe
nprocs: 8
optimizer: AdamOptimizer
optimizer_settings: {'step_size': 0.01, 'betas': [0.9, 0.999], 'eps': '1e-9', 'moments': [0.0, 0.0]}
fom_dict: [{'fwd': [0], 'adj': [0], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}, {'fwd': [0], 'adj': [2], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}]
figures_of_merit: {'fom_0': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_0']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_0x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2, 3, 4, 5], 'weight': 1.0}, 'fom_1': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_y', 'focal_monitor_0']], 'grad_monitors': [['forward_src_y', 'design_efield_monitor'], ['adj_src_0y', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2, 3, 4, 5], 'weight': 1.0}}


#
# Derived Properties
#

#* Mesh Properties

min_feature_size_voxels: 1.0
blur_half_width_voxels: 0

#* Optical Properties
min_device_permittivity: 2.25
max_device_permittivity: 5.76
focal_length_um: 1.5299999999999998
focal_plane_center_vertical_um: -1.5299999999999998

#* Device Properties
vertical_layer_height_voxels: 8
device_size_vertical_um: 2.04
device_voxels_lateral: 24
device_voxels_vertical: 40
device_voxels_simulation_mesh_lateral: 41
device_voxels_simulation_mesh_vertical: 42
device_vertical_maximum_um: 2.04
device_size_lateral_bordered_um: 2.04
device_voxels_simulation_mesh_lateral_bordered: 41
border_size_um: 0.255
border_size_voxels: 3
device_voxels_lateral_bordered: 24

#* FDTD Properties

vertical_gap_size_um: 1.2750000000000001
lateral_gap_size_um: 0.51
fdtd_region_size_vertical_um: 6.119999999999999
fdtd_region_size_lateral_um: 3.06
fdtd_region_maximum_vertical_um: 3.3150000000000004
fdtd_region_minimum_vertical_um: -2.8049999999999997

#* Surrounding Properties
pec_aperture_thickness_um: 0.153
sidewall_x_positions_um: [1.0625, 0, -1.0625, 0]
sidewall_y_positions_um: [0, 1.0625, 0, -1.0625]
sidewall_xspan_positions_um: [0.085, 2.21, 0.085, 2.21]
sidewall_yspan_positions_um: [2.21, 0.085, 2.21, 0.085]

#* Spectral Properties
bandwidth_um: 0.3
num_design_frequency_points: 30
num_eval_frequency_points: 180
lambda_values_um: [0.45, 0.46034482758620693, 0.4706896551724138, 0.4810344827586207, 0.4913793103448276, 0.5017241379310345, 0.5120689655172413, 0.5224137931034483, 0.5327586206896552, 0.5431034482758621, 0.553448275862069, 0.5637931034482759, 0.5741379310344827, 0.5844827586206897, 0.5948275862068966, 0.6051724137931035, 0.6155172413793104, 0.6258620689655172, 0.6362068965517241, 0.646551724137931, 0.656896551724138, 0.6672413793103449, 0.6775862068965517, 0.6879310344827586, 0.6982758620689655, 0.7086206896551724, 0.7189655172413794, 0.7293103448275862, 0.7396551724137932, 0.75]
max_intensity_by_wavelength: [36.53530864197531, 34.91172214507147, 33.39400448147702, 31.973147313112626, 30.641080455524776, 29.39055703168361, 28.215054699633836, 27.108690433399783, 26.066146772656342, 25.082607810531623, 24.153703477256624, 23.275460913316312, 22.44426191957724, 21.65680563169482, 20.910075698382695, 20.201311352992263, 19.527981859410428, 18.887763889837522, 18.278521456217273, 17.698288071111115, 17.145250859390607, 16.617736380692932, 16.114197955312115, 15.633204314043255, 15.173429416247526, 14.733643300714537, 14.312703851307443, 13.90954937433284, 13.52319189745763, 13.152711111111115]
dispersive_range_size_um: 0.3
dispersive_ranges_um: [[0.45, 0.75]]

#* PDAF Functionality Properties
pdaf_focal_spot_x_um: 0.51
pdaf_focal_spot_y_um: 0.51
pdaf_lambda_min_um: 0.45
pdaf_lambda_max_um: 0.55
pdaf_lambda_values_um: [0.45, 0.453448275862069, 0.45689655172413796, 0.46034482758620693, 0.4637931034482759, 0.4672413793103448, 0.4706896551724138, 0.47413793103448276, 0.47758620689655173, 0.4810344827586207, 0.4844827586206897, 0.48793103448275865, 0.4913793103448276, 0.4948275862068966, 0.49827586206896557, 0.5017241379310345, 0.5051724137931035, 0.5086206896551725, 0.5120689655172415, 0.5155172413793103, 0.5189655172413794, 0.5224137931034483, 0.5258620689655172, 0.5293103448275862, 0.5327586206896552, 0.5362068965517242, 0.5396551724137931, 0.5431034482758621, 0.5465517241379311, 0.55]
pdaf_max_intensity_by_wavelength: [36.53530864197531, 35.98175136260464, 35.440680099679604, 34.91172214507147, 34.394518594270394, 33.88872373742188, 33.39400448147702, 32.9100398016529, 32.436520220516364, 31.973147313112626, 31.519633236661136, 31.075700283434678, 30.641080455524776, 30.21551506027753, 29.798754325259512, 29.39055703168361, 28.990690165290218, 28.598928583740303, 28.215054699633825, 27.838858178320162, 27.470135649716887, 27.108690433399783, 26.754332276269828, 26.40687710214432, 26.066146772656342, 25.73196885888277, 25.404176423154265, 25.082607810531623, 24.767106449462133, 24.457520661157027]

#* Forward (Input) Source Properties
lateral_aperture_um: 2.244
src_maximum_vertical_um: 2.89
src_minimum_vertical_um: -2.1675
mid_lambda_um: 0.6
gaussian_waist_radius_um: 1
source_angle_theta_rad: 0.0
source_angle_theta_deg: 0.0

#* Adjoint Source Properties
adjoint_vertical_um: -1.5299999999999998
num_adjoint_sources: 2
adjoint_x_positions_um: [0.51, -0.51, -0.51, 0.51]
adjoint_y_positions_um: [0.51, 0.51, -0.51, -0.51]

#* Optimzation Properties
epoch_range_design_change_max: 0.09999999999999999
epoch_range_design_change_min: 0.05
spectral_focal_plane_map: [[0, 15], [15, 30], [30, 45], [15, 30]]
desired_peak_location_per_band: [0, 9, 19]
2024-02-28 17:15:41,911 - template_logger - INFO - Successfully saved output to runs\test_run\processed_config.yml
2024-02-28 17:15:47,726 - template_logger - INFO - Rendered Output:
{ 
    "info": {
        "name": "optimization",
        "path": "",
        "simulator_name": "LumericalFDTD",
        "coordinates": {}
    },

    "objects": {
        "FDTD": {
            
            "name": "FDTD",
            "obj_type": "fdtd",
            "properties": {
                "dimension": "2D",
                "x span": 3.06e-06,
                "y max": 3.3150000000000004e-06,
                "y min": -2.8049999999999994e-06,
                
                "simulation time": 6.000000000000001e-13,
                "index": 1.5
            }
        },
        "forward_src_x": {
            "name": "forward_src_x",
            "obj_type": "gaussian",
            "attached_monitor": 0,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 0,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
        "forward_src_y": {
            "name": "forward_src_y",
            "obj_type": "gaussian",
            "attached_monitor": 1,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 90,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
            "adj_src_0x": {
                "name": "adj_src_0x",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_0y": {
                "name": "adj_src_0y",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 0,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_1x": {
                "name": "adj_src_1x",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_1y": {
                "name": "adj_src_1y",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 0,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
        "focal_monitor_0": {
            "name": "focal_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": 5.1e-07,
                "y": -1.5299999999999998e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "focal_monitor_1": {
            "name": "focal_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": -5.1e-07,
                "y": -1.5299999999999998e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_0": {
            "name": "transmission_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": 5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_1": {
            "name": "transmission_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": -5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },

        "transmission_focal_monitor_": {
            "name": "transmission_focal_monitor_",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": 0,
                "x span": 2.04e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "PEC_screen": {
            "name": "PEC_screen",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 3.5904e-06,
                "y min": 2.193e-06,
                "y max": 2.346e-06,
                
                "material": "PEC (Perfect Electrical Conductor)"
            }
        },
        "source_aperture": {
            "name": "source_aperture",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 2.04e-06,
                "y min": 2.193e-06,
                "y max": 2.346e-06,
                
                "index": 1.5
            }
        },
        "design_import": {
            "name": "design_import",
            "obj_type": "import",
            "dev_id": 0,                
            "properties": {
                "x span": 2.04e-06,
                "y min": 0.0,
                "y max": 2.04e-06
                
            }
        },
        "design_mesh": {
            "name": "design_mesh",
            "obj_type": "mesh",
            "dev_id": 0,
            "properties": {
                "x": 0,
                "x span": 3.06e-06,
                "y min": -5e-07,
                "y max": 2.54e-06,
                
                "dx": 5.0999999999999993e-08,
                "dy": 5.0999999999999993e-08,
                "dz": 5.0999999999999993e-08
            }
        },
        "design_index_monitor": {
            "name": "design_index_monitor",
            "obj_type": "index",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "2D Z-Normal",
                "y min": 0.0,
                "y max": 2.04e-06,
                
                "spatial interpolation": "nearest mesh cell"
            }
        },
        "design_efield_monitor": {
            "name": "design_efield_monitor",
            "obj_type": "profile",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "2D Z-Normal",
                "y min": 0.0,
                "y max": 2.04e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "frequency points": 30,
                "output Hx": 0,
                "output Hy": 0,
                "output Hz": 0
            }
        }
    }
}
2024-02-28 17:15:47,730 - template_logger - INFO - Successfully saved output to runs\test_run\sim.json
2024-02-28 17:16:25,188 - template_logger - INFO - Rendered Output:
#* Original Properties

start_from_step: 0
shelf_fn: save_state
restart_epoch: 0
restart_iter: 0
lumapi_filepath_local: C:\Program Files\Lumerical\v212\api\python\lumapi.py
lumapi_filepath_hpc: /central/home/ifoo/lumerical/2021a_r22/api/python/lumapi.py
simulator_name: LumericalFDTD
simulator_dimension: 2D
simulator_max_wait_time: 3600
use_autograd: False
convert_existing: False
mesh_spacing_um: 0.051
geometry_spacing_lateral_um: 0.085
device_scale_um: 0.051
use_smooth_blur: False
min_feature_size_um: 0.085
background_index: 1.5
min_device_index: 1.5
max_device_index: 2.4
init_permittivity_0_1_scale: 0.5
binarize_3_levels: False
focal_plane_center_lateral_um: 0
num_vertical_layers: 5
vertical_layer_height_um: 0.408
device_size_lateral_um: 2.04
device_vertical_minimum_um: 0
objects_above_device: []
num_sidewalls: 0
sidewall_material: etch
sidewall_extend_pml: False
sidewall_extend_focalplane: True
sidewall_thickness_um: 0.085
sidewall_vertical_minimum_um: -0.765
add_infrared: False
lambda_min_um: 0.45
lambda_max_um: 0.75
lambda_min_eval_um: 0.45
lambda_max_eval_um: 0.75
num_bands: 2
num_points_per_band: 15
num_dispersive_ranges: 1
add_pdaf: False
pdaf_angle_phi_degrees: 45
pdaf_angle_theta_degrees: -8
pdaf_adj_src_idx: 0
fdtd_simulation_time_fs: 600
weight_by_individual_wavelength: True
use_gaussian_sources: True
use_airy_approximation: True
f_number: 2.2
airy_correction_factor: 0.84
beam_size_multiplier: 1
source_angle_theta_vacuum_deg: 0
source_angle_phi_deg: 0
xy_phi_rotations: [0, 90]
xy_adjtheta_rotations: [90, 0]
xy_pol_rotations: [0, 90]
xy_names: ['x', 'y']
use_source_aperture: True
num_focal_spots: 2
dispersive_range_to_adjoint_src_map: [[0, 1, 2, 3]]
adjoint_src_to_dispersive_range_map: [0, 0, 0, 0]
enforce_xy_gradient_symmetry: False
weight_by_quadrant_transmission: True
num_epochs: 10
num_iterations_per_epoch: 30
total_num_iterations: 80
epoch_list: [0, 16, 32, 48, 64, 80]
optimizer_algorithm: ADAM
adam_betas: (0.9, 0.999)
use_fixed_step_size: True
fixed_step_size: 0.01
epoch_start_design_change_max: 0.15
epoch_end_design_change_max: 0.05
epoch_start_design_change_min: 0.05
epoch_end_design_change_min: 0
fom_types: ['transmission', 'intensity']
optimization_fom: intensity
reinterpolate_permittivity: True
reinterpolate_permittivity_factor: 2
reinterpolate_type: nearest
border_optimization: False
layer_gradient: False
flip_gradient: False
polarizations_focal_plane_map: [['x', 'y'], ['x', 'y'], ['x', 'y'], ['x', 'y']]
weight_focal_plane_map_performance_weighting: [1.0, 1.0, 1.0, 1.0]
weight_focal_plane_map: [1.0, 1.0, 1.0, 1.0]
do_green_balance: False
polarization_name_to_idx: {'x': 0, 'y': 1, 'z': 2}
desired_peaks_per_band_um: [0.45, 0.54, 0.65]
explicit_band_centering: True
shuffle_green: False
infrared_center_um: 0.94
do_rejection: False
softplus_kappa: 2
evaluate_bordered_extended: False
do_normalize: False
should_fix_layers: True
fixed_layers: [1, 3]
fixed_layers_density: 0
mpi_exe: C:\ProgramData\Miniconda3\envs\def2\Library\bin\mpiexec.exe
solver_exe: C:\Program Files\Lumerical\v212\bin\fdtd-engine-msmpi.exe
nprocs: 8
optimizer: AdamOptimizer
optimizer_settings: {'step_size': 0.01, 'betas': [0.9, 0.999], 'eps': '1e-8', 'moments': [0.0, 0.0]}
fom_dict: [{'fwd': [0], 'adj': [0], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}, {'fwd': [0], 'adj': [2], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}]
figures_of_merit: {'fom_0': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_0']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_0x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2, 3, 4, 5], 'weight': 1.0}, 'fom_1': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_y', 'focal_monitor_0']], 'grad_monitors': [['forward_src_y', 'design_efield_monitor'], ['adj_src_0y', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2, 3, 4, 5], 'weight': 1.0}}


#
# Derived Properties
#

#* Mesh Properties

min_feature_size_voxels: 1.0
blur_half_width_voxels: 0

#* Optical Properties
min_device_permittivity: 2.25
max_device_permittivity: 5.76
focal_length_um: 1.5299999999999998
focal_plane_center_vertical_um: -1.5299999999999998

#* Device Properties
vertical_layer_height_voxels: 8
device_size_vertical_um: 2.04
device_voxels_lateral: 24
device_voxels_vertical: 40
device_voxels_simulation_mesh_lateral: 41
device_voxels_simulation_mesh_vertical: 42
device_vertical_maximum_um: 2.04
device_size_lateral_bordered_um: 2.04
device_voxels_simulation_mesh_lateral_bordered: 41
border_size_um: 0.255
border_size_voxels: 3
device_voxels_lateral_bordered: 24

#* FDTD Properties

vertical_gap_size_um: 1.2750000000000001
lateral_gap_size_um: 0.51
fdtd_region_size_vertical_um: 6.119999999999999
fdtd_region_size_lateral_um: 3.06
fdtd_region_maximum_vertical_um: 3.3150000000000004
fdtd_region_minimum_vertical_um: -2.8049999999999997

#* Surrounding Properties
pec_aperture_thickness_um: 0.153
sidewall_x_positions_um: [1.0625, 0, -1.0625, 0]
sidewall_y_positions_um: [0, 1.0625, 0, -1.0625]
sidewall_xspan_positions_um: [0.085, 2.21, 0.085, 2.21]
sidewall_yspan_positions_um: [2.21, 0.085, 2.21, 0.085]

#* Spectral Properties
bandwidth_um: 0.3
num_design_frequency_points: 30
num_eval_frequency_points: 180
lambda_values_um: [0.45, 0.46034482758620693, 0.4706896551724138, 0.4810344827586207, 0.4913793103448276, 0.5017241379310345, 0.5120689655172413, 0.5224137931034483, 0.5327586206896552, 0.5431034482758621, 0.553448275862069, 0.5637931034482759, 0.5741379310344827, 0.5844827586206897, 0.5948275862068966, 0.6051724137931035, 0.6155172413793104, 0.6258620689655172, 0.6362068965517241, 0.646551724137931, 0.656896551724138, 0.6672413793103449, 0.6775862068965517, 0.6879310344827586, 0.6982758620689655, 0.7086206896551724, 0.7189655172413794, 0.7293103448275862, 0.7396551724137932, 0.75]
max_intensity_by_wavelength: [36.53530864197531, 34.91172214507147, 33.39400448147702, 31.973147313112626, 30.641080455524776, 29.39055703168361, 28.215054699633836, 27.108690433399783, 26.066146772656342, 25.082607810531623, 24.153703477256624, 23.275460913316312, 22.44426191957724, 21.65680563169482, 20.910075698382695, 20.201311352992263, 19.527981859410428, 18.887763889837522, 18.278521456217273, 17.698288071111115, 17.145250859390607, 16.617736380692932, 16.114197955312115, 15.633204314043255, 15.173429416247526, 14.733643300714537, 14.312703851307443, 13.90954937433284, 13.52319189745763, 13.152711111111115]
dispersive_range_size_um: 0.3
dispersive_ranges_um: [[0.45, 0.75]]

#* PDAF Functionality Properties
pdaf_focal_spot_x_um: 0.51
pdaf_focal_spot_y_um: 0.51
pdaf_lambda_min_um: 0.45
pdaf_lambda_max_um: 0.55
pdaf_lambda_values_um: [0.45, 0.453448275862069, 0.45689655172413796, 0.46034482758620693, 0.4637931034482759, 0.4672413793103448, 0.4706896551724138, 0.47413793103448276, 0.47758620689655173, 0.4810344827586207, 0.4844827586206897, 0.48793103448275865, 0.4913793103448276, 0.4948275862068966, 0.49827586206896557, 0.5017241379310345, 0.5051724137931035, 0.5086206896551725, 0.5120689655172415, 0.5155172413793103, 0.5189655172413794, 0.5224137931034483, 0.5258620689655172, 0.5293103448275862, 0.5327586206896552, 0.5362068965517242, 0.5396551724137931, 0.5431034482758621, 0.5465517241379311, 0.55]
pdaf_max_intensity_by_wavelength: [36.53530864197531, 35.98175136260464, 35.440680099679604, 34.91172214507147, 34.394518594270394, 33.88872373742188, 33.39400448147702, 32.9100398016529, 32.436520220516364, 31.973147313112626, 31.519633236661136, 31.075700283434678, 30.641080455524776, 30.21551506027753, 29.798754325259512, 29.39055703168361, 28.990690165290218, 28.598928583740303, 28.215054699633825, 27.838858178320162, 27.470135649716887, 27.108690433399783, 26.754332276269828, 26.40687710214432, 26.066146772656342, 25.73196885888277, 25.404176423154265, 25.082607810531623, 24.767106449462133, 24.457520661157027]

#* Forward (Input) Source Properties
lateral_aperture_um: 2.244
src_maximum_vertical_um: 2.89
src_minimum_vertical_um: -2.1675
mid_lambda_um: 0.6
gaussian_waist_radius_um: 1
source_angle_theta_rad: 0.0
source_angle_theta_deg: 0.0

#* Adjoint Source Properties
adjoint_vertical_um: -1.5299999999999998
num_adjoint_sources: 2
adjoint_x_positions_um: [0.51, -0.51, -0.51, 0.51]
adjoint_y_positions_um: [0.51, 0.51, -0.51, -0.51]

#* Optimzation Properties
epoch_range_design_change_max: 0.09999999999999999
epoch_range_design_change_min: 0.05
spectral_focal_plane_map: [[0, 15], [15, 30], [30, 45], [15, 30]]
desired_peak_location_per_band: [0, 9, 19]
2024-02-28 17:16:25,191 - template_logger - INFO - Successfully saved output to runs\test_run\processed_config.yml
2024-02-28 17:16:31,084 - template_logger - INFO - Rendered Output:
{ 
    "info": {
        "name": "optimization",
        "path": "",
        "simulator_name": "LumericalFDTD",
        "coordinates": {}
    },

    "objects": {
        "FDTD": {
            
            "name": "FDTD",
            "obj_type": "fdtd",
            "properties": {
                "dimension": "2D",
                "x span": 3.06e-06,
                "y max": 3.3150000000000004e-06,
                "y min": -2.8049999999999994e-06,
                
                "simulation time": 6.000000000000001e-13,
                "index": 1.5
            }
        },
        "forward_src_x": {
            "name": "forward_src_x",
            "obj_type": "gaussian",
            "attached_monitor": 0,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 0,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
        "forward_src_y": {
            "name": "forward_src_y",
            "obj_type": "gaussian",
            "attached_monitor": 1,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 90,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
            "adj_src_0x": {
                "name": "adj_src_0x",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_0y": {
                "name": "adj_src_0y",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 0,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_1x": {
                "name": "adj_src_1x",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_1y": {
                "name": "adj_src_1y",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 0,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
        "focal_monitor_0": {
            "name": "focal_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": 5.1e-07,
                "y": -1.5299999999999998e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "focal_monitor_1": {
            "name": "focal_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": -5.1e-07,
                "y": -1.5299999999999998e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_0": {
            "name": "transmission_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": 5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_1": {
            "name": "transmission_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": -5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },

        "transmission_focal_monitor_": {
            "name": "transmission_focal_monitor_",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": 0,
                "x span": 2.04e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "PEC_screen": {
            "name": "PEC_screen",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 3.5904e-06,
                "y min": 2.193e-06,
                "y max": 2.346e-06,
                
                "material": "PEC (Perfect Electrical Conductor)"
            }
        },
        "source_aperture": {
            "name": "source_aperture",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 2.04e-06,
                "y min": 2.193e-06,
                "y max": 2.346e-06,
                
                "index": 1.5
            }
        },
        "design_import": {
            "name": "design_import",
            "obj_type": "import",
            "dev_id": 0,                
            "properties": {
                "x span": 2.04e-06,
                "y min": 0.0,
                "y max": 2.04e-06
                
            }
        },
        "design_mesh": {
            "name": "design_mesh",
            "obj_type": "mesh",
            "dev_id": 0,
            "properties": {
                "x": 0,
                "x span": 3.06e-06,
                "y min": -5e-07,
                "y max": 2.54e-06,
                
                "dx": 5.0999999999999993e-08,
                "dy": 5.0999999999999993e-08,
                "dz": 5.0999999999999993e-08
            }
        },
        "design_index_monitor": {
            "name": "design_index_monitor",
            "obj_type": "index",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "2D Z-Normal",
                "y min": 0.0,
                "y max": 2.04e-06,
                
                "spatial interpolation": "nearest mesh cell"
            }
        },
        "design_efield_monitor": {
            "name": "design_efield_monitor",
            "obj_type": "profile",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "2D Z-Normal",
                "y min": 0.0,
                "y max": 2.04e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "frequency points": 30,
                "output Hx": 0,
                "output Hy": 0,
                "output Hz": 0
            }
        }
    }
}
2024-02-28 17:16:31,089 - template_logger - INFO - Successfully saved output to runs\test_run\sim.json
2024-02-28 17:30:14,109 - template_logger - INFO - Rendered Output:
#* Original Properties

start_from_step: 0
shelf_fn: save_state
restart_epoch: 0
restart_iter: 0
lumapi_filepath_local: C:\Program Files\Lumerical\v212\api\python\lumapi.py
lumapi_filepath_hpc: /central/home/ifoo/lumerical/2021a_r22/api/python/lumapi.py
simulator_name: LumericalFDTD
simulator_dimension: 2D
simulator_max_wait_time: 3600
use_autograd: False
convert_existing: False
mesh_spacing_um: 0.051
geometry_spacing_lateral_um: 0.085
device_scale_um: 0.051
use_smooth_blur: False
min_feature_size_um: 0.085
background_index: 1.5
min_device_index: 1.5
max_device_index: 2.4
init_permittivity_0_1_scale: 0.5
binarize_3_levels: False
focal_plane_center_lateral_um: 0
num_vertical_layers: 5
vertical_layer_height_um: 0.408
device_size_lateral_um: 2.04
device_vertical_minimum_um: 0
objects_above_device: []
num_sidewalls: 0
sidewall_material: etch
sidewall_extend_pml: False
sidewall_extend_focalplane: True
sidewall_thickness_um: 0.085
sidewall_vertical_minimum_um: -0.765
add_infrared: False
lambda_min_um: 0.45
lambda_max_um: 0.75
lambda_min_eval_um: 0.45
lambda_max_eval_um: 0.75
num_bands: 2
num_points_per_band: 15
num_dispersive_ranges: 1
add_pdaf: False
pdaf_angle_phi_degrees: 45
pdaf_angle_theta_degrees: -8
pdaf_adj_src_idx: 0
fdtd_simulation_time_fs: 600
weight_by_individual_wavelength: True
use_gaussian_sources: True
use_airy_approximation: True
f_number: 2.2
airy_correction_factor: 0.84
beam_size_multiplier: 1
source_angle_theta_vacuum_deg: 0
source_angle_phi_deg: 0
xy_phi_rotations: [0, 90]
xy_adjtheta_rotations: [90, 0]
xy_pol_rotations: [0, 90]
xy_names: ['x', 'y']
use_source_aperture: True
num_focal_spots: 2
dispersive_range_to_adjoint_src_map: [[0, 1, 2, 3]]
adjoint_src_to_dispersive_range_map: [0, 0, 0, 0]
enforce_xy_gradient_symmetry: False
weight_by_quadrant_transmission: True
num_epochs: 10
num_iterations_per_epoch: 30
total_num_iterations: 80
epoch_list: [0, 16, 32, 48, 64, 80]
optimizer_algorithm: ADAM
adam_betas: (0.9, 0.999)
use_fixed_step_size: True
fixed_step_size: 0.01
epoch_start_design_change_max: 0.15
epoch_end_design_change_max: 0.05
epoch_start_design_change_min: 0.05
epoch_end_design_change_min: 0
fom_types: ['transmission', 'intensity']
optimization_fom: intensity
reinterpolate_permittivity: True
reinterpolate_permittivity_factor: 2
reinterpolate_type: nearest
border_optimization: False
layer_gradient: False
flip_gradient: False
polarizations_focal_plane_map: [['x', 'y'], ['x', 'y'], ['x', 'y'], ['x', 'y']]
weight_focal_plane_map_performance_weighting: [1.0, 1.0, 1.0, 1.0]
weight_focal_plane_map: [1.0, 1.0, 1.0, 1.0]
do_green_balance: False
polarization_name_to_idx: {'x': 0, 'y': 1, 'z': 2}
desired_peaks_per_band_um: [0.45, 0.54, 0.65]
explicit_band_centering: True
shuffle_green: False
infrared_center_um: 0.94
do_rejection: False
softplus_kappa: 2
evaluate_bordered_extended: False
do_normalize: False
should_fix_layers: True
fixed_layers: [1, 3]
fixed_layers_density: 0
mpi_exe: C:\ProgramData\Miniconda3\envs\def2\Library\bin\mpiexec.exe
solver_exe: C:\Program Files\Lumerical\v212\bin\fdtd-engine-msmpi.exe
nprocs: 8
optimizer: AdamOptimizer
optimizer_settings: {'step_size': 0.01, 'betas': [0.9, 0.999], 'eps': '1e-8', 'moments': [0.0, 0.0]}
fom_dict: [{'fwd': [0], 'adj': [0], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}, {'fwd': [0], 'adj': [2], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}]
figures_of_merit: {'fom_0': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_0']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_0x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2, 3, 4, 5], 'weight': 1.0}, 'fom_1': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_y', 'focal_monitor_0']], 'grad_monitors': [['forward_src_y', 'design_efield_monitor'], ['adj_src_0y', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2, 3, 4, 5], 'weight': 1.0}}


#
# Derived Properties
#

#* Mesh Properties

min_feature_size_voxels: 1.0
blur_half_width_voxels: 0

#* Optical Properties
min_device_permittivity: 2.25
max_device_permittivity: 5.76
focal_length_um: 1.5299999999999998
focal_plane_center_vertical_um: -1.5299999999999998

#* Device Properties
vertical_layer_height_voxels: 8
device_size_vertical_um: 2.04
device_voxels_lateral: 24
device_voxels_vertical: 40
device_voxels_simulation_mesh_lateral: 41
device_voxels_simulation_mesh_vertical: 42
device_vertical_maximum_um: 2.04
device_size_lateral_bordered_um: 2.04
device_voxels_simulation_mesh_lateral_bordered: 41
border_size_um: 0.255
border_size_voxels: 3
device_voxels_lateral_bordered: 24

#* FDTD Properties

vertical_gap_size_um: 1.2750000000000001
lateral_gap_size_um: 0.51
fdtd_region_size_vertical_um: 6.119999999999999
fdtd_region_size_lateral_um: 3.06
fdtd_region_maximum_vertical_um: 3.3150000000000004
fdtd_region_minimum_vertical_um: -2.8049999999999997

#* Surrounding Properties
pec_aperture_thickness_um: 0.153
sidewall_x_positions_um: [1.0625, 0, -1.0625, 0]
sidewall_y_positions_um: [0, 1.0625, 0, -1.0625]
sidewall_xspan_positions_um: [0.085, 2.21, 0.085, 2.21]
sidewall_yspan_positions_um: [2.21, 0.085, 2.21, 0.085]

#* Spectral Properties
bandwidth_um: 0.3
num_design_frequency_points: 30
num_eval_frequency_points: 180
lambda_values_um: [0.45, 0.46034482758620693, 0.4706896551724138, 0.4810344827586207, 0.4913793103448276, 0.5017241379310345, 0.5120689655172413, 0.5224137931034483, 0.5327586206896552, 0.5431034482758621, 0.553448275862069, 0.5637931034482759, 0.5741379310344827, 0.5844827586206897, 0.5948275862068966, 0.6051724137931035, 0.6155172413793104, 0.6258620689655172, 0.6362068965517241, 0.646551724137931, 0.656896551724138, 0.6672413793103449, 0.6775862068965517, 0.6879310344827586, 0.6982758620689655, 0.7086206896551724, 0.7189655172413794, 0.7293103448275862, 0.7396551724137932, 0.75]
max_intensity_by_wavelength: [36.53530864197531, 34.91172214507147, 33.39400448147702, 31.973147313112626, 30.641080455524776, 29.39055703168361, 28.215054699633836, 27.108690433399783, 26.066146772656342, 25.082607810531623, 24.153703477256624, 23.275460913316312, 22.44426191957724, 21.65680563169482, 20.910075698382695, 20.201311352992263, 19.527981859410428, 18.887763889837522, 18.278521456217273, 17.698288071111115, 17.145250859390607, 16.617736380692932, 16.114197955312115, 15.633204314043255, 15.173429416247526, 14.733643300714537, 14.312703851307443, 13.90954937433284, 13.52319189745763, 13.152711111111115]
dispersive_range_size_um: 0.3
dispersive_ranges_um: [[0.45, 0.75]]

#* PDAF Functionality Properties
pdaf_focal_spot_x_um: 0.51
pdaf_focal_spot_y_um: 0.51
pdaf_lambda_min_um: 0.45
pdaf_lambda_max_um: 0.55
pdaf_lambda_values_um: [0.45, 0.453448275862069, 0.45689655172413796, 0.46034482758620693, 0.4637931034482759, 0.4672413793103448, 0.4706896551724138, 0.47413793103448276, 0.47758620689655173, 0.4810344827586207, 0.4844827586206897, 0.48793103448275865, 0.4913793103448276, 0.4948275862068966, 0.49827586206896557, 0.5017241379310345, 0.5051724137931035, 0.5086206896551725, 0.5120689655172415, 0.5155172413793103, 0.5189655172413794, 0.5224137931034483, 0.5258620689655172, 0.5293103448275862, 0.5327586206896552, 0.5362068965517242, 0.5396551724137931, 0.5431034482758621, 0.5465517241379311, 0.55]
pdaf_max_intensity_by_wavelength: [36.53530864197531, 35.98175136260464, 35.440680099679604, 34.91172214507147, 34.394518594270394, 33.88872373742188, 33.39400448147702, 32.9100398016529, 32.436520220516364, 31.973147313112626, 31.519633236661136, 31.075700283434678, 30.641080455524776, 30.21551506027753, 29.798754325259512, 29.39055703168361, 28.990690165290218, 28.598928583740303, 28.215054699633825, 27.838858178320162, 27.470135649716887, 27.108690433399783, 26.754332276269828, 26.40687710214432, 26.066146772656342, 25.73196885888277, 25.404176423154265, 25.082607810531623, 24.767106449462133, 24.457520661157027]

#* Forward (Input) Source Properties
lateral_aperture_um: 2.244
src_maximum_vertical_um: 2.89
src_minimum_vertical_um: -2.1675
mid_lambda_um: 0.6
gaussian_waist_radius_um: 1
source_angle_theta_rad: 0.0
source_angle_theta_deg: 0.0

#* Adjoint Source Properties
adjoint_vertical_um: -1.5299999999999998
num_adjoint_sources: 2
adjoint_x_positions_um: [0.51, -0.51, -0.51, 0.51]
adjoint_y_positions_um: [0.51, 0.51, -0.51, -0.51]

#* Optimzation Properties
epoch_range_design_change_max: 0.09999999999999999
epoch_range_design_change_min: 0.05
spectral_focal_plane_map: [[0, 15], [15, 30], [30, 45], [15, 30]]
desired_peak_location_per_band: [0, 9, 19]
2024-02-28 17:30:14,113 - template_logger - INFO - Successfully saved output to runs\test_run\processed_config.yml
2024-02-28 17:30:19,882 - template_logger - INFO - Rendered Output:
{ 
    "info": {
        "name": "optimization",
        "path": "",
        "simulator_name": "LumericalFDTD",
        "coordinates": {}
    },

    "objects": {
        "FDTD": {
            
            "name": "FDTD",
            "obj_type": "fdtd",
            "properties": {
                "dimension": "2D",
                "x span": 3.06e-06,
                "y max": 3.3150000000000004e-06,
                "y min": -2.8049999999999994e-06,
                
                "simulation time": 6.000000000000001e-13,
                "index": 1.5
            }
        },
        "forward_src_x": {
            "name": "forward_src_x",
            "obj_type": "gaussian",
            "attached_monitor": 0,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 0,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
        "forward_src_y": {
            "name": "forward_src_y",
            "obj_type": "gaussian",
            "attached_monitor": 1,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 90,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
            "adj_src_0x": {
                "name": "adj_src_0x",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_0y": {
                "name": "adj_src_0y",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 0,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_1x": {
                "name": "adj_src_1x",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_1y": {
                "name": "adj_src_1y",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 0,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
        "focal_monitor_0": {
            "name": "focal_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": 5.1e-07,
                "y": -1.5299999999999998e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "focal_monitor_1": {
            "name": "focal_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": -5.1e-07,
                "y": -1.5299999999999998e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_0": {
            "name": "transmission_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": 5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_1": {
            "name": "transmission_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": -5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },

        "transmission_focal_monitor_": {
            "name": "transmission_focal_monitor_",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": 0,
                "x span": 2.04e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "PEC_screen": {
            "name": "PEC_screen",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 3.5904e-06,
                "y min": 2.193e-06,
                "y max": 2.346e-06,
                
                "material": "PEC (Perfect Electrical Conductor)"
            }
        },
        "source_aperture": {
            "name": "source_aperture",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 2.04e-06,
                "y min": 2.193e-06,
                "y max": 2.346e-06,
                
                "index": 1.5
            }
        },
        "design_import": {
            "name": "design_import",
            "obj_type": "import",
            "dev_id": 0,                
            "properties": {
                "x span": 2.04e-06,
                "y min": 0.0,
                "y max": 2.04e-06
                
            }
        },
        "design_mesh": {
            "name": "design_mesh",
            "obj_type": "mesh",
            "dev_id": 0,
            "properties": {
                "x": 0,
                "x span": 3.06e-06,
                "y min": -5e-07,
                "y max": 2.54e-06,
                
                "dx": 5.0999999999999993e-08,
                "dy": 5.0999999999999993e-08,
                "dz": 5.0999999999999993e-08
            }
        },
        "design_index_monitor": {
            "name": "design_index_monitor",
            "obj_type": "index",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "2D Z-Normal",
                "y min": 0.0,
                "y max": 2.04e-06,
                
                "spatial interpolation": "nearest mesh cell"
            }
        },
        "design_efield_monitor": {
            "name": "design_efield_monitor",
            "obj_type": "profile",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "2D Z-Normal",
                "y min": 0.0,
                "y max": 2.04e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "frequency points": 30,
                "output Hx": 0,
                "output Hy": 0,
                "output Hz": 0
            }
        }
    }
}
2024-02-28 17:30:19,886 - template_logger - INFO - Successfully saved output to runs\test_run\sim.json
2024-02-28 17:39:18,494 - template_logger - INFO - Rendered Output:
#* Original Properties

start_from_step: 0
shelf_fn: save_state
restart_epoch: 0
restart_iter: 0
lumapi_filepath_local: C:\Program Files\Lumerical\v212\api\python\lumapi.py
lumapi_filepath_hpc: /central/home/ifoo/lumerical/2021a_r22/api/python/lumapi.py
simulator_name: LumericalFDTD
simulator_dimension: 2D
simulator_max_wait_time: 3600
use_autograd: False
convert_existing: False
mesh_spacing_um: 0.051
geometry_spacing_lateral_um: 0.085
device_scale_um: 0.051
use_smooth_blur: False
min_feature_size_um: 0.085
background_index: 1.5
min_device_index: 1.5
max_device_index: 2.4
init_permittivity_0_1_scale: 0.5
binarize_3_levels: False
focal_plane_center_lateral_um: 0
num_vertical_layers: 5
vertical_layer_height_um: 0.408
device_size_lateral_um: 2.04
device_vertical_minimum_um: 0
objects_above_device: []
num_sidewalls: 0
sidewall_material: etch
sidewall_extend_pml: False
sidewall_extend_focalplane: True
sidewall_thickness_um: 0.085
sidewall_vertical_minimum_um: -0.765
add_infrared: False
lambda_min_um: 0.45
lambda_max_um: 0.75
lambda_min_eval_um: 0.45
lambda_max_eval_um: 0.75
num_bands: 2
num_points_per_band: 15
num_dispersive_ranges: 1
add_pdaf: False
pdaf_angle_phi_degrees: 45
pdaf_angle_theta_degrees: -8
pdaf_adj_src_idx: 0
fdtd_simulation_time_fs: 600
weight_by_individual_wavelength: True
use_gaussian_sources: True
use_airy_approximation: True
f_number: 2.2
airy_correction_factor: 0.84
beam_size_multiplier: 1
source_angle_theta_vacuum_deg: 0
source_angle_phi_deg: 0
xy_phi_rotations: [0, 90]
xy_adjtheta_rotations: [90, 0]
xy_pol_rotations: [0, 90]
xy_names: ['x', 'y']
use_source_aperture: True
num_focal_spots: 2
dispersive_range_to_adjoint_src_map: [[0, 1, 2, 3]]
adjoint_src_to_dispersive_range_map: [0, 0, 0, 0]
enforce_xy_gradient_symmetry: False
weight_by_quadrant_transmission: True
num_epochs: 10
num_iterations_per_epoch: 30
total_num_iterations: 80
epoch_list: [0, 16, 32, 48, 64, 80]
optimizer_algorithm: ADAM
adam_betas: (0.9, 0.999)
use_fixed_step_size: True
fixed_step_size: 0.01
epoch_start_design_change_max: 0.15
epoch_end_design_change_max: 0.05
epoch_start_design_change_min: 0.05
epoch_end_design_change_min: 0
fom_types: ['transmission', 'intensity']
optimization_fom: intensity
reinterpolate_permittivity: True
reinterpolate_permittivity_factor: 2
reinterpolate_type: nearest
border_optimization: False
layer_gradient: False
flip_gradient: False
polarizations_focal_plane_map: [['x', 'y'], ['x', 'y'], ['x', 'y'], ['x', 'y']]
weight_focal_plane_map_performance_weighting: [1.0, 1.0, 1.0, 1.0]
weight_focal_plane_map: [1.0, 1.0, 1.0, 1.0]
do_green_balance: False
polarization_name_to_idx: {'x': 0, 'y': 1, 'z': 2}
desired_peaks_per_band_um: [0.45, 0.54, 0.65]
explicit_band_centering: True
shuffle_green: False
infrared_center_um: 0.94
do_rejection: False
softplus_kappa: 2
evaluate_bordered_extended: False
do_normalize: False
should_fix_layers: True
fixed_layers: [1, 3]
fixed_layers_density: 0
mpi_exe: C:\ProgramData\Miniconda3\envs\def2\Library\bin\mpiexec.exe
solver_exe: C:\Program Files\Lumerical\v212\bin\fdtd-engine-msmpi.exe
nprocs: 8
optimizer: AdamOptimizer
optimizer_settings: {'step_size': 0.01, 'betas': [0.9, 0.999], 'eps': '1e-8', 'moments': [0.0, 0.0]}
fom_dict: [{'fwd': [0], 'adj': [0], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}, {'fwd': [0], 'adj': [2], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}]
figures_of_merit: {'fom_0': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_0']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_0x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29], 'weight': 1.0}, 'fom_1': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_y', 'focal_monitor_0']], 'grad_monitors': [['forward_src_y', 'design_efield_monitor'], ['adj_src_0y', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29], 'weight': 1.0}}


#
# Derived Properties
#

#* Mesh Properties

min_feature_size_voxels: 1.0
blur_half_width_voxels: 0

#* Optical Properties
min_device_permittivity: 2.25
max_device_permittivity: 5.76
focal_length_um: 1.5299999999999998
focal_plane_center_vertical_um: -1.5299999999999998

#* Device Properties
vertical_layer_height_voxels: 8
device_size_vertical_um: 2.04
device_voxels_lateral: 24
device_voxels_vertical: 40
device_voxels_simulation_mesh_lateral: 41
device_voxels_simulation_mesh_vertical: 42
device_vertical_maximum_um: 2.04
device_size_lateral_bordered_um: 2.04
device_voxels_simulation_mesh_lateral_bordered: 41
border_size_um: 0.255
border_size_voxels: 3
device_voxels_lateral_bordered: 24

#* FDTD Properties

vertical_gap_size_um: 1.2750000000000001
lateral_gap_size_um: 0.51
fdtd_region_size_vertical_um: 6.119999999999999
fdtd_region_size_lateral_um: 3.06
fdtd_region_maximum_vertical_um: 3.3150000000000004
fdtd_region_minimum_vertical_um: -2.8049999999999997

#* Surrounding Properties
pec_aperture_thickness_um: 0.153
sidewall_x_positions_um: [1.0625, 0, -1.0625, 0]
sidewall_y_positions_um: [0, 1.0625, 0, -1.0625]
sidewall_xspan_positions_um: [0.085, 2.21, 0.085, 2.21]
sidewall_yspan_positions_um: [2.21, 0.085, 2.21, 0.085]

#* Spectral Properties
bandwidth_um: 0.3
num_design_frequency_points: 30
num_eval_frequency_points: 180
lambda_values_um: [0.45, 0.46034482758620693, 0.4706896551724138, 0.4810344827586207, 0.4913793103448276, 0.5017241379310345, 0.5120689655172413, 0.5224137931034483, 0.5327586206896552, 0.5431034482758621, 0.553448275862069, 0.5637931034482759, 0.5741379310344827, 0.5844827586206897, 0.5948275862068966, 0.6051724137931035, 0.6155172413793104, 0.6258620689655172, 0.6362068965517241, 0.646551724137931, 0.656896551724138, 0.6672413793103449, 0.6775862068965517, 0.6879310344827586, 0.6982758620689655, 0.7086206896551724, 0.7189655172413794, 0.7293103448275862, 0.7396551724137932, 0.75]
max_intensity_by_wavelength: [36.53530864197531, 34.91172214507147, 33.39400448147702, 31.973147313112626, 30.641080455524776, 29.39055703168361, 28.215054699633836, 27.108690433399783, 26.066146772656342, 25.082607810531623, 24.153703477256624, 23.275460913316312, 22.44426191957724, 21.65680563169482, 20.910075698382695, 20.201311352992263, 19.527981859410428, 18.887763889837522, 18.278521456217273, 17.698288071111115, 17.145250859390607, 16.617736380692932, 16.114197955312115, 15.633204314043255, 15.173429416247526, 14.733643300714537, 14.312703851307443, 13.90954937433284, 13.52319189745763, 13.152711111111115]
dispersive_range_size_um: 0.3
dispersive_ranges_um: [[0.45, 0.75]]

#* PDAF Functionality Properties
pdaf_focal_spot_x_um: 0.51
pdaf_focal_spot_y_um: 0.51
pdaf_lambda_min_um: 0.45
pdaf_lambda_max_um: 0.55
pdaf_lambda_values_um: [0.45, 0.453448275862069, 0.45689655172413796, 0.46034482758620693, 0.4637931034482759, 0.4672413793103448, 0.4706896551724138, 0.47413793103448276, 0.47758620689655173, 0.4810344827586207, 0.4844827586206897, 0.48793103448275865, 0.4913793103448276, 0.4948275862068966, 0.49827586206896557, 0.5017241379310345, 0.5051724137931035, 0.5086206896551725, 0.5120689655172415, 0.5155172413793103, 0.5189655172413794, 0.5224137931034483, 0.5258620689655172, 0.5293103448275862, 0.5327586206896552, 0.5362068965517242, 0.5396551724137931, 0.5431034482758621, 0.5465517241379311, 0.55]
pdaf_max_intensity_by_wavelength: [36.53530864197531, 35.98175136260464, 35.440680099679604, 34.91172214507147, 34.394518594270394, 33.88872373742188, 33.39400448147702, 32.9100398016529, 32.436520220516364, 31.973147313112626, 31.519633236661136, 31.075700283434678, 30.641080455524776, 30.21551506027753, 29.798754325259512, 29.39055703168361, 28.990690165290218, 28.598928583740303, 28.215054699633825, 27.838858178320162, 27.470135649716887, 27.108690433399783, 26.754332276269828, 26.40687710214432, 26.066146772656342, 25.73196885888277, 25.404176423154265, 25.082607810531623, 24.767106449462133, 24.457520661157027]

#* Forward (Input) Source Properties
lateral_aperture_um: 2.244
src_maximum_vertical_um: 2.89
src_minimum_vertical_um: -2.1675
mid_lambda_um: 0.6
gaussian_waist_radius_um: 1
source_angle_theta_rad: 0.0
source_angle_theta_deg: 0.0

#* Adjoint Source Properties
adjoint_vertical_um: -1.5299999999999998
num_adjoint_sources: 2
adjoint_x_positions_um: [0.51, -0.51, -0.51, 0.51]
adjoint_y_positions_um: [0.51, 0.51, -0.51, -0.51]

#* Optimzation Properties
epoch_range_design_change_max: 0.09999999999999999
epoch_range_design_change_min: 0.05
spectral_focal_plane_map: [[0, 15], [15, 30], [30, 45], [15, 30]]
desired_peak_location_per_band: [0, 9, 19]
2024-02-28 17:39:18,497 - template_logger - INFO - Successfully saved output to runs\test_run\processed_config.yml
2024-02-28 17:39:24,672 - template_logger - INFO - Rendered Output:
{ 
    "info": {
        "name": "optimization",
        "path": "",
        "simulator_name": "LumericalFDTD",
        "coordinates": {}
    },

    "objects": {
        "FDTD": {
            
            "name": "FDTD",
            "obj_type": "fdtd",
            "properties": {
                "dimension": "2D",
                "x span": 3.06e-06,
                "y max": 3.3150000000000004e-06,
                "y min": -2.8049999999999994e-06,
                
                "simulation time": 6.000000000000001e-13,
                "index": 1.5
            }
        },
        "forward_src_x": {
            "name": "forward_src_x",
            "obj_type": "gaussian",
            "attached_monitor": 0,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 0,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
        "forward_src_y": {
            "name": "forward_src_y",
            "obj_type": "gaussian",
            "attached_monitor": 1,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 90,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
            "adj_src_0x": {
                "name": "adj_src_0x",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_0y": {
                "name": "adj_src_0y",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 0,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_1x": {
                "name": "adj_src_1x",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_1y": {
                "name": "adj_src_1y",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 0,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
        "focal_monitor_0": {
            "name": "focal_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": 5.1e-07,
                "y": -1.5299999999999998e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "focal_monitor_1": {
            "name": "focal_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": -5.1e-07,
                "y": -1.5299999999999998e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_0": {
            "name": "transmission_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": 5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_1": {
            "name": "transmission_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": -5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },

        "transmission_focal_monitor_": {
            "name": "transmission_focal_monitor_",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": 0,
                "x span": 2.04e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "PEC_screen": {
            "name": "PEC_screen",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 3.5904e-06,
                "y min": 2.193e-06,
                "y max": 2.346e-06,
                
                "material": "PEC (Perfect Electrical Conductor)"
            }
        },
        "source_aperture": {
            "name": "source_aperture",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 2.04e-06,
                "y min": 2.193e-06,
                "y max": 2.346e-06,
                
                "index": 1.5
            }
        },
        "design_import": {
            "name": "design_import",
            "obj_type": "import",
            "dev_id": 0,                
            "properties": {
                "x span": 2.04e-06,
                "y min": 0.0,
                "y max": 2.04e-06
                
            }
        },
        "design_mesh": {
            "name": "design_mesh",
            "obj_type": "mesh",
            "dev_id": 0,
            "properties": {
                "x": 0,
                "x span": 3.06e-06,
                "y min": -5e-07,
                "y max": 2.54e-06,
                
                "dx": 5.0999999999999993e-08,
                "dy": 5.0999999999999993e-08,
                "dz": 5.0999999999999993e-08
            }
        },
        "design_index_monitor": {
            "name": "design_index_monitor",
            "obj_type": "index",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "2D Z-Normal",
                "y min": 0.0,
                "y max": 2.04e-06,
                
                "spatial interpolation": "nearest mesh cell"
            }
        },
        "design_efield_monitor": {
            "name": "design_efield_monitor",
            "obj_type": "profile",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "2D Z-Normal",
                "y min": 0.0,
                "y max": 2.04e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "frequency points": 30,
                "output Hx": 0,
                "output Hy": 0,
                "output Hz": 0
            }
        }
    }
}
2024-02-28 17:39:24,676 - template_logger - INFO - Successfully saved output to runs\test_run\sim.json
2024-02-28 19:00:52,506 - template_logger - INFO - Rendered Output:
#* Original Properties

start_from_step: 0
shelf_fn: save_state
restart_epoch: 0
restart_iter: 0
lumapi_filepath_local: C:\Program Files\Lumerical\v212\api\python\lumapi.py
lumapi_filepath_hpc: /central/home/ifoo/lumerical/2021a_r22/api/python/lumapi.py
simulator_name: LumericalFDTD
simulator_dimension: 2D
simulator_max_wait_time: 3600
use_autograd: False
convert_existing: False
mesh_spacing_um: 0.051
geometry_spacing_lateral_um: 0.085
device_scale_um: 0.051
use_smooth_blur: False
min_feature_size_um: 0.085
background_index: 1.5
min_device_index: 1.5
max_device_index: 2.4
init_permittivity_0_1_scale: 0.5
binarize_3_levels: False
focal_plane_center_lateral_um: 0
num_vertical_layers: 5
vertical_layer_height_um: 0.408
device_size_lateral_um: 2.04
device_vertical_minimum_um: 0
objects_above_device: []
num_sidewalls: 0
sidewall_material: etch
sidewall_extend_pml: False
sidewall_extend_focalplane: True
sidewall_thickness_um: 0.085
sidewall_vertical_minimum_um: -0.765
add_infrared: False
lambda_min_um: 0.45
lambda_max_um: 0.75
lambda_min_eval_um: 0.45
lambda_max_eval_um: 0.75
num_bands: 2
num_points_per_band: 15
num_dispersive_ranges: 1
add_pdaf: False
pdaf_angle_phi_degrees: 45
pdaf_angle_theta_degrees: -8
pdaf_adj_src_idx: 0
fdtd_simulation_time_fs: 600
weight_by_individual_wavelength: True
use_gaussian_sources: True
use_airy_approximation: True
f_number: 2.2
airy_correction_factor: 0.84
beam_size_multiplier: 1
source_angle_theta_vacuum_deg: 0
source_angle_phi_deg: 0
xy_phi_rotations: [0, 90]
xy_adjtheta_rotations: [90, 0]
xy_pol_rotations: [0, 90]
xy_names: ['x', 'y']
use_source_aperture: True
num_focal_spots: 2
dispersive_range_to_adjoint_src_map: [[0, 1, 2, 3]]
adjoint_src_to_dispersive_range_map: [0, 0, 0, 0]
enforce_xy_gradient_symmetry: False
weight_by_quadrant_transmission: True
max_epochs: 1
iter_per_epoch: 100
num_epochs: 10
num_iterations_per_epoch: 30
total_num_iterations: 80
epoch_list: [0, 16, 32, 48, 64, 80]
optimizer_algorithm: ADAM
adam_betas: (0.9, 0.999)
use_fixed_step_size: True
fixed_step_size: 0.01
epoch_start_design_change_max: 0.15
epoch_end_design_change_max: 0.05
epoch_start_design_change_min: 0.05
epoch_end_design_change_min: 0
fom_types: ['transmission', 'intensity']
optimization_fom: intensity
reinterpolate_permittivity: True
reinterpolate_permittivity_factor: 2
reinterpolate_type: nearest
border_optimization: False
layer_gradient: False
flip_gradient: False
polarizations_focal_plane_map: [['x', 'y'], ['x', 'y'], ['x', 'y'], ['x', 'y']]
weight_focal_plane_map_performance_weighting: [1.0, 1.0, 1.0, 1.0]
weight_focal_plane_map: [1.0, 1.0, 1.0, 1.0]
do_green_balance: False
polarization_name_to_idx: {'x': 0, 'y': 1, 'z': 2}
desired_peaks_per_band_um: [0.45, 0.54, 0.65]
explicit_band_centering: True
shuffle_green: False
infrared_center_um: 0.94
do_rejection: False
softplus_kappa: 2
evaluate_bordered_extended: False
do_normalize: False
should_fix_layers: True
fixed_layers: [1, 3]
fixed_layers_density: 0
mpi_exe: C:\ProgramData\Miniconda3\envs\def2\Library\bin\mpiexec.exe
solver_exe: C:\Program Files\Lumerical\v212\bin\fdtd-engine-msmpi.exe
nprocs: 8
optimizer: AdamOptimizer
optimizer_settings: {'step_size': 0.01, 'betas': [0.9, 0.999], 'eps': '1e-8', 'moments': [0.0, 0.0]}
fom_dict: [{'fwd': [0], 'adj': [0], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}, {'fwd': [0], 'adj': [2], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}]
figures_of_merit: {'fom_0': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_0']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_0x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29], 'weight': 1.0}, 'fom_1': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_y', 'focal_monitor_0']], 'grad_monitors': [['forward_src_y', 'design_efield_monitor'], ['adj_src_0y', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29], 'weight': 1.0}}


#
# Derived Properties
#

#* Mesh Properties

min_feature_size_voxels: 1.0
blur_half_width_voxels: 0

#* Optical Properties
min_device_permittivity: 2.25
max_device_permittivity: 5.76
focal_length_um: 1.5299999999999998
focal_plane_center_vertical_um: -1.5299999999999998

#* Device Properties
vertical_layer_height_voxels: 8
device_size_vertical_um: 2.04
device_voxels_lateral: 24
device_voxels_vertical: 40
device_voxels_simulation_mesh_lateral: 41
device_voxels_simulation_mesh_vertical: 42
device_vertical_maximum_um: 2.04
device_size_lateral_bordered_um: 2.04
device_voxels_simulation_mesh_lateral_bordered: 41
border_size_um: 0.255
border_size_voxels: 3
device_voxels_lateral_bordered: 24

#* FDTD Properties

vertical_gap_size_um: 1.2750000000000001
lateral_gap_size_um: 0.51
fdtd_region_size_vertical_um: 6.119999999999999
fdtd_region_size_lateral_um: 3.06
fdtd_region_maximum_vertical_um: 3.3150000000000004
fdtd_region_minimum_vertical_um: -2.8049999999999997

#* Surrounding Properties
pec_aperture_thickness_um: 0.153
sidewall_x_positions_um: [1.0625, 0, -1.0625, 0]
sidewall_y_positions_um: [0, 1.0625, 0, -1.0625]
sidewall_xspan_positions_um: [0.085, 2.21, 0.085, 2.21]
sidewall_yspan_positions_um: [2.21, 0.085, 2.21, 0.085]

#* Spectral Properties
bandwidth_um: 0.3
num_design_frequency_points: 30
num_eval_frequency_points: 180
lambda_values_um: [0.45, 0.46034482758620693, 0.4706896551724138, 0.4810344827586207, 0.4913793103448276, 0.5017241379310345, 0.5120689655172413, 0.5224137931034483, 0.5327586206896552, 0.5431034482758621, 0.553448275862069, 0.5637931034482759, 0.5741379310344827, 0.5844827586206897, 0.5948275862068966, 0.6051724137931035, 0.6155172413793104, 0.6258620689655172, 0.6362068965517241, 0.646551724137931, 0.656896551724138, 0.6672413793103449, 0.6775862068965517, 0.6879310344827586, 0.6982758620689655, 0.7086206896551724, 0.7189655172413794, 0.7293103448275862, 0.7396551724137932, 0.75]
max_intensity_by_wavelength: [36.53530864197531, 34.91172214507147, 33.39400448147702, 31.973147313112626, 30.641080455524776, 29.39055703168361, 28.215054699633836, 27.108690433399783, 26.066146772656342, 25.082607810531623, 24.153703477256624, 23.275460913316312, 22.44426191957724, 21.65680563169482, 20.910075698382695, 20.201311352992263, 19.527981859410428, 18.887763889837522, 18.278521456217273, 17.698288071111115, 17.145250859390607, 16.617736380692932, 16.114197955312115, 15.633204314043255, 15.173429416247526, 14.733643300714537, 14.312703851307443, 13.90954937433284, 13.52319189745763, 13.152711111111115]
dispersive_range_size_um: 0.3
dispersive_ranges_um: [[0.45, 0.75]]

#* PDAF Functionality Properties
pdaf_focal_spot_x_um: 0.51
pdaf_focal_spot_y_um: 0.51
pdaf_lambda_min_um: 0.45
pdaf_lambda_max_um: 0.55
pdaf_lambda_values_um: [0.45, 0.453448275862069, 0.45689655172413796, 0.46034482758620693, 0.4637931034482759, 0.4672413793103448, 0.4706896551724138, 0.47413793103448276, 0.47758620689655173, 0.4810344827586207, 0.4844827586206897, 0.48793103448275865, 0.4913793103448276, 0.4948275862068966, 0.49827586206896557, 0.5017241379310345, 0.5051724137931035, 0.5086206896551725, 0.5120689655172415, 0.5155172413793103, 0.5189655172413794, 0.5224137931034483, 0.5258620689655172, 0.5293103448275862, 0.5327586206896552, 0.5362068965517242, 0.5396551724137931, 0.5431034482758621, 0.5465517241379311, 0.55]
pdaf_max_intensity_by_wavelength: [36.53530864197531, 35.98175136260464, 35.440680099679604, 34.91172214507147, 34.394518594270394, 33.88872373742188, 33.39400448147702, 32.9100398016529, 32.436520220516364, 31.973147313112626, 31.519633236661136, 31.075700283434678, 30.641080455524776, 30.21551506027753, 29.798754325259512, 29.39055703168361, 28.990690165290218, 28.598928583740303, 28.215054699633825, 27.838858178320162, 27.470135649716887, 27.108690433399783, 26.754332276269828, 26.40687710214432, 26.066146772656342, 25.73196885888277, 25.404176423154265, 25.082607810531623, 24.767106449462133, 24.457520661157027]

#* Forward (Input) Source Properties
lateral_aperture_um: 2.244
src_maximum_vertical_um: 2.89
src_minimum_vertical_um: -2.1675
mid_lambda_um: 0.6
gaussian_waist_radius_um: 1
source_angle_theta_rad: 0.0
source_angle_theta_deg: 0.0

#* Adjoint Source Properties
adjoint_vertical_um: -1.5299999999999998
num_adjoint_sources: 2
adjoint_x_positions_um: [0.51, -0.51, -0.51, 0.51]
adjoint_y_positions_um: [0.51, 0.51, -0.51, -0.51]

#* Optimzation Properties
epoch_range_design_change_max: 0.09999999999999999
epoch_range_design_change_min: 0.05
spectral_focal_plane_map: [[0, 15], [15, 30], [30, 45], [15, 30]]
desired_peak_location_per_band: [0, 9, 19]
2024-02-28 19:00:52,509 - template_logger - INFO - Successfully saved output to runs\test_run\processed_config.yml
2024-02-28 19:00:58,481 - template_logger - INFO - Rendered Output:
{ 
    "info": {
        "name": "optimization",
        "path": "",
        "simulator_name": "LumericalFDTD",
        "coordinates": {}
    },

    "objects": {
        "FDTD": {
            
            "name": "FDTD",
            "obj_type": "fdtd",
            "properties": {
                "dimension": "2D",
                "x span": 3.06e-06,
                "y max": 3.3150000000000004e-06,
                "y min": -2.8049999999999994e-06,
                
                "simulation time": 6.000000000000001e-13,
                "index": 1.5
            }
        },
        "forward_src_x": {
            "name": "forward_src_x",
            "obj_type": "gaussian",
            "attached_monitor": 0,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 0,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
        "forward_src_y": {
            "name": "forward_src_y",
            "obj_type": "gaussian",
            "attached_monitor": 1,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 90,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
            "adj_src_0x": {
                "name": "adj_src_0x",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_0y": {
                "name": "adj_src_0y",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 0,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_1x": {
                "name": "adj_src_1x",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_1y": {
                "name": "adj_src_1y",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 0,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
        "focal_monitor_0": {
            "name": "focal_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": 5.1e-07,
                "y": -1.5299999999999998e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "focal_monitor_1": {
            "name": "focal_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": -5.1e-07,
                "y": -1.5299999999999998e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_0": {
            "name": "transmission_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": 5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_1": {
            "name": "transmission_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": -5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },

        "transmission_focal_monitor_": {
            "name": "transmission_focal_monitor_",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": 0,
                "x span": 2.04e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "PEC_screen": {
            "name": "PEC_screen",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 3.5904e-06,
                "y min": 2.193e-06,
                "y max": 2.346e-06,
                
                "material": "PEC (Perfect Electrical Conductor)"
            }
        },
        "source_aperture": {
            "name": "source_aperture",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 2.04e-06,
                "y min": 2.193e-06,
                "y max": 2.346e-06,
                
                "index": 1.5
            }
        },
        "design_import": {
            "name": "design_import",
            "obj_type": "import",
            "dev_id": 0,                
            "properties": {
                "x span": 2.04e-06,
                "y min": 0.0,
                "y max": 2.04e-06
                
            }
        },
        "design_mesh": {
            "name": "design_mesh",
            "obj_type": "mesh",
            "dev_id": 0,
            "properties": {
                "x": 0,
                "x span": 3.06e-06,
                "y min": -5e-07,
                "y max": 2.54e-06,
                
                "dx": 5.0999999999999993e-08,
                "dy": 5.0999999999999993e-08,
                "dz": 5.0999999999999993e-08
            }
        },
        "design_index_monitor": {
            "name": "design_index_monitor",
            "obj_type": "index",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "2D Z-Normal",
                "y min": 0.0,
                "y max": 2.04e-06,
                
                "spatial interpolation": "nearest mesh cell"
            }
        },
        "design_efield_monitor": {
            "name": "design_efield_monitor",
            "obj_type": "profile",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "2D Z-Normal",
                "y min": 0.0,
                "y max": 2.04e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "frequency points": 30,
                "output Hx": 0,
                "output Hy": 0,
                "output Hz": 0
            }
        }
    }
}
2024-02-28 19:00:58,484 - template_logger - INFO - Successfully saved output to runs\test_run\sim.json
2024-02-28 19:48:24,742 - template_logger - INFO - Rendered Output:
#* Original Properties

start_from_step: 0
shelf_fn: save_state
restart_epoch: 0
restart_iter: 0
lumapi_filepath_local: C:\Program Files\Lumerical\v212\api\python\lumapi.py
lumapi_filepath_hpc: /central/home/ifoo/lumerical/2021a_r22/api/python/lumapi.py
simulator_name: LumericalFDTD
simulator_dimension: 2D
simulator_max_wait_time: 3600
use_autograd: False
convert_existing: False
mesh_spacing_um: 0.051
geometry_spacing_lateral_um: 0.085
device_scale_um: 0.051
use_smooth_blur: False
min_feature_size_um: 0.085
background_index: 1.5
min_device_index: 1.5
max_device_index: 2.4
init_permittivity_0_1_scale: 0.5
binarize_3_levels: False
focal_plane_center_lateral_um: 0
num_vertical_layers: 5
vertical_layer_height_um: 0.408
device_size_lateral_um: 2.04
device_vertical_minimum_um: 0
objects_above_device: []
num_sidewalls: 0
sidewall_material: etch
sidewall_extend_pml: False
sidewall_extend_focalplane: True
sidewall_thickness_um: 0.085
sidewall_vertical_minimum_um: -0.765
add_infrared: False
lambda_min_um: 0.45
lambda_max_um: 0.75
lambda_min_eval_um: 0.45
lambda_max_eval_um: 0.75
num_bands: 2
num_points_per_band: 15
num_dispersive_ranges: 1
add_pdaf: False
pdaf_angle_phi_degrees: 45
pdaf_angle_theta_degrees: -8
pdaf_adj_src_idx: 0
fdtd_simulation_time_fs: 600
weight_by_individual_wavelength: True
use_gaussian_sources: True
use_airy_approximation: True
f_number: 2.2
airy_correction_factor: 0.84
beam_size_multiplier: 1
source_angle_theta_vacuum_deg: 0
source_angle_phi_deg: 0
xy_phi_rotations: [0, 90]
xy_adjtheta_rotations: [90, 0]
xy_pol_rotations: [0, 90]
xy_names: ['x', 'y']
use_source_aperture: True
num_focal_spots: 2
dispersive_range_to_adjoint_src_map: [[0, 1, 2, 3]]
adjoint_src_to_dispersive_range_map: [0, 0, 0, 0]
enforce_xy_gradient_symmetry: False
weight_by_quadrant_transmission: True
max_epochs: 1
iter_per_epoch: 100
num_epochs: 10
num_iterations_per_epoch: 30
total_num_iterations: 80
epoch_list: [0, 16, 32, 48, 64, 80]
optimizer_algorithm: ADAM
adam_betas: (0.9, 0.999)
use_fixed_step_size: True
fixed_step_size: 0.01
epoch_start_design_change_max: 0.15
epoch_end_design_change_max: 0.05
epoch_start_design_change_min: 0.05
epoch_end_design_change_min: 0
fom_types: ['transmission', 'intensity']
optimization_fom: intensity
reinterpolate_permittivity: True
reinterpolate_permittivity_factor: 2
reinterpolate_type: nearest
border_optimization: False
layer_gradient: False
flip_gradient: False
polarizations_focal_plane_map: [['x', 'y'], ['x', 'y'], ['x', 'y'], ['x', 'y']]
weight_focal_plane_map_performance_weighting: [1.0, 1.0, 1.0, 1.0]
weight_focal_plane_map: [1.0, 1.0, 1.0, 1.0]
do_green_balance: False
polarization_name_to_idx: {'x': 0, 'y': 1, 'z': 2}
desired_peaks_per_band_um: [0.45, 0.54, 0.65]
explicit_band_centering: True
shuffle_green: False
infrared_center_um: 0.94
do_rejection: False
softplus_kappa: 2
evaluate_bordered_extended: False
do_normalize: False
should_fix_layers: True
fixed_layers: [1, 3]
fixed_layers_density: 0
mpi_exe: C:\ProgramData\Miniconda3\envs\def2\Library\bin\mpiexec.exe
solver_exe: C:\Program Files\Lumerical\v212\bin\fdtd-engine-msmpi.exe
nprocs: 8
optimizer: AdamOptimizer
optimizer_settings: {'step_size': 0.01, 'betas': [0.9, 0.999], 'eps': '1e-8', 'moments': [0.0, 0.0]}
fom_dict: [{'fwd': [0], 'adj': [0], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}, {'fwd': [0], 'adj': [2], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}]
figures_of_merit: {'fom_0': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_0']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_0x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29], 'weight': 1.0}}


#
# Derived Properties
#

#* Mesh Properties

min_feature_size_voxels: 1.0
blur_half_width_voxels: 0

#* Optical Properties
min_device_permittivity: 2.25
max_device_permittivity: 5.76
focal_length_um: 1.5299999999999998
focal_plane_center_vertical_um: -1.5299999999999998

#* Device Properties
vertical_layer_height_voxels: 8
device_size_vertical_um: 2.04
device_voxels_lateral: 24
device_voxels_vertical: 40
device_voxels_simulation_mesh_lateral: 41
device_voxels_simulation_mesh_vertical: 42
device_vertical_maximum_um: 2.04
device_size_lateral_bordered_um: 2.04
device_voxels_simulation_mesh_lateral_bordered: 41
border_size_um: 0.255
border_size_voxels: 3
device_voxels_lateral_bordered: 24

#* FDTD Properties

vertical_gap_size_um: 1.2750000000000001
lateral_gap_size_um: 0.51
fdtd_region_size_vertical_um: 6.119999999999999
fdtd_region_size_lateral_um: 3.06
fdtd_region_maximum_vertical_um: 3.3150000000000004
fdtd_region_minimum_vertical_um: -2.8049999999999997

#* Surrounding Properties
pec_aperture_thickness_um: 0.153
sidewall_x_positions_um: [1.0625, 0, -1.0625, 0]
sidewall_y_positions_um: [0, 1.0625, 0, -1.0625]
sidewall_xspan_positions_um: [0.085, 2.21, 0.085, 2.21]
sidewall_yspan_positions_um: [2.21, 0.085, 2.21, 0.085]

#* Spectral Properties
bandwidth_um: 0.3
num_design_frequency_points: 30
num_eval_frequency_points: 180
lambda_values_um: [0.45, 0.46034482758620693, 0.4706896551724138, 0.4810344827586207, 0.4913793103448276, 0.5017241379310345, 0.5120689655172413, 0.5224137931034483, 0.5327586206896552, 0.5431034482758621, 0.553448275862069, 0.5637931034482759, 0.5741379310344827, 0.5844827586206897, 0.5948275862068966, 0.6051724137931035, 0.6155172413793104, 0.6258620689655172, 0.6362068965517241, 0.646551724137931, 0.656896551724138, 0.6672413793103449, 0.6775862068965517, 0.6879310344827586, 0.6982758620689655, 0.7086206896551724, 0.7189655172413794, 0.7293103448275862, 0.7396551724137932, 0.75]
max_intensity_by_wavelength: [36.53530864197531, 34.91172214507147, 33.39400448147702, 31.973147313112626, 30.641080455524776, 29.39055703168361, 28.215054699633836, 27.108690433399783, 26.066146772656342, 25.082607810531623, 24.153703477256624, 23.275460913316312, 22.44426191957724, 21.65680563169482, 20.910075698382695, 20.201311352992263, 19.527981859410428, 18.887763889837522, 18.278521456217273, 17.698288071111115, 17.145250859390607, 16.617736380692932, 16.114197955312115, 15.633204314043255, 15.173429416247526, 14.733643300714537, 14.312703851307443, 13.90954937433284, 13.52319189745763, 13.152711111111115]
dispersive_range_size_um: 0.3
dispersive_ranges_um: [[0.45, 0.75]]

#* PDAF Functionality Properties
pdaf_focal_spot_x_um: 0.51
pdaf_focal_spot_y_um: 0.51
pdaf_lambda_min_um: 0.45
pdaf_lambda_max_um: 0.55
pdaf_lambda_values_um: [0.45, 0.453448275862069, 0.45689655172413796, 0.46034482758620693, 0.4637931034482759, 0.4672413793103448, 0.4706896551724138, 0.47413793103448276, 0.47758620689655173, 0.4810344827586207, 0.4844827586206897, 0.48793103448275865, 0.4913793103448276, 0.4948275862068966, 0.49827586206896557, 0.5017241379310345, 0.5051724137931035, 0.5086206896551725, 0.5120689655172415, 0.5155172413793103, 0.5189655172413794, 0.5224137931034483, 0.5258620689655172, 0.5293103448275862, 0.5327586206896552, 0.5362068965517242, 0.5396551724137931, 0.5431034482758621, 0.5465517241379311, 0.55]
pdaf_max_intensity_by_wavelength: [36.53530864197531, 35.98175136260464, 35.440680099679604, 34.91172214507147, 34.394518594270394, 33.88872373742188, 33.39400448147702, 32.9100398016529, 32.436520220516364, 31.973147313112626, 31.519633236661136, 31.075700283434678, 30.641080455524776, 30.21551506027753, 29.798754325259512, 29.39055703168361, 28.990690165290218, 28.598928583740303, 28.215054699633825, 27.838858178320162, 27.470135649716887, 27.108690433399783, 26.754332276269828, 26.40687710214432, 26.066146772656342, 25.73196885888277, 25.404176423154265, 25.082607810531623, 24.767106449462133, 24.457520661157027]

#* Forward (Input) Source Properties
lateral_aperture_um: 2.244
src_maximum_vertical_um: 2.89
src_minimum_vertical_um: -2.1675
mid_lambda_um: 0.6
gaussian_waist_radius_um: 1
source_angle_theta_rad: 0.0
source_angle_theta_deg: 0.0

#* Adjoint Source Properties
adjoint_vertical_um: -1.5299999999999998
num_adjoint_sources: 2
adjoint_x_positions_um: [0.51, -0.51, -0.51, 0.51]
adjoint_y_positions_um: [0.51, 0.51, -0.51, -0.51]

#* Optimzation Properties
epoch_range_design_change_max: 0.09999999999999999
epoch_range_design_change_min: 0.05
spectral_focal_plane_map: [[0, 15], [15, 30], [30, 45], [15, 30]]
desired_peak_location_per_band: [0, 9, 19]
2024-02-28 19:48:24,746 - template_logger - INFO - Successfully saved output to runs\test_run\processed_config.yml
2024-02-28 19:48:31,044 - template_logger - INFO - Rendered Output:
{ 
    "info": {
        "name": "optimization",
        "path": "",
        "simulator_name": "LumericalFDTD",
        "coordinates": {}
    },

    "objects": {
        "FDTD": {
            
            "name": "FDTD",
            "obj_type": "fdtd",
            "properties": {
                "dimension": "2D",
                "x span": 3.06e-06,
                "y max": 3.3150000000000004e-06,
                "y min": -2.8049999999999994e-06,
                
                "simulation time": 6.000000000000001e-13,
                "index": 1.5
            }
        },
        "forward_src_x": {
            "name": "forward_src_x",
            "obj_type": "gaussian",
            "attached_monitor": 0,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 0,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
        "forward_src_y": {
            "name": "forward_src_y",
            "obj_type": "gaussian",
            "attached_monitor": 1,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 90,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
            "adj_src_0x": {
                "name": "adj_src_0x",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_0y": {
                "name": "adj_src_0y",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 0,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_1x": {
                "name": "adj_src_1x",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_1y": {
                "name": "adj_src_1y",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 0,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
        "focal_monitor_0": {
            "name": "focal_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": 5.1e-07,
                "y": -1.5299999999999998e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "focal_monitor_1": {
            "name": "focal_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": -5.1e-07,
                "y": -1.5299999999999998e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_0": {
            "name": "transmission_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": 5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_1": {
            "name": "transmission_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": -5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },

        "transmission_focal_monitor_": {
            "name": "transmission_focal_monitor_",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": 0,
                "x span": 2.04e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "PEC_screen": {
            "name": "PEC_screen",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 3.5904e-06,
                "y min": 2.193e-06,
                "y max": 2.346e-06,
                
                "material": "PEC (Perfect Electrical Conductor)"
            }
        },
        "source_aperture": {
            "name": "source_aperture",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 2.04e-06,
                "y min": 2.193e-06,
                "y max": 2.346e-06,
                
                "index": 1.5
            }
        },
        "design_import": {
            "name": "design_import",
            "obj_type": "import",
            "dev_id": 0,                
            "properties": {
                "x span": 2.04e-06,
                "y min": 0.0,
                "y max": 2.04e-06
                
            }
        },
        "design_mesh": {
            "name": "design_mesh",
            "obj_type": "mesh",
            "dev_id": 0,
            "properties": {
                "x": 0,
                "x span": 3.06e-06,
                "y min": -5e-07,
                "y max": 2.54e-06,
                
                "dx": 5.0999999999999993e-08,
                "dy": 5.0999999999999993e-08,
                "dz": 5.0999999999999993e-08
            }
        },
        "design_index_monitor": {
            "name": "design_index_monitor",
            "obj_type": "index",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "2D Z-Normal",
                "y min": 0.0,
                "y max": 2.04e-06,
                
                "spatial interpolation": "nearest mesh cell"
            }
        },
        "design_efield_monitor": {
            "name": "design_efield_monitor",
            "obj_type": "profile",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "2D Z-Normal",
                "y min": 0.0,
                "y max": 2.04e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "frequency points": 30,
                "output Hx": 0,
                "output Hy": 0,
                "output Hz": 0
            }
        }
    }
}
2024-02-28 19:48:31,048 - template_logger - INFO - Successfully saved output to runs\test_run\sim.json
2024-02-28 20:24:47,122 - template_logger - INFO - Rendered Output:
#* Original Properties

start_from_step: 0
shelf_fn: save_state
restart_epoch: 0
restart_iter: 0
lumapi_filepath_local: C:\Program Files\Lumerical\v212\api\python\lumapi.py
lumapi_filepath_hpc: /central/home/ifoo/lumerical/2021a_r22/api/python/lumapi.py
simulator_name: LumericalFDTD
simulator_dimension: 2D
simulator_max_wait_time: 3600
use_autograd: False
convert_existing: False
mesh_spacing_um: 0.051
geometry_spacing_lateral_um: 0.085
device_scale_um: 0.051
use_smooth_blur: False
min_feature_size_um: 0.085
background_index: 1.5
min_device_index: 1.5
max_device_index: 2.4
init_permittivity_0_1_scale: 0.5
binarize_3_levels: False
focal_plane_center_lateral_um: 0
num_vertical_layers: 5
vertical_layer_height_um: 0.408
device_size_lateral_um: 2.04
device_vertical_minimum_um: 0
objects_above_device: []
num_sidewalls: 0
sidewall_material: etch
sidewall_extend_pml: False
sidewall_extend_focalplane: True
sidewall_thickness_um: 0.085
sidewall_vertical_minimum_um: -0.765
add_infrared: False
lambda_min_um: 0.45
lambda_max_um: 0.75
lambda_min_eval_um: 0.45
lambda_max_eval_um: 0.75
num_bands: 2
num_points_per_band: 15
num_dispersive_ranges: 1
add_pdaf: False
pdaf_angle_phi_degrees: 45
pdaf_angle_theta_degrees: -8
pdaf_adj_src_idx: 0
fdtd_simulation_time_fs: 600
weight_by_individual_wavelength: True
use_gaussian_sources: True
use_airy_approximation: True
f_number: 2.2
airy_correction_factor: 0.84
beam_size_multiplier: 1
source_angle_theta_vacuum_deg: 0
source_angle_phi_deg: 0
xy_phi_rotations: [0, 90]
xy_adjtheta_rotations: [90, 0]
xy_pol_rotations: [0, 90]
xy_names: ['x', 'y']
use_source_aperture: True
num_focal_spots: 2
dispersive_range_to_adjoint_src_map: [[0, 1, 2, 3]]
adjoint_src_to_dispersive_range_map: [0, 0, 0, 0]
enforce_xy_gradient_symmetry: False
weight_by_quadrant_transmission: True
max_epochs: 1
iter_per_epoch: 100
num_epochs: 10
num_iterations_per_epoch: 30
total_num_iterations: 80
epoch_list: [0, 16, 32, 48, 64, 80]
optimizer_algorithm: ADAM
adam_betas: (0.9, 0.999)
use_fixed_step_size: True
fixed_step_size: 0.01
epoch_start_design_change_max: 0.15
epoch_end_design_change_max: 0.05
epoch_start_design_change_min: 0.05
epoch_end_design_change_min: 0
fom_types: ['transmission', 'intensity']
optimization_fom: intensity
reinterpolate_permittivity: True
reinterpolate_permittivity_factor: 2
reinterpolate_type: nearest
border_optimization: False
layer_gradient: False
flip_gradient: False
polarizations_focal_plane_map: [['x', 'y'], ['x', 'y'], ['x', 'y'], ['x', 'y']]
weight_focal_plane_map_performance_weighting: [1.0, 1.0, 1.0, 1.0]
weight_focal_plane_map: [1.0, 1.0, 1.0, 1.0]
do_green_balance: False
polarization_name_to_idx: {'x': 0, 'y': 1, 'z': 2}
desired_peaks_per_band_um: [0.45, 0.54, 0.65]
explicit_band_centering: True
shuffle_green: False
infrared_center_um: 0.94
do_rejection: False
softplus_kappa: 2
evaluate_bordered_extended: False
do_normalize: False
should_fix_layers: True
fixed_layers: [1, 3]
fixed_layers_density: 0
mpi_exe: C:\ProgramData\Miniconda3\envs\def2\Library\bin\mpiexec.exe
solver_exe: C:\Program Files\Lumerical\v212\bin\fdtd-engine-msmpi.exe
nprocs: 8
optimizer: AdamOptimizer
optimizer_settings: {'step_size': 0.01, 'betas': [0.9, 0.999], 'eps': '1e-8', 'moments': [0.0, 0.0]}
fom_dict: [{'fwd': [0], 'adj': [0], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}, {'fwd': [0], 'adj': [2], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}]
figures_of_merit: {'fom_0': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_0']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_0x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29], 'weight': 1.0}}


#
# Derived Properties
#

#* Mesh Properties

min_feature_size_voxels: 1.0
blur_half_width_voxels: 0

#* Optical Properties
min_device_permittivity: 2.25
max_device_permittivity: 5.76
focal_length_um: 1.5299999999999998
focal_plane_center_vertical_um: -1.5299999999999998

#* Device Properties
vertical_layer_height_voxels: 8
device_size_vertical_um: 2.04
device_voxels_lateral: 24
device_voxels_vertical: 40
device_voxels_simulation_mesh_lateral: 41
device_voxels_simulation_mesh_vertical: 42
device_vertical_maximum_um: 2.04
device_size_lateral_bordered_um: 2.04
device_voxels_simulation_mesh_lateral_bordered: 41
border_size_um: 0.255
border_size_voxels: 3
device_voxels_lateral_bordered: 24

#* FDTD Properties

vertical_gap_size_um: 1.2750000000000001
lateral_gap_size_um: 0.51
fdtd_region_size_vertical_um: 6.119999999999999
fdtd_region_size_lateral_um: 3.06
fdtd_region_maximum_vertical_um: 3.3150000000000004
fdtd_region_minimum_vertical_um: -2.8049999999999997

#* Surrounding Properties
pec_aperture_thickness_um: 0.153
sidewall_x_positions_um: [1.0625, 0, -1.0625, 0]
sidewall_y_positions_um: [0, 1.0625, 0, -1.0625]
sidewall_xspan_positions_um: [0.085, 2.21, 0.085, 2.21]
sidewall_yspan_positions_um: [2.21, 0.085, 2.21, 0.085]

#* Spectral Properties
bandwidth_um: 0.3
num_design_frequency_points: 30
num_eval_frequency_points: 180
lambda_values_um: [0.45, 0.46034482758620693, 0.4706896551724138, 0.4810344827586207, 0.4913793103448276, 0.5017241379310345, 0.5120689655172413, 0.5224137931034483, 0.5327586206896552, 0.5431034482758621, 0.553448275862069, 0.5637931034482759, 0.5741379310344827, 0.5844827586206897, 0.5948275862068966, 0.6051724137931035, 0.6155172413793104, 0.6258620689655172, 0.6362068965517241, 0.646551724137931, 0.656896551724138, 0.6672413793103449, 0.6775862068965517, 0.6879310344827586, 0.6982758620689655, 0.7086206896551724, 0.7189655172413794, 0.7293103448275862, 0.7396551724137932, 0.75]
max_intensity_by_wavelength: [36.53530864197531, 34.91172214507147, 33.39400448147702, 31.973147313112626, 30.641080455524776, 29.39055703168361, 28.215054699633836, 27.108690433399783, 26.066146772656342, 25.082607810531623, 24.153703477256624, 23.275460913316312, 22.44426191957724, 21.65680563169482, 20.910075698382695, 20.201311352992263, 19.527981859410428, 18.887763889837522, 18.278521456217273, 17.698288071111115, 17.145250859390607, 16.617736380692932, 16.114197955312115, 15.633204314043255, 15.173429416247526, 14.733643300714537, 14.312703851307443, 13.90954937433284, 13.52319189745763, 13.152711111111115]
dispersive_range_size_um: 0.3
dispersive_ranges_um: [[0.45, 0.75]]

#* PDAF Functionality Properties
pdaf_focal_spot_x_um: 0.51
pdaf_focal_spot_y_um: 0.51
pdaf_lambda_min_um: 0.45
pdaf_lambda_max_um: 0.55
pdaf_lambda_values_um: [0.45, 0.453448275862069, 0.45689655172413796, 0.46034482758620693, 0.4637931034482759, 0.4672413793103448, 0.4706896551724138, 0.47413793103448276, 0.47758620689655173, 0.4810344827586207, 0.4844827586206897, 0.48793103448275865, 0.4913793103448276, 0.4948275862068966, 0.49827586206896557, 0.5017241379310345, 0.5051724137931035, 0.5086206896551725, 0.5120689655172415, 0.5155172413793103, 0.5189655172413794, 0.5224137931034483, 0.5258620689655172, 0.5293103448275862, 0.5327586206896552, 0.5362068965517242, 0.5396551724137931, 0.5431034482758621, 0.5465517241379311, 0.55]
pdaf_max_intensity_by_wavelength: [36.53530864197531, 35.98175136260464, 35.440680099679604, 34.91172214507147, 34.394518594270394, 33.88872373742188, 33.39400448147702, 32.9100398016529, 32.436520220516364, 31.973147313112626, 31.519633236661136, 31.075700283434678, 30.641080455524776, 30.21551506027753, 29.798754325259512, 29.39055703168361, 28.990690165290218, 28.598928583740303, 28.215054699633825, 27.838858178320162, 27.470135649716887, 27.108690433399783, 26.754332276269828, 26.40687710214432, 26.066146772656342, 25.73196885888277, 25.404176423154265, 25.082607810531623, 24.767106449462133, 24.457520661157027]

#* Forward (Input) Source Properties
lateral_aperture_um: 2.244
src_maximum_vertical_um: 2.89
src_minimum_vertical_um: -2.1675
mid_lambda_um: 0.6
gaussian_waist_radius_um: 1
source_angle_theta_rad: 0.0
source_angle_theta_deg: 0.0

#* Adjoint Source Properties
adjoint_vertical_um: -1.5299999999999998
num_adjoint_sources: 2
adjoint_x_positions_um: [0.51, -0.51, -0.51, 0.51]
adjoint_y_positions_um: [0.51, 0.51, -0.51, -0.51]

#* Optimzation Properties
epoch_range_design_change_max: 0.09999999999999999
epoch_range_design_change_min: 0.05
spectral_focal_plane_map: [[0, 15], [15, 30], [30, 45], [15, 30]]
desired_peak_location_per_band: [0, 9, 19]
2024-02-28 20:24:47,126 - template_logger - INFO - Successfully saved output to runs\test_run\processed_config.yml
2024-02-28 20:24:53,185 - template_logger - INFO - Rendered Output:
{ 
    "info": {
        "name": "optimization",
        "path": "",
        "simulator_name": "LumericalFDTD",
        "coordinates": {}
    },

    "objects": {
        "FDTD": {
            
            "name": "FDTD",
            "obj_type": "fdtd",
            "properties": {
                "dimension": "2D",
                "x span": 3.06e-06,
                "y max": 3.3150000000000004e-06,
                "y min": -2.8049999999999994e-06,
                
                "simulation time": 6.000000000000001e-13,
                "index": 1.5
            }
        },
        "forward_src_x": {
            "name": "forward_src_x",
            "obj_type": "gaussian",
            "attached_monitor": 0,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 0,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
        "forward_src_y": {
            "name": "forward_src_y",
            "obj_type": "gaussian",
            "attached_monitor": 1,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 90,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
            "adj_src_0x": {
                "name": "adj_src_0x",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_0y": {
                "name": "adj_src_0y",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 0,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_1x": {
                "name": "adj_src_1x",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_1y": {
                "name": "adj_src_1y",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 0,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
        "focal_monitor_0": {
            "name": "focal_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": 5.1e-07,
                "y": -1.5299999999999998e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "focal_monitor_1": {
            "name": "focal_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": -5.1e-07,
                "y": -1.5299999999999998e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_0": {
            "name": "transmission_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": 5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_1": {
            "name": "transmission_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": -5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },

        "transmission_focal_monitor_": {
            "name": "transmission_focal_monitor_",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": 0,
                "x span": 2.04e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "PEC_screen": {
            "name": "PEC_screen",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 3.5904e-06,
                "y min": 2.193e-06,
                "y max": 2.346e-06,
                
                "material": "PEC (Perfect Electrical Conductor)"
            }
        },
        "source_aperture": {
            "name": "source_aperture",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 2.04e-06,
                "y min": 2.193e-06,
                "y max": 2.346e-06,
                
                "index": 1.5
            }
        },
        "design_import": {
            "name": "design_import",
            "obj_type": "import",
            "dev_id": 0,                
            "properties": {
                "x span": 2.04e-06,
                "y min": 0.0,
                "y max": 2.04e-06
                
            }
        },
        "design_mesh": {
            "name": "design_mesh",
            "obj_type": "mesh",
            "dev_id": 0,
            "properties": {
                "x": 0,
                "x span": 3.06e-06,
                "y min": -5e-07,
                "y max": 2.54e-06,
                
                "dx": 5.0999999999999993e-08,
                "dy": 5.0999999999999993e-08,
                "dz": 5.0999999999999993e-08
            }
        },
        "design_index_monitor": {
            "name": "design_index_monitor",
            "obj_type": "index",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "2D Z-Normal",
                "y min": 0.0,
                "y max": 2.04e-06,
                
                "spatial interpolation": "nearest mesh cell"
            }
        },
        "design_efield_monitor": {
            "name": "design_efield_monitor",
            "obj_type": "profile",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "2D Z-Normal",
                "y min": 0.0,
                "y max": 2.04e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "frequency points": 30,
                "output Hx": 0,
                "output Hy": 0,
                "output Hz": 0
            }
        }
    }
}
2024-02-28 20:24:53,189 - template_logger - INFO - Successfully saved output to runs\test_run\sim.json
2024-02-28 20:36:48,208 - template_logger - INFO - Rendered Output:
#* Original Properties

start_from_step: 0
shelf_fn: save_state
restart_epoch: 0
restart_iter: 0
lumapi_filepath_local: C:\Program Files\Lumerical\v212\api\python\lumapi.py
lumapi_filepath_hpc: /central/home/ifoo/lumerical/2021a_r22/api/python/lumapi.py
simulator_name: LumericalFDTD
simulator_dimension: 2D
simulator_max_wait_time: 3600
use_autograd: False
convert_existing: False
mesh_spacing_um: 0.051
geometry_spacing_lateral_um: 0.085
device_scale_um: 0.051
use_smooth_blur: False
min_feature_size_um: 0.085
background_index: 1.5
min_device_index: 1.5
max_device_index: 2.4
init_permittivity_0_1_scale: 0.5
binarize_3_levels: False
focal_plane_center_lateral_um: 0
num_vertical_layers: 5
vertical_layer_height_um: 0.408
device_size_lateral_um: 2.04
device_vertical_minimum_um: 0
objects_above_device: []
num_sidewalls: 0
sidewall_material: etch
sidewall_extend_pml: False
sidewall_extend_focalplane: True
sidewall_thickness_um: 0.085
sidewall_vertical_minimum_um: -0.765
add_infrared: False
lambda_min_um: 0.45
lambda_max_um: 0.75
lambda_min_eval_um: 0.45
lambda_max_eval_um: 0.75
num_bands: 2
num_points_per_band: 15
num_dispersive_ranges: 1
add_pdaf: False
pdaf_angle_phi_degrees: 45
pdaf_angle_theta_degrees: -8
pdaf_adj_src_idx: 0
fdtd_simulation_time_fs: 600
weight_by_individual_wavelength: True
use_gaussian_sources: True
use_airy_approximation: True
f_number: 2.2
airy_correction_factor: 0.84
beam_size_multiplier: 1
source_angle_theta_vacuum_deg: 0
source_angle_phi_deg: 0
xy_phi_rotations: [0, 90]
xy_adjtheta_rotations: [90, 0]
xy_pol_rotations: [0, 90]
xy_names: ['x', 'y']
use_source_aperture: True
num_focal_spots: 2
dispersive_range_to_adjoint_src_map: [[0, 1, 2, 3]]
adjoint_src_to_dispersive_range_map: [0, 0, 0, 0]
enforce_xy_gradient_symmetry: False
weight_by_quadrant_transmission: True
max_epochs: 1
iter_per_epoch: 100
num_epochs: 10
num_iterations_per_epoch: 30
total_num_iterations: 80
epoch_list: [0, 16, 32, 48, 64, 80]
optimizer_algorithm: ADAM
adam_betas: (0.9, 0.999)
use_fixed_step_size: True
fixed_step_size: 0.01
epoch_start_design_change_max: 0.15
epoch_end_design_change_max: 0.05
epoch_start_design_change_min: 0.05
epoch_end_design_change_min: 0
fom_types: ['transmission', 'intensity']
optimization_fom: intensity
reinterpolate_permittivity: True
reinterpolate_permittivity_factor: 2
reinterpolate_type: nearest
border_optimization: False
layer_gradient: False
flip_gradient: False
polarizations_focal_plane_map: [['x', 'y'], ['x', 'y'], ['x', 'y'], ['x', 'y']]
weight_focal_plane_map_performance_weighting: [1.0, 1.0, 1.0, 1.0]
weight_focal_plane_map: [1.0, 1.0, 1.0, 1.0]
do_green_balance: False
polarization_name_to_idx: {'x': 0, 'y': 1, 'z': 2}
desired_peaks_per_band_um: [0.45, 0.54, 0.65]
explicit_band_centering: True
shuffle_green: False
infrared_center_um: 0.94
do_rejection: False
softplus_kappa: 2
evaluate_bordered_extended: False
do_normalize: False
should_fix_layers: True
fixed_layers: [1, 3]
fixed_layers_density: 0
mpi_exe: C:\ProgramData\Miniconda3\envs\def2\Library\bin\mpiexec.exe
solver_exe: C:\Program Files\Lumerical\v212\bin\fdtd-engine-msmpi.exe
nprocs: 8
optimizer: AdamOptimizer
optimizer_settings: {'step_size': 0.01, 'betas': [0.9, 0.999], 'eps': '1e-8', 'moments': [0.0, 0.0]}
fom_dict: [{'fwd': [0], 'adj': [0], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}, {'fwd': [0], 'adj': [2], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}]
figures_of_merit: {'fom_0': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_0']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_0x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29], 'weight': 1.0}}


#
# Derived Properties
#

#* Mesh Properties

min_feature_size_voxels: 1.0
blur_half_width_voxels: 0

#* Optical Properties
min_device_permittivity: 2.25
max_device_permittivity: 5.76
focal_length_um: 1.5299999999999998
focal_plane_center_vertical_um: -1.5299999999999998

#* Device Properties
vertical_layer_height_voxels: 8
device_size_vertical_um: 2.04
device_voxels_lateral: 24
device_voxels_vertical: 40
device_voxels_simulation_mesh_lateral: 41
device_voxels_simulation_mesh_vertical: 42
device_vertical_maximum_um: 2.04
device_size_lateral_bordered_um: 2.04
device_voxels_simulation_mesh_lateral_bordered: 41
border_size_um: 0.255
border_size_voxels: 3
device_voxels_lateral_bordered: 24

#* FDTD Properties

vertical_gap_size_um: 1.2750000000000001
lateral_gap_size_um: 0.51
fdtd_region_size_vertical_um: 6.119999999999999
fdtd_region_size_lateral_um: 3.06
fdtd_region_maximum_vertical_um: 3.3150000000000004
fdtd_region_minimum_vertical_um: -2.8049999999999997

#* Surrounding Properties
pec_aperture_thickness_um: 0.153
sidewall_x_positions_um: [1.0625, 0, -1.0625, 0]
sidewall_y_positions_um: [0, 1.0625, 0, -1.0625]
sidewall_xspan_positions_um: [0.085, 2.21, 0.085, 2.21]
sidewall_yspan_positions_um: [2.21, 0.085, 2.21, 0.085]

#* Spectral Properties
bandwidth_um: 0.3
num_design_frequency_points: 30
num_eval_frequency_points: 180
lambda_values_um: [0.45, 0.46034482758620693, 0.4706896551724138, 0.4810344827586207, 0.4913793103448276, 0.5017241379310345, 0.5120689655172413, 0.5224137931034483, 0.5327586206896552, 0.5431034482758621, 0.553448275862069, 0.5637931034482759, 0.5741379310344827, 0.5844827586206897, 0.5948275862068966, 0.6051724137931035, 0.6155172413793104, 0.6258620689655172, 0.6362068965517241, 0.646551724137931, 0.656896551724138, 0.6672413793103449, 0.6775862068965517, 0.6879310344827586, 0.6982758620689655, 0.7086206896551724, 0.7189655172413794, 0.7293103448275862, 0.7396551724137932, 0.75]
max_intensity_by_wavelength: [36.53530864197531, 34.91172214507147, 33.39400448147702, 31.973147313112626, 30.641080455524776, 29.39055703168361, 28.215054699633836, 27.108690433399783, 26.066146772656342, 25.082607810531623, 24.153703477256624, 23.275460913316312, 22.44426191957724, 21.65680563169482, 20.910075698382695, 20.201311352992263, 19.527981859410428, 18.887763889837522, 18.278521456217273, 17.698288071111115, 17.145250859390607, 16.617736380692932, 16.114197955312115, 15.633204314043255, 15.173429416247526, 14.733643300714537, 14.312703851307443, 13.90954937433284, 13.52319189745763, 13.152711111111115]
dispersive_range_size_um: 0.3
dispersive_ranges_um: [[0.45, 0.75]]

#* PDAF Functionality Properties
pdaf_focal_spot_x_um: 0.51
pdaf_focal_spot_y_um: 0.51
pdaf_lambda_min_um: 0.45
pdaf_lambda_max_um: 0.55
pdaf_lambda_values_um: [0.45, 0.453448275862069, 0.45689655172413796, 0.46034482758620693, 0.4637931034482759, 0.4672413793103448, 0.4706896551724138, 0.47413793103448276, 0.47758620689655173, 0.4810344827586207, 0.4844827586206897, 0.48793103448275865, 0.4913793103448276, 0.4948275862068966, 0.49827586206896557, 0.5017241379310345, 0.5051724137931035, 0.5086206896551725, 0.5120689655172415, 0.5155172413793103, 0.5189655172413794, 0.5224137931034483, 0.5258620689655172, 0.5293103448275862, 0.5327586206896552, 0.5362068965517242, 0.5396551724137931, 0.5431034482758621, 0.5465517241379311, 0.55]
pdaf_max_intensity_by_wavelength: [36.53530864197531, 35.98175136260464, 35.440680099679604, 34.91172214507147, 34.394518594270394, 33.88872373742188, 33.39400448147702, 32.9100398016529, 32.436520220516364, 31.973147313112626, 31.519633236661136, 31.075700283434678, 30.641080455524776, 30.21551506027753, 29.798754325259512, 29.39055703168361, 28.990690165290218, 28.598928583740303, 28.215054699633825, 27.838858178320162, 27.470135649716887, 27.108690433399783, 26.754332276269828, 26.40687710214432, 26.066146772656342, 25.73196885888277, 25.404176423154265, 25.082607810531623, 24.767106449462133, 24.457520661157027]

#* Forward (Input) Source Properties
lateral_aperture_um: 2.244
src_maximum_vertical_um: 2.89
src_minimum_vertical_um: -2.1675
mid_lambda_um: 0.6
gaussian_waist_radius_um: 1
source_angle_theta_rad: 0.0
source_angle_theta_deg: 0.0

#* Adjoint Source Properties
adjoint_vertical_um: -1.5299999999999998
num_adjoint_sources: 2
adjoint_x_positions_um: [0.51, -0.51, -0.51, 0.51]
adjoint_y_positions_um: [0.51, 0.51, -0.51, -0.51]

#* Optimzation Properties
epoch_range_design_change_max: 0.09999999999999999
epoch_range_design_change_min: 0.05
spectral_focal_plane_map: [[0, 15], [15, 30], [30, 45], [15, 30]]
desired_peak_location_per_band: [0, 9, 19]
2024-02-28 20:36:48,212 - template_logger - INFO - Successfully saved output to runs\test_run\processed_config.yml
2024-02-28 20:36:55,802 - template_logger - INFO - Rendered Output:
{ 
    "info": {
        "name": "optimization",
        "path": "",
        "simulator_name": "LumericalFDTD",
        "coordinates": {}
    },

    "objects": {
        "FDTD": {
            
            "name": "FDTD",
            "obj_type": "fdtd",
            "properties": {
                "dimension": "2D",
                "x span": 3.06e-06,
                "y max": 3.3150000000000004e-06,
                "y min": -2.8049999999999994e-06,
                
                "simulation time": 6.000000000000001e-13,
                "index": 1.5
            }
        },
        "forward_src_x": {
            "name": "forward_src_x",
            "obj_type": "gaussian",
            "attached_monitor": 0,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 0,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
        "forward_src_y": {
            "name": "forward_src_y",
            "obj_type": "gaussian",
            "attached_monitor": 1,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 90,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
            "adj_src_0x": {
                "name": "adj_src_0x",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_0y": {
                "name": "adj_src_0y",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 0,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_1x": {
                "name": "adj_src_1x",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_1y": {
                "name": "adj_src_1y",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 0,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
        "focal_monitor_0": {
            "name": "focal_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": 5.1e-07,
                "y": -1.5299999999999998e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "focal_monitor_1": {
            "name": "focal_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": -5.1e-07,
                "y": -1.5299999999999998e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_0": {
            "name": "transmission_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": 5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_1": {
            "name": "transmission_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": -5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },

        "transmission_focal_monitor_": {
            "name": "transmission_focal_monitor_",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": 0,
                "x span": 2.04e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "PEC_screen": {
            "name": "PEC_screen",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 3.5904e-06,
                "y min": 2.193e-06,
                "y max": 2.346e-06,
                
                "material": "PEC (Perfect Electrical Conductor)"
            }
        },
        "source_aperture": {
            "name": "source_aperture",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 2.04e-06,
                "y min": 2.193e-06,
                "y max": 2.346e-06,
                
                "index": 1.5
            }
        },
        "design_import": {
            "name": "design_import",
            "obj_type": "import",
            "dev_id": 0,                
            "properties": {
                "x span": 2.04e-06,
                "y min": 0.0,
                "y max": 2.04e-06
                
            }
        },
        "design_mesh": {
            "name": "design_mesh",
            "obj_type": "mesh",
            "dev_id": 0,
            "properties": {
                "x": 0,
                "x span": 3.06e-06,
                "y min": -5e-07,
                "y max": 2.54e-06,
                
                "dx": 5.0999999999999993e-08,
                "dy": 5.0999999999999993e-08,
                "dz": 5.0999999999999993e-08
            }
        },
        "design_index_monitor": {
            "name": "design_index_monitor",
            "obj_type": "index",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "2D Z-Normal",
                "y min": 0.0,
                "y max": 2.04e-06,
                
                "spatial interpolation": "nearest mesh cell"
            }
        },
        "design_efield_monitor": {
            "name": "design_efield_monitor",
            "obj_type": "profile",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "2D Z-Normal",
                "y min": 0.0,
                "y max": 2.04e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "frequency points": 30,
                "output Hx": 0,
                "output Hy": 0,
                "output Hz": 0
            }
        }
    }
}
2024-02-28 20:36:55,806 - template_logger - INFO - Successfully saved output to runs\test_run\sim.json
2024-02-28 23:55:31,355 - template_logger - INFO - Rendered Output:
#* Original Properties

start_from_step: 0
shelf_fn: save_state
restart_epoch: 0
restart_iter: 0
lumapi_filepath_local: C:\Program Files\Lumerical\v212\api\python\lumapi.py
lumapi_filepath_hpc: /central/home/ifoo/lumerical/2021a_r22/api/python/lumapi.py
simulator_name: LumericalFDTD
simulator_dimension: 2D
simulator_max_wait_time: 3600
use_autograd: False
convert_existing: False
mesh_spacing_um: 0.051
geometry_spacing_lateral_um: 0.085
device_scale_um: 0.051
use_smooth_blur: False
min_feature_size_um: 0.085
background_index: 1.5
min_device_index: 1.5
max_device_index: 2.4
init_permittivity_0_1_scale: 0.5
binarize_3_levels: False
focal_plane_center_lateral_um: 0
num_vertical_layers: 5
vertical_layer_height_um: 0.408
device_size_lateral_um: 2.04
device_vertical_minimum_um: 0
objects_above_device: []
num_sidewalls: 0
sidewall_material: etch
sidewall_extend_pml: False
sidewall_extend_focalplane: True
sidewall_thickness_um: 0.085
sidewall_vertical_minimum_um: -0.765
add_infrared: False
lambda_min_um: 0.45
lambda_max_um: 0.75
lambda_min_eval_um: 0.45
lambda_max_eval_um: 0.75
num_bands: 2
num_points_per_band: 15
num_dispersive_ranges: 1
add_pdaf: False
pdaf_angle_phi_degrees: 45
pdaf_angle_theta_degrees: -8
pdaf_adj_src_idx: 0
fdtd_simulation_time_fs: 600
weight_by_individual_wavelength: True
use_gaussian_sources: True
use_airy_approximation: True
f_number: 2.2
airy_correction_factor: 0.84
beam_size_multiplier: 1
source_angle_theta_vacuum_deg: 0
source_angle_phi_deg: 0
xy_phi_rotations: [0, 90]
xy_adjtheta_rotations: [90, 0]
xy_pol_rotations: [0, 90]
xy_names: ['x', 'y']
use_source_aperture: True
num_focal_spots: 2
dispersive_range_to_adjoint_src_map: [[0, 1, 2, 3]]
adjoint_src_to_dispersive_range_map: [0, 0, 0, 0]
enforce_xy_gradient_symmetry: False
weight_by_quadrant_transmission: True
max_epochs: 1
iter_per_epoch: 100
total_num_iterations: 80
epoch_list: [0, 16, 32, 48, 64, 80]
optimizer_algorithm: ADAM
adam_betas: (0.9, 0.999)
use_fixed_step_size: True
fixed_step_size: 0.01
epoch_start_design_change_max: 0.15
epoch_end_design_change_max: 0.05
epoch_start_design_change_min: 0.05
epoch_end_design_change_min: 0
fom_types: ['transmission', 'intensity']
optimization_fom: intensity
reinterpolate_permittivity: True
reinterpolate_permittivity_factor: 2
reinterpolate_type: nearest
border_optimization: False
layer_gradient: False
flip_gradient: False
polarizations_focal_plane_map: [['x', 'y'], ['x', 'y'], ['x', 'y'], ['x', 'y']]
weight_focal_plane_map_performance_weighting: [1.0, 1.0, 1.0, 1.0]
weight_focal_plane_map: [1.0, 1.0, 1.0, 1.0]
do_green_balance: False
polarization_name_to_idx: {'x': 0, 'y': 1, 'z': 2}
desired_peaks_per_band_um: [0.45, 0.54, 0.65]
explicit_band_centering: True
shuffle_green: False
infrared_center_um: 0.94
do_rejection: False
softplus_kappa: 2
evaluate_bordered_extended: False
do_normalize: False
should_fix_layers: True
fixed_layers: [1, 3]
fixed_layers_density: 0
mpi_exe: C:\ProgramData\Miniconda3\envs\def2\Library\bin\mpiexec.exe
solver_exe: C:\Program Files\Lumerical\v212\bin\fdtd-engine-msmpi.exe
nprocs: 8
optimizer: AdamOptimizer
optimizer_settings: {'step_size': 0.01, 'betas': [0.9, 0.999], 'eps': '1e-8', 'moments': [0.0, 0.0]}
fom_dict: [{'fwd': [0], 'adj': [0], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}, {'fwd': [0], 'adj': [2], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}]
figures_of_merit: {'fom_0': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_0']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_0x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29], 'weight': 1.0}}


#
# Derived Properties
#

#* Mesh Properties

min_feature_size_voxels: 1.0
blur_half_width_voxels: 0

#* Optical Properties
min_device_permittivity: 2.25
max_device_permittivity: 5.76
focal_length_um: 1.5299999999999998
focal_plane_center_vertical_um: -1.5299999999999998

#* Device Properties
vertical_layer_height_voxels: 8
device_size_vertical_um: 2.04
device_voxels_lateral: 24
device_voxels_vertical: 40
device_voxels_simulation_mesh_lateral: 41
device_voxels_simulation_mesh_vertical: 42
device_vertical_maximum_um: 2.04
device_size_lateral_bordered_um: 2.04
device_voxels_simulation_mesh_lateral_bordered: 41
border_size_um: 0.255
border_size_voxels: 3
device_voxels_lateral_bordered: 24

#* FDTD Properties

vertical_gap_size_um: 1.2750000000000001
lateral_gap_size_um: 0.51
fdtd_region_size_vertical_um: 6.119999999999999
fdtd_region_size_lateral_um: 3.06
fdtd_region_maximum_vertical_um: 3.3150000000000004
fdtd_region_minimum_vertical_um: -2.8049999999999997

#* Surrounding Properties
pec_aperture_thickness_um: 0.153
sidewall_x_positions_um: [1.0625, 0, -1.0625, 0]
sidewall_y_positions_um: [0, 1.0625, 0, -1.0625]
sidewall_xspan_positions_um: [0.085, 2.21, 0.085, 2.21]
sidewall_yspan_positions_um: [2.21, 0.085, 2.21, 0.085]

#* Spectral Properties
bandwidth_um: 0.3
num_design_frequency_points: 30
num_eval_frequency_points: 180
lambda_values_um: [0.45, 0.46034482758620693, 0.4706896551724138, 0.4810344827586207, 0.4913793103448276, 0.5017241379310345, 0.5120689655172413, 0.5224137931034483, 0.5327586206896552, 0.5431034482758621, 0.553448275862069, 0.5637931034482759, 0.5741379310344827, 0.5844827586206897, 0.5948275862068966, 0.6051724137931035, 0.6155172413793104, 0.6258620689655172, 0.6362068965517241, 0.646551724137931, 0.656896551724138, 0.6672413793103449, 0.6775862068965517, 0.6879310344827586, 0.6982758620689655, 0.7086206896551724, 0.7189655172413794, 0.7293103448275862, 0.7396551724137932, 0.75]
max_intensity_by_wavelength: [36.53530864197531, 34.91172214507147, 33.39400448147702, 31.973147313112626, 30.641080455524776, 29.39055703168361, 28.215054699633836, 27.108690433399783, 26.066146772656342, 25.082607810531623, 24.153703477256624, 23.275460913316312, 22.44426191957724, 21.65680563169482, 20.910075698382695, 20.201311352992263, 19.527981859410428, 18.887763889837522, 18.278521456217273, 17.698288071111115, 17.145250859390607, 16.617736380692932, 16.114197955312115, 15.633204314043255, 15.173429416247526, 14.733643300714537, 14.312703851307443, 13.90954937433284, 13.52319189745763, 13.152711111111115]
dispersive_range_size_um: 0.3
dispersive_ranges_um: [[0.45, 0.75]]

#* PDAF Functionality Properties
pdaf_focal_spot_x_um: 0.51
pdaf_focal_spot_y_um: 0.51
pdaf_lambda_min_um: 0.45
pdaf_lambda_max_um: 0.55
pdaf_lambda_values_um: [0.45, 0.453448275862069, 0.45689655172413796, 0.46034482758620693, 0.4637931034482759, 0.4672413793103448, 0.4706896551724138, 0.47413793103448276, 0.47758620689655173, 0.4810344827586207, 0.4844827586206897, 0.48793103448275865, 0.4913793103448276, 0.4948275862068966, 0.49827586206896557, 0.5017241379310345, 0.5051724137931035, 0.5086206896551725, 0.5120689655172415, 0.5155172413793103, 0.5189655172413794, 0.5224137931034483, 0.5258620689655172, 0.5293103448275862, 0.5327586206896552, 0.5362068965517242, 0.5396551724137931, 0.5431034482758621, 0.5465517241379311, 0.55]
pdaf_max_intensity_by_wavelength: [36.53530864197531, 35.98175136260464, 35.440680099679604, 34.91172214507147, 34.394518594270394, 33.88872373742188, 33.39400448147702, 32.9100398016529, 32.436520220516364, 31.973147313112626, 31.519633236661136, 31.075700283434678, 30.641080455524776, 30.21551506027753, 29.798754325259512, 29.39055703168361, 28.990690165290218, 28.598928583740303, 28.215054699633825, 27.838858178320162, 27.470135649716887, 27.108690433399783, 26.754332276269828, 26.40687710214432, 26.066146772656342, 25.73196885888277, 25.404176423154265, 25.082607810531623, 24.767106449462133, 24.457520661157027]

#* Forward (Input) Source Properties
lateral_aperture_um: 2.244
src_maximum_vertical_um: 2.89
src_minimum_vertical_um: -2.1675
mid_lambda_um: 0.6
gaussian_waist_radius_um: 1
source_angle_theta_rad: 0.0
source_angle_theta_deg: 0.0

#* Adjoint Source Properties
adjoint_vertical_um: -1.5299999999999998
num_adjoint_sources: 2
adjoint_x_positions_um: [0.51, -0.51, -0.51, 0.51]
adjoint_y_positions_um: [0.51, 0.51, -0.51, -0.51]

#* Optimization Properties
total_iters: 100
epoch_range_design_change_max: 0.09999999999999999
epoch_range_design_change_min: 0.05
spectral_focal_plane_map: [[0, 15], [15, 30], [30, 45], [15, 30]]
desired_peak_location_per_band: [0, 9, 19]
2024-02-28 23:55:31,359 - template_logger - INFO - Successfully saved output to runs\test_run\processed_config.yml
2024-02-28 23:55:37,103 - template_logger - INFO - Rendered Output:
{ 
    "info": {
        "name": "optimization",
        "path": "",
        "simulator_name": "LumericalFDTD",
        "coordinates": {}
    },

    "objects": {
        "FDTD": {
            
            "name": "FDTD",
            "obj_type": "fdtd",
            "properties": {
                "dimension": "2D",
                "x span": 3.06e-06,
                "y max": 3.3150000000000004e-06,
                "y min": -2.8049999999999994e-06,
                
                "simulation time": 6.000000000000001e-13,
                "index": 1.5
            }
        },
        "forward_src_x": {
            "name": "forward_src_x",
            "obj_type": "gaussian",
            "attached_monitor": 0,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 0,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
        "forward_src_y": {
            "name": "forward_src_y",
            "obj_type": "gaussian",
            "attached_monitor": 1,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 90,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
            "adj_src_0x": {
                "name": "adj_src_0x",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_0y": {
                "name": "adj_src_0y",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 0,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_1x": {
                "name": "adj_src_1x",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_1y": {
                "name": "adj_src_1y",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 0,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
        "focal_monitor_0": {
            "name": "focal_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": 5.1e-07,
                "y": -1.5299999999999998e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "focal_monitor_1": {
            "name": "focal_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": -5.1e-07,
                "y": -1.5299999999999998e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_0": {
            "name": "transmission_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": 5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_1": {
            "name": "transmission_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": -5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },

        "transmission_focal_monitor_": {
            "name": "transmission_focal_monitor_",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": 0,
                "x span": 2.04e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "PEC_screen": {
            "name": "PEC_screen",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 3.5904e-06,
                "y min": 2.193e-06,
                "y max": 2.346e-06,
                
                "material": "PEC (Perfect Electrical Conductor)"
            }
        },
        "source_aperture": {
            "name": "source_aperture",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 2.04e-06,
                "y min": 2.193e-06,
                "y max": 2.346e-06,
                
                "index": 1.5
            }
        },
        "design_import": {
            "name": "design_import",
            "obj_type": "import",
            "dev_id": 0,                
            "properties": {
                "x span": 2.04e-06,
                "y min": 0.0,
                "y max": 2.04e-06
                
            }
        },
        "design_mesh": {
            "name": "design_mesh",
            "obj_type": "mesh",
            "dev_id": 0,
            "properties": {
                "x": 0,
                "x span": 3.06e-06,
                "y min": -5e-07,
                "y max": 2.54e-06,
                
                "dx": 5.0999999999999993e-08,
                "dy": 5.0999999999999993e-08,
                "dz": 5.0999999999999993e-08
            }
        },
        "design_index_monitor": {
            "name": "design_index_monitor",
            "obj_type": "index",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "2D Z-Normal",
                "y min": 0.0,
                "y max": 2.04e-06,
                
                "spatial interpolation": "nearest mesh cell"
            }
        },
        "design_efield_monitor": {
            "name": "design_efield_monitor",
            "obj_type": "profile",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "2D Z-Normal",
                "y min": 0.0,
                "y max": 2.04e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "frequency points": 30,
                "output Hx": 0,
                "output Hy": 0,
                "output Hz": 0
            }
        }
    }
}
2024-02-28 23:55:37,115 - template_logger - INFO - Successfully saved output to runs\test_run\sim.json
2024-02-29 00:19:27,130 - template_logger - INFO - Rendered Output:
#* Original Properties

start_from_step: 0
shelf_fn: save_state
restart_epoch: 0
restart_iter: 0
lumapi_filepath_local: C:\Program Files\Lumerical\v212\api\python\lumapi.py
lumapi_filepath_hpc: /central/home/ifoo/lumerical/2021a_r22/api/python/lumapi.py
simulator_name: LumericalFDTD
simulator_dimension: 2D
simulator_max_wait_time: 3600
use_autograd: False
convert_existing: False
mesh_spacing_um: 0.051
geometry_spacing_lateral_um: 0.085
device_scale_um: 0.051
use_smooth_blur: False
min_feature_size_um: 0.085
background_index: 1.5
min_device_index: 1.5
max_device_index: 2.4
init_permittivity_0_1_scale: 0.5
binarize_3_levels: False
focal_plane_center_lateral_um: 0
num_vertical_layers: 5
vertical_layer_height_um: 0.408
device_size_lateral_um: 2.04
device_vertical_minimum_um: 0
objects_above_device: []
num_sidewalls: 0
sidewall_material: etch
sidewall_extend_pml: False
sidewall_extend_focalplane: True
sidewall_thickness_um: 0.085
sidewall_vertical_minimum_um: -0.765
add_infrared: False
lambda_min_um: 0.45
lambda_max_um: 0.75
lambda_min_eval_um: 0.45
lambda_max_eval_um: 0.75
num_bands: 2
num_points_per_band: 15
num_dispersive_ranges: 1
add_pdaf: False
pdaf_angle_phi_degrees: 45
pdaf_angle_theta_degrees: -8
pdaf_adj_src_idx: 0
fdtd_simulation_time_fs: 600
weight_by_individual_wavelength: True
use_gaussian_sources: True
use_airy_approximation: True
f_number: 2.2
airy_correction_factor: 0.84
beam_size_multiplier: 1
source_angle_theta_vacuum_deg: 0
source_angle_phi_deg: 0
xy_phi_rotations: [0, 90]
xy_adjtheta_rotations: [90, 0]
xy_pol_rotations: [0, 90]
xy_names: ['x', 'y']
use_source_aperture: True
num_focal_spots: 2
dispersive_range_to_adjoint_src_map: [[0, 1, 2, 3]]
adjoint_src_to_dispersive_range_map: [0, 0, 0, 0]
enforce_xy_gradient_symmetry: False
weight_by_quadrant_transmission: True
max_epochs: 1
iter_per_epoch: 100
total_num_iterations: 80
epoch_list: [0, 16, 32, 48, 64, 80]
optimizer_algorithm: ADAM
adam_betas: (0.9, 0.999)
use_fixed_step_size: True
fixed_step_size: 0.01
epoch_start_design_change_max: 0.15
epoch_end_design_change_max: 0.05
epoch_start_design_change_min: 0.05
epoch_end_design_change_min: 0
fom_types: ['transmission', 'intensity']
optimization_fom: intensity
reinterpolate_permittivity: True
reinterpolate_permittivity_factor: 2
reinterpolate_type: nearest
border_optimization: False
layer_gradient: False
flip_gradient: False
polarizations_focal_plane_map: [['x', 'y'], ['x', 'y'], ['x', 'y'], ['x', 'y']]
weight_focal_plane_map_performance_weighting: [1.0, 1.0, 1.0, 1.0]
weight_focal_plane_map: [1.0, 1.0, 1.0, 1.0]
do_green_balance: False
polarization_name_to_idx: {'x': 0, 'y': 1, 'z': 2}
desired_peaks_per_band_um: [0.45, 0.54, 0.65]
explicit_band_centering: True
shuffle_green: False
infrared_center_um: 0.94
do_rejection: False
softplus_kappa: 2
evaluate_bordered_extended: False
do_normalize: False
should_fix_layers: True
fixed_layers: [1, 3]
fixed_layers_density: 0
mpi_exe: C:\ProgramData\Miniconda3\envs\def2\Library\bin\mpiexec.exe
solver_exe: C:\Program Files\Lumerical\v212\bin\fdtd-engine-msmpi.exe
nprocs: 8
optimizer: AdamOptimizer
optimizer_settings: {'step_size': 0.01, 'betas': [0.9, 0.999], 'eps': '1e-8', 'moments': [0.0, 0.0]}
fom_dict: [{'fwd': [0], 'adj': [0], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}, {'fwd': [0], 'adj': [2], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}]
figures_of_merit: {'fom_0': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_0']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_0x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29], 'weight': 1.0}, 'fom_1': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_y', 'focal_monitor_1']], 'grad_monitors': [['forward_src_y', 'design_efield_monitor'], ['adj_src_0y', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29], 'weight': 1.0}}


#
# Derived Properties
#

#* Mesh Properties

min_feature_size_voxels: 1.0
blur_half_width_voxels: 0

#* Optical Properties
min_device_permittivity: 2.25
max_device_permittivity: 5.76
focal_length_um: 1.5299999999999998
focal_plane_center_vertical_um: -1.5299999999999998

#* Device Properties
vertical_layer_height_voxels: 8
device_size_vertical_um: 2.04
device_voxels_lateral: 24
device_voxels_vertical: 40
device_voxels_simulation_mesh_lateral: 41
device_voxels_simulation_mesh_vertical: 42
device_vertical_maximum_um: 2.04
device_size_lateral_bordered_um: 2.04
device_voxels_simulation_mesh_lateral_bordered: 41
border_size_um: 0.255
border_size_voxels: 3
device_voxels_lateral_bordered: 24

#* FDTD Properties

vertical_gap_size_um: 1.2750000000000001
lateral_gap_size_um: 0.51
fdtd_region_size_vertical_um: 6.119999999999999
fdtd_region_size_lateral_um: 3.06
fdtd_region_maximum_vertical_um: 3.3150000000000004
fdtd_region_minimum_vertical_um: -2.8049999999999997

#* Surrounding Properties
pec_aperture_thickness_um: 0.153
sidewall_x_positions_um: [1.0625, 0, -1.0625, 0]
sidewall_y_positions_um: [0, 1.0625, 0, -1.0625]
sidewall_xspan_positions_um: [0.085, 2.21, 0.085, 2.21]
sidewall_yspan_positions_um: [2.21, 0.085, 2.21, 0.085]

#* Spectral Properties
bandwidth_um: 0.3
num_design_frequency_points: 30
num_eval_frequency_points: 180
lambda_values_um: [0.45, 0.46034482758620693, 0.4706896551724138, 0.4810344827586207, 0.4913793103448276, 0.5017241379310345, 0.5120689655172413, 0.5224137931034483, 0.5327586206896552, 0.5431034482758621, 0.553448275862069, 0.5637931034482759, 0.5741379310344827, 0.5844827586206897, 0.5948275862068966, 0.6051724137931035, 0.6155172413793104, 0.6258620689655172, 0.6362068965517241, 0.646551724137931, 0.656896551724138, 0.6672413793103449, 0.6775862068965517, 0.6879310344827586, 0.6982758620689655, 0.7086206896551724, 0.7189655172413794, 0.7293103448275862, 0.7396551724137932, 0.75]
max_intensity_by_wavelength: [36.53530864197531, 34.91172214507147, 33.39400448147702, 31.973147313112626, 30.641080455524776, 29.39055703168361, 28.215054699633836, 27.108690433399783, 26.066146772656342, 25.082607810531623, 24.153703477256624, 23.275460913316312, 22.44426191957724, 21.65680563169482, 20.910075698382695, 20.201311352992263, 19.527981859410428, 18.887763889837522, 18.278521456217273, 17.698288071111115, 17.145250859390607, 16.617736380692932, 16.114197955312115, 15.633204314043255, 15.173429416247526, 14.733643300714537, 14.312703851307443, 13.90954937433284, 13.52319189745763, 13.152711111111115]
dispersive_range_size_um: 0.3
dispersive_ranges_um: [[0.45, 0.75]]

#* PDAF Functionality Properties
pdaf_focal_spot_x_um: 0.51
pdaf_focal_spot_y_um: 0.51
pdaf_lambda_min_um: 0.45
pdaf_lambda_max_um: 0.55
pdaf_lambda_values_um: [0.45, 0.453448275862069, 0.45689655172413796, 0.46034482758620693, 0.4637931034482759, 0.4672413793103448, 0.4706896551724138, 0.47413793103448276, 0.47758620689655173, 0.4810344827586207, 0.4844827586206897, 0.48793103448275865, 0.4913793103448276, 0.4948275862068966, 0.49827586206896557, 0.5017241379310345, 0.5051724137931035, 0.5086206896551725, 0.5120689655172415, 0.5155172413793103, 0.5189655172413794, 0.5224137931034483, 0.5258620689655172, 0.5293103448275862, 0.5327586206896552, 0.5362068965517242, 0.5396551724137931, 0.5431034482758621, 0.5465517241379311, 0.55]
pdaf_max_intensity_by_wavelength: [36.53530864197531, 35.98175136260464, 35.440680099679604, 34.91172214507147, 34.394518594270394, 33.88872373742188, 33.39400448147702, 32.9100398016529, 32.436520220516364, 31.973147313112626, 31.519633236661136, 31.075700283434678, 30.641080455524776, 30.21551506027753, 29.798754325259512, 29.39055703168361, 28.990690165290218, 28.598928583740303, 28.215054699633825, 27.838858178320162, 27.470135649716887, 27.108690433399783, 26.754332276269828, 26.40687710214432, 26.066146772656342, 25.73196885888277, 25.404176423154265, 25.082607810531623, 24.767106449462133, 24.457520661157027]

#* Forward (Input) Source Properties
lateral_aperture_um: 2.244
src_maximum_vertical_um: 2.89
src_minimum_vertical_um: -2.1675
mid_lambda_um: 0.6
gaussian_waist_radius_um: 1
source_angle_theta_rad: 0.0
source_angle_theta_deg: 0.0

#* Adjoint Source Properties
adjoint_vertical_um: -1.5299999999999998
num_adjoint_sources: 2
adjoint_x_positions_um: [0.51, -0.51, -0.51, 0.51]
adjoint_y_positions_um: [0.51, 0.51, -0.51, -0.51]

#* Optimization Properties
total_iters: 100
epoch_range_design_change_max: 0.09999999999999999
epoch_range_design_change_min: 0.05
spectral_focal_plane_map: [[0, 15], [15, 30], [30, 45], [15, 30]]
desired_peak_location_per_band: [0, 9, 19]
2024-02-29 00:19:27,133 - template_logger - INFO - Successfully saved output to runs\test_run\processed_config.yml
2024-02-29 00:19:33,697 - template_logger - INFO - Rendered Output:
{ 
    "info": {
        "name": "optimization",
        "path": "",
        "simulator_name": "LumericalFDTD",
        "coordinates": {}
    },

    "objects": {
        "FDTD": {
            
            "name": "FDTD",
            "obj_type": "fdtd",
            "properties": {
                "dimension": "2D",
                "x span": 3.06e-06,
                "y max": 3.3150000000000004e-06,
                "y min": -2.8049999999999994e-06,
                
                "simulation time": 6.000000000000001e-13,
                "index": 1.5
            }
        },
        "forward_src_x": {
            "name": "forward_src_x",
            "obj_type": "gaussian",
            "attached_monitor": 0,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 0,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
        "forward_src_y": {
            "name": "forward_src_y",
            "obj_type": "gaussian",
            "attached_monitor": 1,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 90,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
            "adj_src_0x": {
                "name": "adj_src_0x",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_0y": {
                "name": "adj_src_0y",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 0,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_1x": {
                "name": "adj_src_1x",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_1y": {
                "name": "adj_src_1y",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 0,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
        "focal_monitor_0": {
            "name": "focal_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": 5.1e-07,
                "y": -1.5299999999999998e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "focal_monitor_1": {
            "name": "focal_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": -5.1e-07,
                "y": -1.5299999999999998e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_0": {
            "name": "transmission_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": 5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_1": {
            "name": "transmission_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": -5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },

        "transmission_focal_monitor_": {
            "name": "transmission_focal_monitor_",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": 0,
                "x span": 2.04e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "PEC_screen": {
            "name": "PEC_screen",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 3.5904e-06,
                "y min": 2.193e-06,
                "y max": 2.346e-06,
                
                "material": "PEC (Perfect Electrical Conductor)"
            }
        },
        "source_aperture": {
            "name": "source_aperture",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 2.04e-06,
                "y min": 2.193e-06,
                "y max": 2.346e-06,
                
                "index": 1.5
            }
        },
        "design_import": {
            "name": "design_import",
            "obj_type": "import",
            "dev_id": 0,                
            "properties": {
                "x span": 2.04e-06,
                "y min": 0.0,
                "y max": 2.04e-06
                
            }
        },
        "design_mesh": {
            "name": "design_mesh",
            "obj_type": "mesh",
            "dev_id": 0,
            "properties": {
                "x": 0,
                "x span": 3.06e-06,
                "y min": -5e-07,
                "y max": 2.54e-06,
                
                "dx": 5.0999999999999993e-08,
                "dy": 5.0999999999999993e-08,
                "dz": 5.0999999999999993e-08
            }
        },
        "design_index_monitor": {
            "name": "design_index_monitor",
            "obj_type": "index",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "2D Z-Normal",
                "y min": 0.0,
                "y max": 2.04e-06,
                
                "spatial interpolation": "nearest mesh cell"
            }
        },
        "design_efield_monitor": {
            "name": "design_efield_monitor",
            "obj_type": "profile",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "2D Z-Normal",
                "y min": 0.0,
                "y max": 2.04e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "frequency points": 30,
                "output Hx": 0,
                "output Hy": 0,
                "output Hz": 0
            }
        }
    }
}
2024-02-29 00:19:33,702 - template_logger - INFO - Successfully saved output to runs\test_run\sim.json
2024-02-29 00:55:02,655 - template_logger - INFO - Rendered Output:
#* Original Properties

start_from_step: 0
shelf_fn: save_state
restart_epoch: 0
restart_iter: 0
lumapi_filepath_local: C:\Program Files\Lumerical\v212\api\python\lumapi.py
lumapi_filepath_hpc: /central/home/ifoo/lumerical/2021a_r22/api/python/lumapi.py
simulator_name: LumericalFDTD
simulator_dimension: 2D
simulator_max_wait_time: 3600
use_autograd: False
convert_existing: False
mesh_spacing_um: 0.051
geometry_spacing_lateral_um: 0.085
device_scale_um: 0.051
use_smooth_blur: False
min_feature_size_um: 0.085
background_index: 1.5
min_device_index: 1.5
max_device_index: 2.4
init_permittivity_0_1_scale: 0.5
binarize_3_levels: False
focal_plane_center_lateral_um: 0
num_vertical_layers: 5
vertical_layer_height_um: 0.408
device_size_lateral_um: 2.04
device_vertical_minimum_um: 0
objects_above_device: []
num_sidewalls: 0
sidewall_material: etch
sidewall_extend_pml: False
sidewall_extend_focalplane: True
sidewall_thickness_um: 0.085
sidewall_vertical_minimum_um: -0.765
add_infrared: False
lambda_min_um: 0.45
lambda_max_um: 0.75
lambda_min_eval_um: 0.45
lambda_max_eval_um: 0.75
num_bands: 2
num_points_per_band: 15
num_dispersive_ranges: 1
add_pdaf: False
pdaf_angle_phi_degrees: 45
pdaf_angle_theta_degrees: -8
pdaf_adj_src_idx: 0
fdtd_simulation_time_fs: 600
weight_by_individual_wavelength: True
use_gaussian_sources: True
use_airy_approximation: True
f_number: 2.2
airy_correction_factor: 0.84
beam_size_multiplier: 1
source_angle_theta_vacuum_deg: 0
source_angle_phi_deg: 0
xy_phi_rotations: [0, 90]
xy_adjtheta_rotations: [90, 0]
xy_pol_rotations: [0, 90]
xy_names: ['x', 'y']
use_source_aperture: True
num_focal_spots: 2
dispersive_range_to_adjoint_src_map: [[0, 1, 2, 3]]
adjoint_src_to_dispersive_range_map: [0, 0, 0, 0]
enforce_xy_gradient_symmetry: False
weight_by_quadrant_transmission: True
max_epochs: 1
iter_per_epoch: 100
total_num_iterations: 80
epoch_list: [0, 16, 32, 48, 64, 80]
optimizer_algorithm: ADAM
adam_betas: (0.9, 0.999)
use_fixed_step_size: True
fixed_step_size: 0.01
epoch_start_design_change_max: 0.15
epoch_end_design_change_max: 0.05
epoch_start_design_change_min: 0.05
epoch_end_design_change_min: 0
fom_types: ['transmission', 'overall_transmission', 'intensity']
optimization_fom: intensity
reinterpolate_permittivity: True
reinterpolate_permittivity_factor: 2
reinterpolate_type: nearest
border_optimization: False
layer_gradient: False
flip_gradient: False
polarizations_focal_plane_map: [['x', 'y'], ['x', 'y'], ['x', 'y'], ['x', 'y']]
weight_focal_plane_map_performance_weighting: [1.0, 1.0, 1.0, 1.0]
weight_focal_plane_map: [1.0, 1.0, 1.0, 1.0]
do_green_balance: False
polarization_name_to_idx: {'x': 0, 'y': 1, 'z': 2}
desired_peaks_per_band_um: [0.45, 0.54, 0.65]
explicit_band_centering: True
shuffle_green: False
infrared_center_um: 0.94
do_rejection: False
softplus_kappa: 2
evaluate_bordered_extended: False
do_normalize: False
should_fix_layers: True
fixed_layers: [1, 3]
fixed_layers_density: 0
mpi_exe: C:\ProgramData\Miniconda3\envs\def2\Library\bin\mpiexec.exe
solver_exe: C:\Program Files\Lumerical\v212\bin\fdtd-engine-msmpi.exe
nprocs: 8
optimizer: AdamOptimizer
optimizer_settings: {'step_size': 0.01, 'betas': [0.9, 0.999], 'eps': '1e-8', 'moments': [0.0, 0.0]}
fom_dict: [{'fwd': [0], 'adj': [0], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}, {'fwd': [0], 'adj': [2], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}]
figures_of_merit: {'fom_0': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_0']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_0x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29], 'weight': 1.0}, 'fom_1': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_y', 'focal_monitor_1']], 'grad_monitors': [['forward_src_y', 'design_efield_monitor'], ['adj_src_0y', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29], 'weight': 1.0}}


#
# Derived Properties
#

#* Mesh Properties

min_feature_size_voxels: 1.0
blur_half_width_voxels: 0

#* Optical Properties
min_device_permittivity: 2.25
max_device_permittivity: 5.76
focal_length_um: 1.5299999999999998
focal_plane_center_vertical_um: -1.5299999999999998

#* Device Properties
vertical_layer_height_voxels: 8
device_size_vertical_um: 2.04
device_voxels_lateral: 24
device_voxels_vertical: 40
device_voxels_simulation_mesh_lateral: 41
device_voxels_simulation_mesh_vertical: 42
device_vertical_maximum_um: 2.04
device_size_lateral_bordered_um: 2.04
device_voxels_simulation_mesh_lateral_bordered: 41
border_size_um: 0.255
border_size_voxels: 3
device_voxels_lateral_bordered: 24

#* FDTD Properties

vertical_gap_size_um: 1.2750000000000001
lateral_gap_size_um: 0.51
fdtd_region_size_vertical_um: 6.119999999999999
fdtd_region_size_lateral_um: 3.06
fdtd_region_maximum_vertical_um: 3.3150000000000004
fdtd_region_minimum_vertical_um: -2.8049999999999997

#* Surrounding Properties
pec_aperture_thickness_um: 0.153
sidewall_x_positions_um: [1.0625, 0, -1.0625, 0]
sidewall_y_positions_um: [0, 1.0625, 0, -1.0625]
sidewall_xspan_positions_um: [0.085, 2.21, 0.085, 2.21]
sidewall_yspan_positions_um: [2.21, 0.085, 2.21, 0.085]

#* Spectral Properties
bandwidth_um: 0.3
num_design_frequency_points: 30
num_eval_frequency_points: 180
lambda_values_um: [0.45, 0.46034482758620693, 0.4706896551724138, 0.4810344827586207, 0.4913793103448276, 0.5017241379310345, 0.5120689655172413, 0.5224137931034483, 0.5327586206896552, 0.5431034482758621, 0.553448275862069, 0.5637931034482759, 0.5741379310344827, 0.5844827586206897, 0.5948275862068966, 0.6051724137931035, 0.6155172413793104, 0.6258620689655172, 0.6362068965517241, 0.646551724137931, 0.656896551724138, 0.6672413793103449, 0.6775862068965517, 0.6879310344827586, 0.6982758620689655, 0.7086206896551724, 0.7189655172413794, 0.7293103448275862, 0.7396551724137932, 0.75]
max_intensity_by_wavelength: [36.53530864197531, 34.91172214507147, 33.39400448147702, 31.973147313112626, 30.641080455524776, 29.39055703168361, 28.215054699633836, 27.108690433399783, 26.066146772656342, 25.082607810531623, 24.153703477256624, 23.275460913316312, 22.44426191957724, 21.65680563169482, 20.910075698382695, 20.201311352992263, 19.527981859410428, 18.887763889837522, 18.278521456217273, 17.698288071111115, 17.145250859390607, 16.617736380692932, 16.114197955312115, 15.633204314043255, 15.173429416247526, 14.733643300714537, 14.312703851307443, 13.90954937433284, 13.52319189745763, 13.152711111111115]
dispersive_range_size_um: 0.3
dispersive_ranges_um: [[0.45, 0.75]]

#* PDAF Functionality Properties
pdaf_focal_spot_x_um: 0.51
pdaf_focal_spot_y_um: 0.51
pdaf_lambda_min_um: 0.45
pdaf_lambda_max_um: 0.55
pdaf_lambda_values_um: [0.45, 0.453448275862069, 0.45689655172413796, 0.46034482758620693, 0.4637931034482759, 0.4672413793103448, 0.4706896551724138, 0.47413793103448276, 0.47758620689655173, 0.4810344827586207, 0.4844827586206897, 0.48793103448275865, 0.4913793103448276, 0.4948275862068966, 0.49827586206896557, 0.5017241379310345, 0.5051724137931035, 0.5086206896551725, 0.5120689655172415, 0.5155172413793103, 0.5189655172413794, 0.5224137931034483, 0.5258620689655172, 0.5293103448275862, 0.5327586206896552, 0.5362068965517242, 0.5396551724137931, 0.5431034482758621, 0.5465517241379311, 0.55]
pdaf_max_intensity_by_wavelength: [36.53530864197531, 35.98175136260464, 35.440680099679604, 34.91172214507147, 34.394518594270394, 33.88872373742188, 33.39400448147702, 32.9100398016529, 32.436520220516364, 31.973147313112626, 31.519633236661136, 31.075700283434678, 30.641080455524776, 30.21551506027753, 29.798754325259512, 29.39055703168361, 28.990690165290218, 28.598928583740303, 28.215054699633825, 27.838858178320162, 27.470135649716887, 27.108690433399783, 26.754332276269828, 26.40687710214432, 26.066146772656342, 25.73196885888277, 25.404176423154265, 25.082607810531623, 24.767106449462133, 24.457520661157027]

#* Forward (Input) Source Properties
lateral_aperture_um: 2.244
src_maximum_vertical_um: 2.89
src_minimum_vertical_um: -2.1675
mid_lambda_um: 0.6
gaussian_waist_radius_um: 1
source_angle_theta_rad: 0.0
source_angle_theta_deg: 0.0

#* Adjoint Source Properties
adjoint_vertical_um: -1.5299999999999998
num_adjoint_sources: 2
adjoint_x_positions_um: [0.51, -0.51, -0.51, 0.51]
adjoint_y_positions_um: [0.51, 0.51, -0.51, -0.51]

#* Optimization Properties
total_iters: 100
epoch_range_design_change_max: 0.09999999999999999
epoch_range_design_change_min: 0.05
spectral_focal_plane_map: [[0, 15], [15, 30], [30, 45], [15, 30]]
desired_peak_location_per_band: [0, 9, 19]
2024-02-29 00:55:02,659 - template_logger - INFO - Successfully saved output to runs\test_run\processed_config.yml
2024-02-29 00:57:35,171 - template_logger - INFO - Rendered Output:
#* Original Properties

start_from_step: 0
shelf_fn: save_state
restart_epoch: 0
restart_iter: 0
lumapi_filepath_local: C:\Program Files\Lumerical\v212\api\python\lumapi.py
lumapi_filepath_hpc: /central/home/ifoo/lumerical/2021a_r22/api/python/lumapi.py
simulator_name: LumericalFDTD
simulator_dimension: 2D
simulator_max_wait_time: 3600
use_autograd: False
convert_existing: False
mesh_spacing_um: 0.051
geometry_spacing_lateral_um: 0.085
device_scale_um: 0.051
use_smooth_blur: False
min_feature_size_um: 0.085
background_index: 1.5
min_device_index: 1.5
max_device_index: 2.4
init_permittivity_0_1_scale: 0.5
binarize_3_levels: False
focal_plane_center_lateral_um: 0
num_vertical_layers: 5
vertical_layer_height_um: 0.408
device_size_lateral_um: 2.04
device_vertical_minimum_um: 0
objects_above_device: []
num_sidewalls: 0
sidewall_material: etch
sidewall_extend_pml: False
sidewall_extend_focalplane: True
sidewall_thickness_um: 0.085
sidewall_vertical_minimum_um: -0.765
add_infrared: False
lambda_min_um: 0.45
lambda_max_um: 0.75
lambda_min_eval_um: 0.45
lambda_max_eval_um: 0.75
num_bands: 2
num_points_per_band: 15
num_dispersive_ranges: 1
add_pdaf: False
pdaf_angle_phi_degrees: 45
pdaf_angle_theta_degrees: -8
pdaf_adj_src_idx: 0
fdtd_simulation_time_fs: 600
weight_by_individual_wavelength: True
use_gaussian_sources: True
use_airy_approximation: True
f_number: 2.2
airy_correction_factor: 0.84
beam_size_multiplier: 1
source_angle_theta_vacuum_deg: 0
source_angle_phi_deg: 0
xy_phi_rotations: [0, 90]
xy_adjtheta_rotations: [90, 0]
xy_pol_rotations: [0, 90]
xy_names: ['x', 'y']
use_source_aperture: True
num_focal_spots: 2
dispersive_range_to_adjoint_src_map: [[0, 1, 2, 3]]
adjoint_src_to_dispersive_range_map: [0, 0, 0, 0]
enforce_xy_gradient_symmetry: False
weight_by_quadrant_transmission: True
max_epochs: 1
iter_per_epoch: 100
total_num_iterations: 80
epoch_list: [0, 16, 32, 48, 64, 80]
optimizer_algorithm: ADAM
adam_betas: (0.9, 0.999)
use_fixed_step_size: True
fixed_step_size: 0.01
epoch_start_design_change_max: 0.15
epoch_end_design_change_max: 0.05
epoch_start_design_change_min: 0.05
epoch_end_design_change_min: 0
fom_types: ['transmission', 'overall_transmission', 'intensity']
optimization_fom: intensity
reinterpolate_permittivity: True
reinterpolate_permittivity_factor: 2
reinterpolate_type: nearest
border_optimization: False
layer_gradient: False
flip_gradient: False
polarizations_focal_plane_map: [['x', 'y'], ['x', 'y'], ['x', 'y'], ['x', 'y']]
weight_focal_plane_map_performance_weighting: [1.0, 1.0, 1.0, 1.0]
weight_focal_plane_map: [1.0, 1.0, 1.0, 1.0]
do_green_balance: False
polarization_name_to_idx: {'x': 0, 'y': 1, 'z': 2}
desired_peaks_per_band_um: [0.45, 0.54, 0.65]
explicit_band_centering: True
shuffle_green: False
infrared_center_um: 0.94
do_rejection: False
softplus_kappa: 2
evaluate_bordered_extended: False
do_normalize: False
should_fix_layers: True
fixed_layers: [1, 3]
fixed_layers_density: 0
mpi_exe: C:\ProgramData\Miniconda3\envs\def2\Library\bin\mpiexec.exe
solver_exe: C:\Program Files\Lumerical\v212\bin\fdtd-engine-msmpi.exe
nprocs: 8
optimizer: AdamOptimizer
optimizer_settings: {'step_size': 0.01, 'betas': [0.9, 0.999], 'eps': '1e-8', 'moments': [0.0, 0.0]}
fom_dict: [{'fwd': [0], 'adj': [0], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}, {'fwd': [0], 'adj': [2], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}]
figures_of_merit: {'fom_0': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_0']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_0x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29], 'weight': 1.0}, 'fom_1': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_y', 'focal_monitor_1']], 'grad_monitors': [['forward_src_y', 'design_efield_monitor'], ['adj_src_0y', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29], 'weight': 1.0}}


#
# Derived Properties
#

#* Mesh Properties

min_feature_size_voxels: 1.0
blur_half_width_voxels: 0

#* Optical Properties
min_device_permittivity: 2.25
max_device_permittivity: 5.76
focal_length_um: 1.5299999999999998
focal_plane_center_vertical_um: -1.5299999999999998

#* Device Properties
vertical_layer_height_voxels: 8
device_size_vertical_um: 2.04
device_voxels_lateral: 24
device_voxels_vertical: 40
device_voxels_simulation_mesh_lateral: 41
device_voxels_simulation_mesh_vertical: 42
device_vertical_maximum_um: 2.04
device_size_lateral_bordered_um: 2.04
device_voxels_simulation_mesh_lateral_bordered: 41
border_size_um: 0.255
border_size_voxels: 3
device_voxels_lateral_bordered: 24

#* FDTD Properties

vertical_gap_size_um: 1.2750000000000001
lateral_gap_size_um: 0.51
fdtd_region_size_vertical_um: 6.119999999999999
fdtd_region_size_lateral_um: 3.06
fdtd_region_maximum_vertical_um: 3.3150000000000004
fdtd_region_minimum_vertical_um: -2.8049999999999997

#* Surrounding Properties
pec_aperture_thickness_um: 0.153
sidewall_x_positions_um: [1.0625, 0, -1.0625, 0]
sidewall_y_positions_um: [0, 1.0625, 0, -1.0625]
sidewall_xspan_positions_um: [0.085, 2.21, 0.085, 2.21]
sidewall_yspan_positions_um: [2.21, 0.085, 2.21, 0.085]

#* Spectral Properties
bandwidth_um: 0.3
num_design_frequency_points: 30
num_eval_frequency_points: 180
lambda_values_um: [0.45, 0.46034482758620693, 0.4706896551724138, 0.4810344827586207, 0.4913793103448276, 0.5017241379310345, 0.5120689655172413, 0.5224137931034483, 0.5327586206896552, 0.5431034482758621, 0.553448275862069, 0.5637931034482759, 0.5741379310344827, 0.5844827586206897, 0.5948275862068966, 0.6051724137931035, 0.6155172413793104, 0.6258620689655172, 0.6362068965517241, 0.646551724137931, 0.656896551724138, 0.6672413793103449, 0.6775862068965517, 0.6879310344827586, 0.6982758620689655, 0.7086206896551724, 0.7189655172413794, 0.7293103448275862, 0.7396551724137932, 0.75]
max_intensity_by_wavelength: [36.53530864197531, 34.91172214507147, 33.39400448147702, 31.973147313112626, 30.641080455524776, 29.39055703168361, 28.215054699633836, 27.108690433399783, 26.066146772656342, 25.082607810531623, 24.153703477256624, 23.275460913316312, 22.44426191957724, 21.65680563169482, 20.910075698382695, 20.201311352992263, 19.527981859410428, 18.887763889837522, 18.278521456217273, 17.698288071111115, 17.145250859390607, 16.617736380692932, 16.114197955312115, 15.633204314043255, 15.173429416247526, 14.733643300714537, 14.312703851307443, 13.90954937433284, 13.52319189745763, 13.152711111111115]
dispersive_range_size_um: 0.3
dispersive_ranges_um: [[0.45, 0.75]]

#* PDAF Functionality Properties
pdaf_focal_spot_x_um: 0.51
pdaf_focal_spot_y_um: 0.51
pdaf_lambda_min_um: 0.45
pdaf_lambda_max_um: 0.55
pdaf_lambda_values_um: [0.45, 0.453448275862069, 0.45689655172413796, 0.46034482758620693, 0.4637931034482759, 0.4672413793103448, 0.4706896551724138, 0.47413793103448276, 0.47758620689655173, 0.4810344827586207, 0.4844827586206897, 0.48793103448275865, 0.4913793103448276, 0.4948275862068966, 0.49827586206896557, 0.5017241379310345, 0.5051724137931035, 0.5086206896551725, 0.5120689655172415, 0.5155172413793103, 0.5189655172413794, 0.5224137931034483, 0.5258620689655172, 0.5293103448275862, 0.5327586206896552, 0.5362068965517242, 0.5396551724137931, 0.5431034482758621, 0.5465517241379311, 0.55]
pdaf_max_intensity_by_wavelength: [36.53530864197531, 35.98175136260464, 35.440680099679604, 34.91172214507147, 34.394518594270394, 33.88872373742188, 33.39400448147702, 32.9100398016529, 32.436520220516364, 31.973147313112626, 31.519633236661136, 31.075700283434678, 30.641080455524776, 30.21551506027753, 29.798754325259512, 29.39055703168361, 28.990690165290218, 28.598928583740303, 28.215054699633825, 27.838858178320162, 27.470135649716887, 27.108690433399783, 26.754332276269828, 26.40687710214432, 26.066146772656342, 25.73196885888277, 25.404176423154265, 25.082607810531623, 24.767106449462133, 24.457520661157027]

#* Forward (Input) Source Properties
lateral_aperture_um: 2.244
src_maximum_vertical_um: 2.89
src_minimum_vertical_um: -2.1675
mid_lambda_um: 0.6
gaussian_waist_radius_um: 1
source_angle_theta_rad: 0.0
source_angle_theta_deg: 0.0

#* Adjoint Source Properties
adjoint_vertical_um: -1.5299999999999998
num_adjoint_sources: 2
adjoint_x_positions_um: [0.51, -0.51, -0.51, 0.51]
adjoint_y_positions_um: [0.51, 0.51, -0.51, -0.51]

#* Optimization Properties
total_iters: 100
epoch_range_design_change_max: 0.09999999999999999
epoch_range_design_change_min: 0.05
spectral_focal_plane_map: [[0, 15], [15, 30], [30, 45], [15, 30]]
desired_peak_location_per_band: [0, 9, 19]
2024-02-29 00:57:35,175 - template_logger - INFO - Successfully saved output to runs\test_run\processed_config.yml
2024-02-29 00:57:41,601 - template_logger - INFO - Rendered Output:
{ 
    "info": {
        "name": "optimization",
        "path": "",
        "simulator_name": "LumericalFDTD",
        "coordinates": {}
    },

    "objects": {
        "FDTD": {
            
            "name": "FDTD",
            "obj_type": "fdtd",
            "properties": {
                "dimension": "2D",
                "x span": 3.06e-06,
                "y max": 3.3150000000000004e-06,
                "y min": -2.8049999999999994e-06,
                
                "simulation time": 6.000000000000001e-13,
                "index": 1.5
            }
        },
        "forward_src_x": {
            "name": "forward_src_x",
            "obj_type": "gaussian",
            "attached_monitor": 0,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 0,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
        "forward_src_y": {
            "name": "forward_src_y",
            "obj_type": "gaussian",
            "attached_monitor": 1,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 90,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
            "adj_src_0x": {
                "name": "adj_src_0x",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_0y": {
                "name": "adj_src_0y",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 0,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_1x": {
                "name": "adj_src_1x",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_1y": {
                "name": "adj_src_1y",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 0,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
        "focal_monitor_0": {
            "name": "focal_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": 5.1e-07,
                "y": -1.5299999999999998e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "focal_monitor_1": {
            "name": "focal_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": -5.1e-07,
                "y": -1.5299999999999998e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_0": {
            "name": "transmission_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": 5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_1": {
            "name": "transmission_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": -5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },

        "transmission_focal_monitor_": {
            "name": "transmission_focal_monitor_",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": 0,
                "x span": 2.04e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "PEC_screen": {
            "name": "PEC_screen",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 3.5904e-06,
                "y min": 2.193e-06,
                "y max": 2.346e-06,
                
                "material": "PEC (Perfect Electrical Conductor)"
            }
        },
        "source_aperture": {
            "name": "source_aperture",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 2.04e-06,
                "y min": 2.193e-06,
                "y max": 2.346e-06,
                
                "index": 1.5
            }
        },
        "design_import": {
            "name": "design_import",
            "obj_type": "import",
            "dev_id": 0,                
            "properties": {
                "x span": 2.04e-06,
                "y min": 0.0,
                "y max": 2.04e-06
                
            }
        },
        "design_mesh": {
            "name": "design_mesh",
            "obj_type": "mesh",
            "dev_id": 0,
            "properties": {
                "x": 0,
                "x span": 3.06e-06,
                "y min": -5e-07,
                "y max": 2.54e-06,
                
                "dx": 5.0999999999999993e-08,
                "dy": 5.0999999999999993e-08,
                "dz": 5.0999999999999993e-08
            }
        },
        "design_index_monitor": {
            "name": "design_index_monitor",
            "obj_type": "index",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "2D Z-Normal",
                "y min": 0.0,
                "y max": 2.04e-06,
                
                "spatial interpolation": "nearest mesh cell"
            }
        },
        "design_efield_monitor": {
            "name": "design_efield_monitor",
            "obj_type": "profile",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "2D Z-Normal",
                "y min": 0.0,
                "y max": 2.04e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "frequency points": 30,
                "output Hx": 0,
                "output Hy": 0,
                "output Hz": 0
            }
        }
    }
}
2024-02-29 00:57:41,604 - template_logger - INFO - Successfully saved output to runs\test_run\sim.json
2024-02-29 01:14:01,061 - template_logger - INFO - Rendered Output:
#* Original Properties

start_from_step: 0
shelf_fn: save_state
restart_epoch: 0
restart_iter: 0
lumapi_filepath_local: C:\Program Files\Lumerical\v212\api\python\lumapi.py
lumapi_filepath_hpc: /central/home/ifoo/lumerical/2021a_r22/api/python/lumapi.py
simulator_name: LumericalFDTD
simulator_dimension: 2D
simulator_max_wait_time: 3600
use_autograd: False
convert_existing: False
mesh_spacing_um: 0.051
geometry_spacing_lateral_um: 0.085
device_scale_um: 0.051
use_smooth_blur: False
min_feature_size_um: 0.085
background_index: 1.5
min_device_index: 1.5
max_device_index: 2.4
init_permittivity_0_1_scale: 0.5
binarize_3_levels: False
focal_plane_center_lateral_um: 0
num_vertical_layers: 5
vertical_layer_height_um: 0.408
device_size_lateral_um: 2.04
device_vertical_minimum_um: 0
objects_above_device: []
num_sidewalls: 0
sidewall_material: etch
sidewall_extend_pml: False
sidewall_extend_focalplane: True
sidewall_thickness_um: 0.085
sidewall_vertical_minimum_um: -0.765
add_infrared: False
lambda_min_um: 0.45
lambda_max_um: 0.75
lambda_min_eval_um: 0.45
lambda_max_eval_um: 0.75
num_bands: 2
num_points_per_band: 15
num_dispersive_ranges: 1
add_pdaf: False
pdaf_angle_phi_degrees: 45
pdaf_angle_theta_degrees: -8
pdaf_adj_src_idx: 0
fdtd_simulation_time_fs: 600
weight_by_individual_wavelength: True
use_gaussian_sources: True
use_airy_approximation: True
f_number: 2.2
airy_correction_factor: 0.84
beam_size_multiplier: 1
source_angle_theta_vacuum_deg: 0
source_angle_phi_deg: 0
xy_phi_rotations: [0, 90]
xy_adjtheta_rotations: [90, 0]
xy_pol_rotations: [0, 90]
xy_names: ['x', 'y']
use_source_aperture: True
num_focal_spots: 2
dispersive_range_to_adjoint_src_map: [[0, 1, 2, 3]]
adjoint_src_to_dispersive_range_map: [0, 0, 0, 0]
enforce_xy_gradient_symmetry: False
weight_by_quadrant_transmission: True
max_epochs: 1
iter_per_epoch: 100
total_num_iterations: 80
epoch_list: [0, 16, 32, 48, 64, 80]
optimizer_algorithm: ADAM
adam_betas: (0.9, 0.999)
use_fixed_step_size: True
fixed_step_size: 0.01
epoch_start_design_change_max: 0.15
epoch_end_design_change_max: 0.05
epoch_start_design_change_min: 0.05
epoch_end_design_change_min: 0
fom_types: ['transmission', 'overall_transmission', 'intensity']
optimization_fom: intensity
reinterpolate_permittivity: True
reinterpolate_permittivity_factor: 2
reinterpolate_type: nearest
border_optimization: False
layer_gradient: False
flip_gradient: False
polarizations_focal_plane_map: [['x', 'y'], ['x', 'y'], ['x', 'y'], ['x', 'y']]
weight_focal_plane_map_performance_weighting: [1.0, 1.0, 1.0, 1.0]
weight_focal_plane_map: [1.0, 1.0, 1.0, 1.0]
do_green_balance: False
polarization_name_to_idx: {'x': 0, 'y': 1, 'z': 2}
desired_peaks_per_band_um: [0.45, 0.54, 0.65]
explicit_band_centering: True
shuffle_green: False
infrared_center_um: 0.94
do_rejection: False
softplus_kappa: 2
evaluate_bordered_extended: False
do_normalize: False
should_fix_layers: True
fixed_layers: [1, 3]
fixed_layers_density: 0
mpi_exe: C:\ProgramData\Miniconda3\envs\def2\Library\bin\mpiexec.exe
solver_exe: C:\Program Files\Lumerical\v212\bin\fdtd-engine-msmpi.exe
nprocs: 8
optimizer: AdamOptimizer
optimizer_settings: {'step_size': 0.01, 'betas': [0.9, 0.999], 'eps': '1e-8', 'moments': [0.0, 0.0]}
fom_dict: [{'fwd': [0], 'adj': [0], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}, {'fwd': [0], 'adj': [2], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}]
figures_of_merit: {'fom_0': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_0']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_0x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29], 'weight': 1.0}, 'fom_1': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_y', 'focal_monitor_1']], 'grad_monitors': [['forward_src_y', 'design_efield_monitor'], ['adj_src_1y', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29], 'weight': 1.0}}


#
# Derived Properties
#

#* Mesh Properties

min_feature_size_voxels: 1.0
blur_half_width_voxels: 0

#* Optical Properties
min_device_permittivity: 2.25
max_device_permittivity: 5.76
focal_length_um: 1.5299999999999998
focal_plane_center_vertical_um: -1.5299999999999998

#* Device Properties
vertical_layer_height_voxels: 8
device_size_vertical_um: 2.04
device_voxels_lateral: 24
device_voxels_vertical: 40
device_voxels_simulation_mesh_lateral: 41
device_voxels_simulation_mesh_vertical: 42
device_vertical_maximum_um: 2.04
device_size_lateral_bordered_um: 2.04
device_voxels_simulation_mesh_lateral_bordered: 41
border_size_um: 0.255
border_size_voxels: 3
device_voxels_lateral_bordered: 24

#* FDTD Properties

vertical_gap_size_um: 1.2750000000000001
lateral_gap_size_um: 0.51
fdtd_region_size_vertical_um: 6.119999999999999
fdtd_region_size_lateral_um: 3.06
fdtd_region_maximum_vertical_um: 3.3150000000000004
fdtd_region_minimum_vertical_um: -2.8049999999999997

#* Surrounding Properties
pec_aperture_thickness_um: 0.153
sidewall_x_positions_um: [1.0625, 0, -1.0625, 0]
sidewall_y_positions_um: [0, 1.0625, 0, -1.0625]
sidewall_xspan_positions_um: [0.085, 2.21, 0.085, 2.21]
sidewall_yspan_positions_um: [2.21, 0.085, 2.21, 0.085]

#* Spectral Properties
bandwidth_um: 0.3
num_design_frequency_points: 30
num_eval_frequency_points: 180
lambda_values_um: [0.45, 0.46034482758620693, 0.4706896551724138, 0.4810344827586207, 0.4913793103448276, 0.5017241379310345, 0.5120689655172413, 0.5224137931034483, 0.5327586206896552, 0.5431034482758621, 0.553448275862069, 0.5637931034482759, 0.5741379310344827, 0.5844827586206897, 0.5948275862068966, 0.6051724137931035, 0.6155172413793104, 0.6258620689655172, 0.6362068965517241, 0.646551724137931, 0.656896551724138, 0.6672413793103449, 0.6775862068965517, 0.6879310344827586, 0.6982758620689655, 0.7086206896551724, 0.7189655172413794, 0.7293103448275862, 0.7396551724137932, 0.75]
max_intensity_by_wavelength: [36.53530864197531, 34.91172214507147, 33.39400448147702, 31.973147313112626, 30.641080455524776, 29.39055703168361, 28.215054699633836, 27.108690433399783, 26.066146772656342, 25.082607810531623, 24.153703477256624, 23.275460913316312, 22.44426191957724, 21.65680563169482, 20.910075698382695, 20.201311352992263, 19.527981859410428, 18.887763889837522, 18.278521456217273, 17.698288071111115, 17.145250859390607, 16.617736380692932, 16.114197955312115, 15.633204314043255, 15.173429416247526, 14.733643300714537, 14.312703851307443, 13.90954937433284, 13.52319189745763, 13.152711111111115]
dispersive_range_size_um: 0.3
dispersive_ranges_um: [[0.45, 0.75]]

#* PDAF Functionality Properties
pdaf_focal_spot_x_um: 0.51
pdaf_focal_spot_y_um: 0.51
pdaf_lambda_min_um: 0.45
pdaf_lambda_max_um: 0.55
pdaf_lambda_values_um: [0.45, 0.453448275862069, 0.45689655172413796, 0.46034482758620693, 0.4637931034482759, 0.4672413793103448, 0.4706896551724138, 0.47413793103448276, 0.47758620689655173, 0.4810344827586207, 0.4844827586206897, 0.48793103448275865, 0.4913793103448276, 0.4948275862068966, 0.49827586206896557, 0.5017241379310345, 0.5051724137931035, 0.5086206896551725, 0.5120689655172415, 0.5155172413793103, 0.5189655172413794, 0.5224137931034483, 0.5258620689655172, 0.5293103448275862, 0.5327586206896552, 0.5362068965517242, 0.5396551724137931, 0.5431034482758621, 0.5465517241379311, 0.55]
pdaf_max_intensity_by_wavelength: [36.53530864197531, 35.98175136260464, 35.440680099679604, 34.91172214507147, 34.394518594270394, 33.88872373742188, 33.39400448147702, 32.9100398016529, 32.436520220516364, 31.973147313112626, 31.519633236661136, 31.075700283434678, 30.641080455524776, 30.21551506027753, 29.798754325259512, 29.39055703168361, 28.990690165290218, 28.598928583740303, 28.215054699633825, 27.838858178320162, 27.470135649716887, 27.108690433399783, 26.754332276269828, 26.40687710214432, 26.066146772656342, 25.73196885888277, 25.404176423154265, 25.082607810531623, 24.767106449462133, 24.457520661157027]

#* Forward (Input) Source Properties
lateral_aperture_um: 2.244
src_maximum_vertical_um: 2.89
src_minimum_vertical_um: -2.1675
mid_lambda_um: 0.6
gaussian_waist_radius_um: 1
source_angle_theta_rad: 0.0
source_angle_theta_deg: 0.0

#* Adjoint Source Properties
adjoint_vertical_um: -1.5299999999999998
num_adjoint_sources: 2
adjoint_x_positions_um: [0.51, -0.51, -0.51, 0.51]
adjoint_y_positions_um: [0.51, 0.51, -0.51, -0.51]

#* Optimization Properties
total_iters: 100
epoch_range_design_change_max: 0.09999999999999999
epoch_range_design_change_min: 0.05
spectral_focal_plane_map: [[0, 15], [15, 30], [30, 45], [15, 30]]
desired_peak_location_per_band: [0, 9, 19]
2024-02-29 01:14:01,065 - template_logger - INFO - Successfully saved output to runs\test_run\processed_config.yml
2024-02-29 01:14:10,579 - template_logger - INFO - Rendered Output:
{ 
    "info": {
        "name": "optimization",
        "path": "",
        "simulator_name": "LumericalFDTD",
        "coordinates": {}
    },

    "objects": {
        "FDTD": {
            
            "name": "FDTD",
            "obj_type": "fdtd",
            "properties": {
                "dimension": "2D",
                "x span": 3.06e-06,
                "y max": 3.3150000000000004e-06,
                "y min": -2.8049999999999994e-06,
                
                "simulation time": 6.000000000000001e-13,
                "index": 1.5
            }
        },
        "forward_src_x": {
            "name": "forward_src_x",
            "obj_type": "gaussian",
            "attached_monitor": 0,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 0,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
        "forward_src_y": {
            "name": "forward_src_y",
            "obj_type": "gaussian",
            "attached_monitor": 1,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 90,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
            "adj_src_0x": {
                "name": "adj_src_0x",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_0y": {
                "name": "adj_src_0y",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 0,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_1x": {
                "name": "adj_src_1x",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_1y": {
                "name": "adj_src_1y",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 0,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
        "focal_monitor_0": {
            "name": "focal_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": 5.1e-07,
                "y": -1.5299999999999998e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "focal_monitor_1": {
            "name": "focal_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": -5.1e-07,
                "y": -1.5299999999999998e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_0": {
            "name": "transmission_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": 5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_1": {
            "name": "transmission_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": -5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },

        "transmission_focal_monitor_": {
            "name": "transmission_focal_monitor_",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": 0,
                "x span": 2.04e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "PEC_screen": {
            "name": "PEC_screen",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 3.5904e-06,
                "y min": 2.193e-06,
                "y max": 2.346e-06,
                
                "material": "PEC (Perfect Electrical Conductor)"
            }
        },
        "source_aperture": {
            "name": "source_aperture",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 2.04e-06,
                "y min": 2.193e-06,
                "y max": 2.346e-06,
                
                "index": 1.5
            }
        },
        "design_import": {
            "name": "design_import",
            "obj_type": "import",
            "dev_id": 0,                
            "properties": {
                "x span": 2.04e-06,
                "y min": 0.0,
                "y max": 2.04e-06
                
            }
        },
        "design_mesh": {
            "name": "design_mesh",
            "obj_type": "mesh",
            "dev_id": 0,
            "properties": {
                "x": 0,
                "x span": 3.06e-06,
                "y min": -5e-07,
                "y max": 2.54e-06,
                
                "dx": 5.0999999999999993e-08,
                "dy": 5.0999999999999993e-08,
                "dz": 5.0999999999999993e-08
            }
        },
        "design_index_monitor": {
            "name": "design_index_monitor",
            "obj_type": "index",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "2D Z-Normal",
                "y min": 0.0,
                "y max": 2.04e-06,
                
                "spatial interpolation": "nearest mesh cell"
            }
        },
        "design_efield_monitor": {
            "name": "design_efield_monitor",
            "obj_type": "profile",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "2D Z-Normal",
                "y min": 0.0,
                "y max": 2.04e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "frequency points": 30,
                "output Hx": 0,
                "output Hy": 0,
                "output Hz": 0
            }
        }
    }
}
2024-02-29 01:14:10,584 - template_logger - INFO - Successfully saved output to runs\test_run\sim.json
2024-02-29 10:32:29,211 - template_logger - INFO - Rendered Output:
#* Original Properties

start_from_step: 0
shelf_fn: save_state
restart_epoch: 0
restart_iter: 0
lumapi_filepath_local: C:\Program Files\Lumerical\v212\api\python\lumapi.py
lumapi_filepath_hpc: /central/home/ifoo/lumerical/2021a_r22/api/python/lumapi.py
simulator_name: LumericalFDTD
simulator_dimension: 2D
simulator_max_wait_time: 3600
use_autograd: False
convert_existing: False
mesh_spacing_um: 0.051
geometry_spacing_lateral_um: 0.085
device_scale_um: 0.051
use_smooth_blur: False
min_feature_size_um: 0.085
background_index: 1.5
min_device_index: 1.5
max_device_index: 2.4
init_permittivity_0_1_scale: 0.5
binarize_3_levels: False
focal_plane_center_lateral_um: 0
num_vertical_layers: 5
vertical_layer_height_um: 0.408
device_size_lateral_um: 3.06
device_vertical_minimum_um: 0
objects_above_device: []
num_sidewalls: 0
sidewall_material: etch
sidewall_extend_pml: False
sidewall_extend_focalplane: True
sidewall_thickness_um: 0.085
sidewall_vertical_minimum_um: -0.765
add_infrared: False
lambda_min_um: 0.45
lambda_max_um: 0.75
lambda_min_eval_um: 0.45
lambda_max_eval_um: 0.75
num_bands: 2
num_points_per_band: 15
num_dispersive_ranges: 1
add_pdaf: False
pdaf_angle_phi_degrees: 45
pdaf_angle_theta_degrees: -8
pdaf_adj_src_idx: 0
fdtd_simulation_time_fs: 600
weight_by_individual_wavelength: True
use_gaussian_sources: True
use_airy_approximation: True
f_number: 2.2
airy_correction_factor: 0.84
beam_size_multiplier: 1
source_angle_theta_vacuum_deg: 0
source_angle_phi_deg: 0
xy_phi_rotations: [0, 90]
xy_adjtheta_rotations: [90, 0]
xy_pol_rotations: [0, 90]
xy_names: ['x', 'y']
use_source_aperture: True
num_focal_spots: 2
dispersive_range_to_adjoint_src_map: [[0, 1, 2, 3]]
adjoint_src_to_dispersive_range_map: [0, 0, 0, 0]
enforce_xy_gradient_symmetry: False
weight_by_quadrant_transmission: True
max_epochs: 2
iter_per_epoch: 40
epoch_start_design_change_max: 0.15
epoch_end_design_change_max: 0.05
epoch_start_design_change_min: 0.05
epoch_end_design_change_min: 0
fom_types: ['transmission', 'overall_transmission', 'intensity']
optimization_fom: intensity
reinterpolate_permittivity: True
reinterpolate_permittivity_factor: 2
reinterpolate_type: nearest
border_optimization: False
layer_gradient: False
flip_gradient: False
polarizations_focal_plane_map: [['x', 'y'], ['x', 'y'], ['x', 'y'], ['x', 'y']]
weight_focal_plane_map_performance_weighting: [1.0, 1.0, 1.0, 1.0]
weight_focal_plane_map: [1.0, 1.0, 1.0, 1.0]
do_green_balance: False
polarization_name_to_idx: {'x': 0, 'y': 1, 'z': 2}
desired_peaks_per_band_um: [0.45, 0.54, 0.65]
explicit_band_centering: True
shuffle_green: False
infrared_center_um: 0.94
do_rejection: False
softplus_kappa: 2
evaluate_bordered_extended: False
do_normalize: False
should_fix_layers: True
fixed_layers: [1, 3]
fixed_layers_density: 0
mpi_exe: C:\ProgramData\Miniconda3\envs\def2\Library\bin\mpiexec.exe
solver_exe: C:\Program Files\Lumerical\v212\bin\fdtd-engine-msmpi.exe
nprocs: 8
optimizer: AdamOptimizer
optimizer_settings: {'step_size': 0.01, 'betas': [0.9, 0.999], 'eps': '1e-8', 'moments': [0.0, 0.0]}
fom_dict: [{'fwd': [0], 'adj': [0], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}, {'fwd': [0], 'adj': [2], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}]
figures_of_merit: {'fom_0': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_0']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_0x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29], 'weight': 1.0}, 'fom_2': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_1']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_1x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29], 'weight': 1.0}}


#
# Derived Properties
#

#* Mesh Properties

min_feature_size_voxels: 1.0
blur_half_width_voxels: 0

#* Optical Properties
min_device_permittivity: 2.25
max_device_permittivity: 5.76
focal_length_um: 1.5299999999999998
focal_plane_center_vertical_um: -1.5299999999999998

#* Device Properties
vertical_layer_height_voxels: 8
device_size_vertical_um: 2.04
device_voxels_lateral: 36
device_voxels_vertical: 40
device_voxels_simulation_mesh_lateral: 61
device_voxels_simulation_mesh_vertical: 42
device_vertical_maximum_um: 2.04
device_size_lateral_bordered_um: 3.06
device_voxels_simulation_mesh_lateral_bordered: 61
border_size_um: 0.255
border_size_voxels: 3
device_voxels_lateral_bordered: 36

#* FDTD Properties

vertical_gap_size_um: 1.2750000000000001
lateral_gap_size_um: 0.51
fdtd_region_size_vertical_um: 7.140000000000001
fdtd_region_size_lateral_um: 4.08
fdtd_region_maximum_vertical_um: 3.3150000000000004
fdtd_region_minimum_vertical_um: -2.8049999999999997

#* Surrounding Properties
pec_aperture_thickness_um: 0.153
sidewall_x_positions_um: [1.5725, 0, -1.5725, 0]
sidewall_y_positions_um: [0, 1.5725, 0, -1.5725]
sidewall_xspan_positions_um: [0.085, 3.23, 0.085, 3.23]
sidewall_yspan_positions_um: [3.23, 0.085, 3.23, 0.085]

#* Spectral Properties
bandwidth_um: 0.3
num_design_frequency_points: 30
num_eval_frequency_points: 180
lambda_values_um: [0.45, 0.46034482758620693, 0.4706896551724138, 0.4810344827586207, 0.4913793103448276, 0.5017241379310345, 0.5120689655172413, 0.5224137931034483, 0.5327586206896552, 0.5431034482758621, 0.553448275862069, 0.5637931034482759, 0.5741379310344827, 0.5844827586206897, 0.5948275862068966, 0.6051724137931035, 0.6155172413793104, 0.6258620689655172, 0.6362068965517241, 0.646551724137931, 0.656896551724138, 0.6672413793103449, 0.6775862068965517, 0.6879310344827586, 0.6982758620689655, 0.7086206896551724, 0.7189655172413794, 0.7293103448275862, 0.7396551724137932, 0.75]
max_intensity_by_wavelength: [184.96000000000004, 176.74059335942434, 169.05714768747742, 161.8640582726327, 155.12046980609418, 148.78969497289827, 142.8387144168963, 137.23774531908643, 131.95986803657274, 126.98070204081635, 122.27812385361166, 117.83202087366384, 113.6240759678598, 109.63757851045504, 105.8572582230624, 102.26913872452334, 98.8604081632653, 95.61930469230246, 92.53501487209996, 89.59758336000002, 86.79783247566496, 84.12729042725798, 81.57812714876758, 79.14309683984399, 76.8154864197531, 74.58906920986735, 72.45806324724393, 70.41709370756001, 68.46115898087926, 66.58560000000003]
dispersive_range_size_um: 0.3
dispersive_ranges_um: [[0.45, 0.75]]

#* PDAF Functionality Properties
pdaf_focal_spot_x_um: 0.765
pdaf_focal_spot_y_um: 0.765
pdaf_lambda_min_um: 0.45
pdaf_lambda_max_um: 0.55
pdaf_lambda_values_um: [0.45, 0.453448275862069, 0.45689655172413796, 0.46034482758620693, 0.4637931034482759, 0.4672413793103448, 0.4706896551724138, 0.47413793103448276, 0.47758620689655173, 0.4810344827586207, 0.4844827586206897, 0.48793103448275865, 0.4913793103448276, 0.4948275862068966, 0.49827586206896557, 0.5017241379310345, 0.5051724137931035, 0.5086206896551725, 0.5120689655172415, 0.5155172413793103, 0.5189655172413794, 0.5224137931034483, 0.5258620689655172, 0.5293103448275862, 0.5327586206896552, 0.5362068965517242, 0.5396551724137931, 0.5431034482758621, 0.5465517241379311, 0.55]
pdaf_max_intensity_by_wavelength: [184.96000000000004, 182.157616273186, 179.41844300462802, 176.74059335942434, 174.12225038349388, 171.56166392069827, 169.05714768747742, 166.6070764958678, 164.20988361636412, 161.8640582726327, 159.56814326059703, 157.32073268488807, 155.12046980609418, 152.96604499265501, 150.8561937716263, 148.78969497289827, 146.76536896178175, 144.7820759551853, 142.83871441689624, 140.93421952774585, 139.06756172669176, 137.23774531908643, 135.443807148616, 133.68481532960564, 131.95986803657274, 130.26809234809403, 128.60864314221848, 126.98070204081635, 125.38347640040206, 123.81619834710746]

#* Forward (Input) Source Properties
lateral_aperture_um: 3.3660000000000005
src_maximum_vertical_um: 2.89
src_minimum_vertical_um: -2.1675
mid_lambda_um: 0.6
gaussian_waist_radius_um: 1
source_angle_theta_rad: 0.0
source_angle_theta_deg: 0.0

#* Adjoint Source Properties
adjoint_vertical_um: -1.5299999999999998
num_adjoint_sources: 2
adjoint_x_positions_um: [0.765, -0.765, -0.765, 0.765]
adjoint_y_positions_um: [0.765, 0.765, -0.765, -0.765]

#* Optimization Properties
total_iters: 80
epoch_range_design_change_max: 0.09999999999999999
epoch_range_design_change_min: 0.05
spectral_focal_plane_map: [[0, 15], [15, 30], [30, 45], [15, 30]]
desired_peak_location_per_band: [0, 9, 19]
2024-02-29 10:32:29,219 - template_logger - INFO - Successfully saved output to runs\test_run\processed_config.yml
2024-02-29 10:32:43,401 - template_logger - INFO - Rendered Output:
{ 
    "info": {
        "name": "optimization",
        "path": "",
        "simulator_name": "LumericalFDTD",
        "coordinates": {}
    },

    "objects": {
        "FDTD": {
            
            "name": "FDTD",
            "obj_type": "fdtd",
            "properties": {
                "dimension": "2D",
                "x span": 4.08e-06,
                "y max": 3.3150000000000004e-06,
                "y min": -2.8049999999999994e-06,
                
                "simulation time": 6.000000000000001e-13,
                "index": 1.5
            }
        },
        "forward_src_x": {
            "name": "forward_src_x",
            "obj_type": "gaussian",
            "attached_monitor": 0,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 0,
                "direction": "Backward",
                "x span": 8.16e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
        "forward_src_y": {
            "name": "forward_src_y",
            "obj_type": "gaussian",
            "attached_monitor": 1,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 90,
                "direction": "Backward",
                "x span": 8.16e-06,
                "injection axis": "y-axis",
                "y": 2.89e-06,
                
                "x": 0.0,
                "wavelength start": 4.5e-07,
                "wavelength stop": 7.5e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -8.5e-07
            }
        },
            "adj_src_0x": {
                "name": "adj_src_0x",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 7.65e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_0y": {
                "name": "adj_src_0y",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 7.65e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 0,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_1x": {
                "name": "adj_src_1x",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -7.65e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
            "adj_src_1y": {
                "name": "adj_src_1y",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -7.65e-07,
                    "y": -1.5299999999999998e-06,
                    "theta": 0,
                    "phi": 0,
                    
                    "wavelength start": 4.5e-07,
                    "wavelength stop": 7.5e-07
                }
            },
        "focal_monitor_0": {
            "name": "focal_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": 7.65e-07,
                "y": -1.5299999999999998e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "focal_monitor_1": {
            "name": "focal_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": -7.65e-07,
                "y": -1.5299999999999998e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_0": {
            "name": "transmission_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": 7.65e-07,
                "x span": 1.53e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "transmission_monitor_1": {
            "name": "transmission_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": -7.65e-07,
                "x span": 1.53e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },

        "transmission_focal_monitor_": {
            "name": "transmission_focal_monitor_",
            "obj_type": "power",
            "properties": {
                "monitor type": "Linear X",
                "y": -1.5299999999999998e-06,
                
                "x": 0,
                "x span": 3.06e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 30
            }
        },
        "PEC_screen": {
            "name": "PEC_screen",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 5.3856e-06,
                "y min": 2.193e-06,
                "y max": 2.346e-06,
                
                "material": "PEC (Perfect Electrical Conductor)"
            }
        },
        "source_aperture": {
            "name": "source_aperture",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 3.06e-06,
                "y min": 2.193e-06,
                "y max": 2.346e-06,
                
                "index": 1.5
            }
        },
        "design_import": {
            "name": "design_import",
            "obj_type": "import",
            "dev_id": 0,                
            "properties": {
                "x span": 3.06e-06,
                "y min": 0.0,
                "y max": 2.04e-06
                
            }
        },
        "design_mesh": {
            "name": "design_mesh",
            "obj_type": "mesh",
            "dev_id": 0,
            "properties": {
                "x": 0,
                "x span": 4.08e-06,
                "y min": -5e-07,
                "y max": 2.54e-06,
                
                "dx": 5.0999999999999993e-08,
                "dy": 5.0999999999999993e-08,
                "dz": 5.0999999999999993e-08
            }
        },
        "design_index_monitor": {
            "name": "design_index_monitor",
            "obj_type": "index",
            "dev_id": 0,
            "properties": {
                "x span": 3.06e-06,
                "monitor type": "2D Z-Normal",
                "y min": 0.0,
                "y max": 2.04e-06,
                
                "spatial interpolation": "nearest mesh cell"
            }
        },
        "design_efield_monitor": {
            "name": "design_efield_monitor",
            "obj_type": "profile",
            "dev_id": 0,
            "properties": {
                "x span": 3.06e-06,
                "monitor type": "2D Z-Normal",
                "y min": 0.0,
                "y max": 2.04e-06,
                
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "frequency points": 30,
                "output Hx": 0,
                "output Hy": 0,
                "output Hz": 0
            }
        }
    }
}
2024-02-29 10:32:43,407 - template_logger - INFO - Successfully saved output to runs\test_run\sim.json
2024-02-29 10:34:45,491 - template_logger - INFO - Rendered Output:
#* Original Properties

start_from_step: 0
shelf_fn: save_state
restart_epoch: 0
restart_iter: 0
lumapi_filepath_local: C:\Program Files\Lumerical\v212\api\python\lumapi.py
lumapi_filepath_hpc: /central/home/ifoo/lumerical/2021a_r22/api/python/lumapi.py
simulator_name: LumericalFDTD
simulator_dimension: 3D
simulator_max_wait_time: 3600
use_autograd: False
convert_existing: False
mesh_spacing_um: 0.017
geometry_spacing_lateral_um: 0.051
device_scale_um: 0.051
use_smooth_blur: False
min_feature_size_um: 0.085
background_index: 1.5
min_device_index: 1.5
max_device_index: 2.4
init_permittivity_0_1_scale: 0.5
binarize_3_levels: False
focal_plane_center_lateral_um: 0
num_vertical_layers: 5
vertical_layer_height_um: 0.408
device_size_lateral_um: 2.04
device_vertical_minimum_um: 0
objects_above_device: []
num_sidewalls: 0
sidewall_material: etch
sidewall_extend_pml: False
sidewall_extend_focalplane: True
sidewall_thickness_um: 0.085
sidewall_vertical_minimum_um: -0.765
add_infrared: False
lambda_min_um: 0.375
lambda_max_um: 0.725
lambda_min_eval_um: 0.375
lambda_max_eval_um: 0.725
num_bands: 3
num_points_per_band: 20
num_dispersive_ranges: 1
add_pdaf: False
pdaf_angle_phi_degrees: 45
pdaf_angle_theta_degrees: -8
pdaf_adj_src_idx: 0
fdtd_simulation_time_fs: 600
weight_by_individual_wavelength: True
use_gaussian_sources: True
use_airy_approximation: True
f_number: 2.2
airy_correction_factor: 0.84
beam_size_multiplier: 1
source_angle_theta_vacuum_deg: 0
source_angle_phi_deg: 0
xy_phi_rotations: [0, 90]
xy_adjtheta_rotations: [90, 0]
xy_pol_rotations: [0, 90]
xy_names: ['x', 'y']
use_source_aperture: True
num_focal_spots: 4
dispersive_range_to_adjoint_src_map: [[0, 1, 2, 3]]
adjoint_src_to_dispersive_range_map: [0, 0, 0, 0]
enforce_xy_gradient_symmetry: False
weight_by_quadrant_transmission: True
max_epochs: 5
iter_per_epoch: 16
epoch_start_design_change_max: 0.15
epoch_end_design_change_max: 0.05
epoch_start_design_change_min: 0.05
epoch_end_design_change_min: 0
fom_types: ['transmission', 'overall_transmission', 'intensity']
optimization_fom: intensity
reinterpolate_permittivity: True
reinterpolate_permittivity_factor: 2
reinterpolate_type: nearest
border_optimization: False
layer_gradient: False
flip_gradient: False
polarizations_focal_plane_map: [['x', 'y'], ['x', 'y'], ['x', 'y'], ['x', 'y']]
weight_focal_plane_map_performance_weighting: [1.0, 1.0, 1.0, 1.0]
weight_focal_plane_map: [1.0, 1.0, 1.0, 1.0]
do_green_balance: False
polarization_name_to_idx: {'x': 0, 'y': 1, 'z': 2}
desired_peaks_per_band_um: [0.45, 0.54, 0.65]
explicit_band_centering: True
shuffle_green: False
infrared_center_um: 0.94
do_rejection: False
softplus_kappa: 2
evaluate_bordered_extended: False
do_normalize: False
should_fix_layers: True
fixed_layers: [1, 3]
fixed_layers_density: 0
mpi_exe: C:\ProgramData\Miniconda3\envs\def2\Library\bin\mpiexec.exe
solver_exe: C:\Program Files\Lumerical\v212\bin\fdtd-engine-msmpi.exe
nprocs: 8
optimizer: AdamOptimizer
optimizer_settings: {'step_size': 0.01, 'betas': [0.9, 0.999], 'eps': '1e-8', 'moments': [0.0, 0.0]}
fom_dict: [{'fwd': [0], 'adj': [0], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}, {'fwd': [0], 'adj': [2], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}]
figures_of_merit: {'fom_0': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_0']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_0x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29], 'weight': 1.0}, 'fom_2': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_1']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_1x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29], 'weight': 1.0}}


#
# Derived Properties
#

#* Mesh Properties

min_feature_size_voxels: 1.666666666666667
blur_half_width_voxels: 1

#* Optical Properties
min_device_permittivity: 2.25
max_device_permittivity: 5.76
focal_length_um: 1.5299999999999998
focal_plane_center_vertical_um: -1.5299999999999998

#* Device Properties
vertical_layer_height_voxels: 8
device_size_vertical_um: 2.04
device_voxels_lateral: 40
device_voxels_vertical: 40
device_voxels_simulation_mesh_lateral: 121
device_voxels_simulation_mesh_vertical: 122
device_vertical_maximum_um: 2.04
device_size_lateral_bordered_um: 2.04
device_voxels_simulation_mesh_lateral_bordered: 121
border_size_um: 0.255
border_size_voxels: 5
device_voxels_lateral_bordered: 40

#* FDTD Properties

vertical_gap_size_um: 0.7649999999999999
lateral_gap_size_um: 0.51
fdtd_region_size_vertical_um: 5.1
fdtd_region_size_lateral_um: 3.06
fdtd_region_maximum_vertical_um: 2.8049999999999997
fdtd_region_minimum_vertical_um: -2.295

#* Surrounding Properties
pec_aperture_thickness_um: 0.051000000000000004
sidewall_x_positions_um: [1.0625, 0, -1.0625, 0]
sidewall_y_positions_um: [0, 1.0625, 0, -1.0625]
sidewall_xspan_positions_um: [0.085, 2.21, 0.085, 2.21]
sidewall_yspan_positions_um: [2.21, 0.085, 2.21, 0.085]

#* Spectral Properties
bandwidth_um: 0.35
num_design_frequency_points: 60
num_eval_frequency_points: 360
lambda_values_um: [0.375, 0.3809322033898305, 0.386864406779661, 0.3927966101694915, 0.39872881355932205, 0.4046610169491525, 0.41059322033898304, 0.41652542372881357, 0.42245762711864404, 0.42838983050847457, 0.4343220338983051, 0.4402542372881356, 0.4461864406779661, 0.4521186440677966, 0.45805084745762714, 0.4639830508474576, 0.46991525423728814, 0.47584745762711866, 0.48177966101694913, 0.48771186440677966, 0.4936440677966102, 0.49957627118644066, 0.5055084745762712, 0.5114406779661017, 0.5173728813559322, 0.5233050847457628, 0.5292372881355932, 0.5351694915254237, 0.5411016949152543, 0.5470338983050848, 0.5529661016949152, 0.5588983050847458, 0.5648305084745763, 0.5707627118644067, 0.5766949152542373, 0.5826271186440678, 0.5885593220338983, 0.5944915254237289, 0.6004237288135593, 0.6063559322033898, 0.6122881355932204, 0.6182203389830508, 0.6241525423728813, 0.6300847457627119, 0.6360169491525424, 0.6419491525423728, 0.6478813559322034, 0.6538135593220339, 0.6597457627118644, 0.6656779661016949, 0.6716101694915254, 0.6775423728813559, 0.6834745762711865, 0.6894067796610169, 0.6953389830508474, 0.701271186440678, 0.7072033898305085, 0.7131355932203389, 0.7190677966101695, 0.725]
max_intensity_by_wavelength: [52.61084444444446, 50.98500081044197, 49.433374609660405, 47.95151640407808, 46.53530526346698, 45.18092008442752, 43.884813788858125, 42.64369007615735, 41.45448244432396, 40.31433523036902, 39.22058645092208, 38.17075225030361, 37.16251278624183, 36.19369940333197, 35.26228296169391, 34.36636320343613, 33.50415905278641, 32.67399975736027, 31.87431678822745, 31.10363642539522, 30.360572963215386, 29.643822477178734, 28.952157099706373, 28.28441975798453, 27.63951933170607, 27.016426192856787, 26.414168093481994, 25.831826370748182, 25.268532441625798, 24.723464562204768, 24.19584482905419, 23.68493640218398, 23.190040931087992, 22.71049616707149, 22.245673746613033, 21.79497713190083, 21.357839695934484, 20.933722940709984, 20.522114838021427, 20.12252828332995, 19.73449965397924, 19.357587463786267, 18.991371106714254, 18.63544968295051, 18.28944090126902, 17.952980052064618, 17.62571904590603, 17.30732551287377, 16.997481958330194, 16.69588497111677, 16.402244480490406, 16.116283058399937, 15.83773526396848, 15.566347027288813, 15.30187506986013, 15.044086359197161, 14.792757595328197, 14.547674727068673, 14.308632496113459, 14.075434007134366]
dispersive_range_size_um: 0.35
dispersive_ranges_um: [[0.375, 0.725]]

#* PDAF Functionality Properties
pdaf_focal_spot_x_um: 0.51
pdaf_focal_spot_y_um: 0.51
pdaf_lambda_min_um: 0.375
pdaf_lambda_max_um: 0.49166666666666664
pdaf_lambda_values_um: [0.375, 0.3769774011299435, 0.378954802259887, 0.3809322033898305, 0.382909604519774, 0.3848870056497175, 0.386864406779661, 0.38884180790960454, 0.39081920903954803, 0.3927966101694915, 0.394774011299435, 0.3967514124293785, 0.39872881355932205, 0.40070621468926554, 0.40268361581920903, 0.4046610169491525, 0.40663841807909606, 0.40861581920903955, 0.41059322033898304, 0.41257062146892653, 0.41454802259887, 0.41652542372881357, 0.41850282485875706, 0.42048022598870055, 0.42245762711864404, 0.4244350282485876, 0.4264124293785311, 0.42838983050847457, 0.43036723163841806, 0.43234463276836155, 0.43432203389830504, 0.4362994350282486, 0.4382768361581921, 0.44025423728813556, 0.4422316384180791, 0.4442090395480226, 0.4461864406779661, 0.4481638418079096, 0.45014124293785307, 0.45211864406779656, 0.4540960451977401, 0.4560734463276836, 0.4580508474576271, 0.46002824858757063, 0.4620056497175141, 0.4639830508474576, 0.4659604519774011, 0.4679378531073446, 0.4699152542372881, 0.47189265536723163, 0.4738700564971751, 0.4758474576271186, 0.47782485875706215, 0.47980225988700564, 0.48177966101694913, 0.4837570621468926, 0.4857344632768361, 0.4877118644067796, 0.48968926553672315, 0.49166666666666664]
pdaf_max_intensity_by_wavelength: [52.61084444444446, 52.06036106941459, 51.51847252388663, 50.98500081044197, 50.459772515787094, 49.94261866980895, 49.433374609660405, 48.931879848671514, 48.437977949891916, 47.95151640407808, 47.47234651194793, 47.00032327053321, 46.53530526346698, 46.07715455505197, 45.62573658796086, 45.18092008442752, 44.74257695079326, 44.31058218527887, 43.884813788858125, 43.46515267911444, 43.05148260696698, 42.64369007615735, 42.24166426539312, 41.845296953048056, 41.45448244432396, 41.06911750078211, 40.68910127215721, 40.31433523036902, 39.94472310565177, 39.58017082472361, 39.22058645092209, 38.86588012623455, 38.51596401515526, 38.170752250303615, 37.83016087974073, 37.49410781592403, 37.16251278624183, 36.835297285072244, 36.51238452731323, 36.193699403331976, 35.87916843528465, 35.56871973475898, 35.26228296169393, 34.95978928453291, 34.66117134156823, 34.36636320343613, 34.0753003367238, 33.7879195686504, 33.50415905278642, 33.223958235776365, 32.94725782503149, 32.67399975736028, 32.404127168505845, 32.13758436356033, 31.87431678822745, 31.61427100090576, 31.357394645565762, 31.103636425395223, 30.85294607718795, 30.605274346452173]

#* Forward (Input) Source Properties
lateral_aperture_um: 2.244
src_maximum_vertical_um: 2.55
src_minimum_vertical_um: -1.9124999999999996
mid_lambda_um: 0.55
gaussian_waist_radius_um: 1
source_angle_theta_rad: 0.0
source_angle_theta_deg: 0.0

#* Adjoint Source Properties
adjoint_vertical_um: -1.5299999999999998
num_adjoint_sources: 4
adjoint_x_positions_um: [0.51, -0.51, -0.51, 0.51]
adjoint_y_positions_um: [0.51, 0.51, -0.51, -0.51]

#* Optimization Properties
total_iters: 80
epoch_range_design_change_max: 0.09999999999999999
epoch_range_design_change_min: 0.05
spectral_focal_plane_map: [[0, 20], [20, 40], [40, 60], [20, 40]]
desired_peak_location_per_band: [13, 28, 46]
2024-02-29 10:34:45,498 - template_logger - INFO - Successfully saved output to runs\test_run\processed_config.yml
2024-02-29 10:34:56,565 - template_logger - INFO - Rendered Output:
{ 
    "info": {
        "name": "optimization",
        "path": "",
        "simulator_name": "LumericalFDTD",
        "coordinates": {}
    },

    "objects": {
        "FDTD": {
            
            "name": "FDTD",
            "obj_type": "fdtd",
            "properties": {
                "dimension": "3D",
                "x span": 3.06e-06,
                "y span": 3.06e-06,
                "z max": 2.8049999999999994e-06,
                "z min": -2.2949999999999996e-06,
                "simulation time": 6.000000000000001e-13,
                "index": 1.5
            }
        },
        "forward_src_x": {
            "name": "forward_src_x",
            "obj_type": "gaussian",
            "attached_monitor": 0,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 0,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "z-axis",
                "y span": 6.12e-06,
                "z": 2.5499999999999997e-06,
                "x": 0.0,
                "wavelength start": 3.75e-07,
                "wavelength stop": 7.249999999999999e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -5.099999999999998e-07
            }
        },
        "forward_src_y": {
            "name": "forward_src_y",
            "obj_type": "gaussian",
            "attached_monitor": 1,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 90,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "z-axis",
                "y span": 6.12e-06,
                "z": 2.5499999999999997e-06,
                "x": 0.0,
                "wavelength start": 3.75e-07,
                "wavelength stop": 7.249999999999999e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -5.099999999999998e-07
            }
        },
            "adj_src_0x": {
                "name": "adj_src_0x",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": 5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
            "adj_src_0y": {
                "name": "adj_src_0y",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": 5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 90,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
            "adj_src_1x": {
                "name": "adj_src_1x",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": 5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
            "adj_src_1y": {
                "name": "adj_src_1y",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": 5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 90,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
            "adj_src_2x": {
                "name": "adj_src_2x",
                "obj_type": "dipole",
                "attached_monitor": 2,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
            "adj_src_2y": {
                "name": "adj_src_2y",
                "obj_type": "dipole",
                "attached_monitor": 2,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 90,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
            "adj_src_3x": {
                "name": "adj_src_3x",
                "obj_type": "dipole",
                "attached_monitor": 3,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
            "adj_src_3y": {
                "name": "adj_src_3y",
                "obj_type": "dipole",
                "attached_monitor": 3,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 90,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
        "focal_monitor_0": {
            "name": "focal_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": 5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "focal_monitor_1": {
            "name": "focal_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": -5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "focal_monitor_2": {
            "name": "focal_monitor_2",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": -5.1e-07,
                "y": -5.1e-07,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "focal_monitor_3": {
            "name": "focal_monitor_3",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": 5.1e-07,
                "y": -5.1e-07,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "transmission_monitor_0": {
            "name": "transmission_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "y": 5.1e-07,
                "y span": 1.02e-06,
                "z": -1.5299999999999998e-06,
                "x": 5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "transmission_monitor_1": {
            "name": "transmission_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "y": 5.1e-07,
                "y span": 1.02e-06,
                "z": -1.5299999999999998e-06,
                "x": -5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "transmission_monitor_2": {
            "name": "transmission_monitor_2",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "y": -5.1e-07,
                "y span": 1.02e-06,
                "z": -1.5299999999999998e-06,
                "x": -5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "transmission_monitor_3": {
            "name": "transmission_monitor_3",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "y": -5.1e-07,
                "y span": 1.02e-06,
                "z": -1.5299999999999998e-06,
                "x": 5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },

        "transmission_focal_monitor_": {
            "name": "transmission_focal_monitor_",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "y": 0,
                "y span": 2.04e-06,
                "z": -1.5299999999999998e-06,
                "x": 0,
                "x span": 2.04e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "PEC_screen": {
            "name": "PEC_screen",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 3.5904e-06,
                "y": 0,
                "y span": 3.5904e-06,
                "z min": 2.091e-06,
                "z max": 2.1420000000000004e-06,
                "material": "PEC (Perfect Electrical Conductor)"
            }
        },
        "source_aperture": {
            "name": "source_aperture",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 2.04e-06,
                "y": 0,
                "y span": 2.04e-06,
                "z min": 2.091e-06,
                "z max": 2.1420000000000004e-06,
                "index": 1.5
            }
        },
        "design_import": {
            "name": "design_import",
            "obj_type": "import",
            "dev_id": 0,                
            "properties": {
                "x span": 2.04e-06,
                "y span": 2.04e-06,
                "z min": 0.0,
                "z max": 2.04e-06
            }
        },
        "design_mesh": {
            "name": "design_mesh",
            "obj_type": "mesh",
            "dev_id": 0,
            "properties": {
                "x": 0,
                "x span": 3.06e-06,
                "y": 0,
                "y span": 3.06e-06,
                "z min": -5e-07,
                "z max": 2.54e-06,
                "dx": 1.7e-08,
                "dy": 1.7e-08,
                "dz": 1.7e-08
            }
        },
        "design_index_monitor": {
            "name": "design_index_monitor",
            "obj_type": "index",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "3D",
                "y span": 2.04e-06,
                "z min": 0.0,
                "z max": 2.04e-06,
                "spatial interpolation": "nearest mesh cell"
            }
        },
        "design_efield_monitor": {
            "name": "design_efield_monitor",
            "obj_type": "profile",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "3D",
                "y span": 2.04e-06,
                "z min": 0.0,
                "z max": 2.04e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "frequency points": 60,
                "output Hx": 0,
                "output Hy": 0,
                "output Hz": 0
            }
        }
    }
}
2024-02-29 10:34:56,570 - template_logger - INFO - Successfully saved output to runs\test_run\sim.json
2024-02-29 10:42:50,331 - template_logger - INFO - Rendered Output:
#* Original Properties

start_from_step: 0
shelf_fn: save_state
restart_epoch: 0
restart_iter: 0
lumapi_filepath_local: C:\Program Files\Lumerical\v212\api\python\lumapi.py
lumapi_filepath_hpc: /central/home/ifoo/lumerical/2021a_r22/api/python/lumapi.py
simulator_name: LumericalFDTD
simulator_dimension: 3D
simulator_max_wait_time: 3600
use_autograd: False
convert_existing: False
mesh_spacing_um: 0.017
geometry_spacing_lateral_um: 0.051
device_scale_um: 0.051
use_smooth_blur: False
min_feature_size_um: 0.085
background_index: 1.5
min_device_index: 1.5
max_device_index: 2.4
init_permittivity_0_1_scale: 0.5
binarize_3_levels: False
focal_plane_center_lateral_um: 0
num_vertical_layers: 5
vertical_layer_height_um: 0.408
device_size_lateral_um: 2.04
device_vertical_minimum_um: 0
objects_above_device: []
num_sidewalls: 0
sidewall_material: etch
sidewall_extend_pml: False
sidewall_extend_focalplane: True
sidewall_thickness_um: 0.085
sidewall_vertical_minimum_um: -0.765
add_infrared: False
lambda_min_um: 0.375
lambda_max_um: 0.725
lambda_min_eval_um: 0.375
lambda_max_eval_um: 0.725
num_bands: 3
num_points_per_band: 20
num_dispersive_ranges: 1
add_pdaf: False
pdaf_angle_phi_degrees: 45
pdaf_angle_theta_degrees: -8
pdaf_adj_src_idx: 0
fdtd_simulation_time_fs: 600
weight_by_individual_wavelength: True
use_gaussian_sources: True
use_airy_approximation: True
f_number: 2.2
airy_correction_factor: 0.84
beam_size_multiplier: 1
source_angle_theta_vacuum_deg: 0
source_angle_phi_deg: 0
xy_phi_rotations: [0, 90]
xy_adjtheta_rotations: [90, 0]
xy_pol_rotations: [0, 90]
xy_names: ['x', 'y']
use_source_aperture: True
num_focal_spots: 4
dispersive_range_to_adjoint_src_map: [[0, 1, 2, 3]]
adjoint_src_to_dispersive_range_map: [0, 0, 0, 0]
enforce_xy_gradient_symmetry: False
weight_by_quadrant_transmission: True
max_epochs: 5
iter_per_epoch: 16
epoch_start_design_change_max: 0.15
epoch_end_design_change_max: 0.05
epoch_start_design_change_min: 0.05
epoch_end_design_change_min: 0
fom_types: ['transmission', 'overall_transmission', 'intensity']
optimization_fom: intensity
reinterpolate_permittivity: True
reinterpolate_permittivity_factor: 2
reinterpolate_type: nearest
border_optimization: False
layer_gradient: False
flip_gradient: False
polarizations_focal_plane_map: [['x', 'y'], ['x', 'y'], ['x', 'y'], ['x', 'y']]
weight_focal_plane_map_performance_weighting: [1.0, 1.0, 1.0, 1.0]
weight_focal_plane_map: [1.0, 1.0, 1.0, 1.0]
do_green_balance: False
polarization_name_to_idx: {'x': 0, 'y': 1, 'z': 2}
desired_peaks_per_band_um: [0.45, 0.54, 0.65]
explicit_band_centering: True
shuffle_green: False
infrared_center_um: 0.94
do_rejection: False
softplus_kappa: 2
evaluate_bordered_extended: False
do_normalize: False
should_fix_layers: True
fixed_layers: [1, 3]
fixed_layers_density: 0
mpi_exe: C:\ProgramData\Miniconda3\envs\def2\Library\bin\mpiexec.exe
solver_exe: C:\Program Files\Lumerical\v212\bin\fdtd-engine-msmpi.exe
nprocs: 8
optimizer: AdamOptimizer
optimizer_settings: {'step_size': 0.01, 'betas': [0.9, 0.999], 'eps': '1e-8', 'moments': [0.0, 0.0]}
fom_dict: [{'fwd': [0], 'adj': [0], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}, {'fwd': [0], 'adj': [2], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}]
figures_of_merit: {'fom_0': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_0']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_0x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29], 'weight': 1.0}, 'fom_1': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_1']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_1x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29], 'weight': 1.0}, 'fom_2': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_2']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_2x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29], 'weight': 1.0}, 'fom_3': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_3']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_3x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29], 'weight': 1.0}}


#
# Derived Properties
#

#* Mesh Properties

min_feature_size_voxels: 1.666666666666667
blur_half_width_voxels: 1

#* Optical Properties
min_device_permittivity: 2.25
max_device_permittivity: 5.76
focal_length_um: 1.5299999999999998
focal_plane_center_vertical_um: -1.5299999999999998

#* Device Properties
vertical_layer_height_voxels: 8
device_size_vertical_um: 2.04
device_voxels_lateral: 40
device_voxels_vertical: 40
device_voxels_simulation_mesh_lateral: 121
device_voxels_simulation_mesh_vertical: 122
device_vertical_maximum_um: 2.04
device_size_lateral_bordered_um: 2.04
device_voxels_simulation_mesh_lateral_bordered: 121
border_size_um: 0.255
border_size_voxels: 5
device_voxels_lateral_bordered: 40

#* FDTD Properties

vertical_gap_size_um: 0.7649999999999999
lateral_gap_size_um: 0.51
fdtd_region_size_vertical_um: 5.1
fdtd_region_size_lateral_um: 3.06
fdtd_region_maximum_vertical_um: 2.8049999999999997
fdtd_region_minimum_vertical_um: -2.295

#* Surrounding Properties
pec_aperture_thickness_um: 0.051000000000000004
sidewall_x_positions_um: [1.0625, 0, -1.0625, 0]
sidewall_y_positions_um: [0, 1.0625, 0, -1.0625]
sidewall_xspan_positions_um: [0.085, 2.21, 0.085, 2.21]
sidewall_yspan_positions_um: [2.21, 0.085, 2.21, 0.085]

#* Spectral Properties
bandwidth_um: 0.35
num_design_frequency_points: 60
num_eval_frequency_points: 360
lambda_values_um: [0.375, 0.3809322033898305, 0.386864406779661, 0.3927966101694915, 0.39872881355932205, 0.4046610169491525, 0.41059322033898304, 0.41652542372881357, 0.42245762711864404, 0.42838983050847457, 0.4343220338983051, 0.4402542372881356, 0.4461864406779661, 0.4521186440677966, 0.45805084745762714, 0.4639830508474576, 0.46991525423728814, 0.47584745762711866, 0.48177966101694913, 0.48771186440677966, 0.4936440677966102, 0.49957627118644066, 0.5055084745762712, 0.5114406779661017, 0.5173728813559322, 0.5233050847457628, 0.5292372881355932, 0.5351694915254237, 0.5411016949152543, 0.5470338983050848, 0.5529661016949152, 0.5588983050847458, 0.5648305084745763, 0.5707627118644067, 0.5766949152542373, 0.5826271186440678, 0.5885593220338983, 0.5944915254237289, 0.6004237288135593, 0.6063559322033898, 0.6122881355932204, 0.6182203389830508, 0.6241525423728813, 0.6300847457627119, 0.6360169491525424, 0.6419491525423728, 0.6478813559322034, 0.6538135593220339, 0.6597457627118644, 0.6656779661016949, 0.6716101694915254, 0.6775423728813559, 0.6834745762711865, 0.6894067796610169, 0.6953389830508474, 0.701271186440678, 0.7072033898305085, 0.7131355932203389, 0.7190677966101695, 0.725]
max_intensity_by_wavelength: [52.61084444444446, 50.98500081044197, 49.433374609660405, 47.95151640407808, 46.53530526346698, 45.18092008442752, 43.884813788858125, 42.64369007615735, 41.45448244432396, 40.31433523036902, 39.22058645092208, 38.17075225030361, 37.16251278624183, 36.19369940333197, 35.26228296169391, 34.36636320343613, 33.50415905278641, 32.67399975736027, 31.87431678822745, 31.10363642539522, 30.360572963215386, 29.643822477178734, 28.952157099706373, 28.28441975798453, 27.63951933170607, 27.016426192856787, 26.414168093481994, 25.831826370748182, 25.268532441625798, 24.723464562204768, 24.19584482905419, 23.68493640218398, 23.190040931087992, 22.71049616707149, 22.245673746613033, 21.79497713190083, 21.357839695934484, 20.933722940709984, 20.522114838021427, 20.12252828332995, 19.73449965397924, 19.357587463786267, 18.991371106714254, 18.63544968295051, 18.28944090126902, 17.952980052064618, 17.62571904590603, 17.30732551287377, 16.997481958330194, 16.69588497111677, 16.402244480490406, 16.116283058399937, 15.83773526396848, 15.566347027288813, 15.30187506986013, 15.044086359197161, 14.792757595328197, 14.547674727068673, 14.308632496113459, 14.075434007134366]
dispersive_range_size_um: 0.35
dispersive_ranges_um: [[0.375, 0.725]]

#* PDAF Functionality Properties
pdaf_focal_spot_x_um: 0.51
pdaf_focal_spot_y_um: 0.51
pdaf_lambda_min_um: 0.375
pdaf_lambda_max_um: 0.49166666666666664
pdaf_lambda_values_um: [0.375, 0.3769774011299435, 0.378954802259887, 0.3809322033898305, 0.382909604519774, 0.3848870056497175, 0.386864406779661, 0.38884180790960454, 0.39081920903954803, 0.3927966101694915, 0.394774011299435, 0.3967514124293785, 0.39872881355932205, 0.40070621468926554, 0.40268361581920903, 0.4046610169491525, 0.40663841807909606, 0.40861581920903955, 0.41059322033898304, 0.41257062146892653, 0.41454802259887, 0.41652542372881357, 0.41850282485875706, 0.42048022598870055, 0.42245762711864404, 0.4244350282485876, 0.4264124293785311, 0.42838983050847457, 0.43036723163841806, 0.43234463276836155, 0.43432203389830504, 0.4362994350282486, 0.4382768361581921, 0.44025423728813556, 0.4422316384180791, 0.4442090395480226, 0.4461864406779661, 0.4481638418079096, 0.45014124293785307, 0.45211864406779656, 0.4540960451977401, 0.4560734463276836, 0.4580508474576271, 0.46002824858757063, 0.4620056497175141, 0.4639830508474576, 0.4659604519774011, 0.4679378531073446, 0.4699152542372881, 0.47189265536723163, 0.4738700564971751, 0.4758474576271186, 0.47782485875706215, 0.47980225988700564, 0.48177966101694913, 0.4837570621468926, 0.4857344632768361, 0.4877118644067796, 0.48968926553672315, 0.49166666666666664]
pdaf_max_intensity_by_wavelength: [52.61084444444446, 52.06036106941459, 51.51847252388663, 50.98500081044197, 50.459772515787094, 49.94261866980895, 49.433374609660405, 48.931879848671514, 48.437977949891916, 47.95151640407808, 47.47234651194793, 47.00032327053321, 46.53530526346698, 46.07715455505197, 45.62573658796086, 45.18092008442752, 44.74257695079326, 44.31058218527887, 43.884813788858125, 43.46515267911444, 43.05148260696698, 42.64369007615735, 42.24166426539312, 41.845296953048056, 41.45448244432396, 41.06911750078211, 40.68910127215721, 40.31433523036902, 39.94472310565177, 39.58017082472361, 39.22058645092209, 38.86588012623455, 38.51596401515526, 38.170752250303615, 37.83016087974073, 37.49410781592403, 37.16251278624183, 36.835297285072244, 36.51238452731323, 36.193699403331976, 35.87916843528465, 35.56871973475898, 35.26228296169393, 34.95978928453291, 34.66117134156823, 34.36636320343613, 34.0753003367238, 33.7879195686504, 33.50415905278642, 33.223958235776365, 32.94725782503149, 32.67399975736028, 32.404127168505845, 32.13758436356033, 31.87431678822745, 31.61427100090576, 31.357394645565762, 31.103636425395223, 30.85294607718795, 30.605274346452173]

#* Forward (Input) Source Properties
lateral_aperture_um: 2.244
src_maximum_vertical_um: 2.55
src_minimum_vertical_um: -1.9124999999999996
mid_lambda_um: 0.55
gaussian_waist_radius_um: 1
source_angle_theta_rad: 0.0
source_angle_theta_deg: 0.0

#* Adjoint Source Properties
adjoint_vertical_um: -1.5299999999999998
num_adjoint_sources: 4
adjoint_x_positions_um: [0.51, -0.51, -0.51, 0.51]
adjoint_y_positions_um: [0.51, 0.51, -0.51, -0.51]

#* Optimization Properties
total_iters: 80
epoch_range_design_change_max: 0.09999999999999999
epoch_range_design_change_min: 0.05
spectral_focal_plane_map: [[0, 20], [20, 40], [40, 60], [20, 40]]
desired_peak_location_per_band: [13, 28, 46]
2024-02-29 10:42:50,350 - template_logger - INFO - Successfully saved output to runs\test_run\processed_config.yml
2024-02-29 10:42:59,929 - template_logger - INFO - Rendered Output:
{ 
    "info": {
        "name": "optimization",
        "path": "",
        "simulator_name": "LumericalFDTD",
        "coordinates": {}
    },

    "objects": {
        "FDTD": {
            
            "name": "FDTD",
            "obj_type": "fdtd",
            "properties": {
                "dimension": "3D",
                "x span": 3.06e-06,
                "y span": 3.06e-06,
                "z max": 2.8049999999999994e-06,
                "z min": -2.2949999999999996e-06,
                "simulation time": 6.000000000000001e-13,
                "index": 1.5
            }
        },
        "forward_src_x": {
            "name": "forward_src_x",
            "obj_type": "gaussian",
            "attached_monitor": 0,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 0,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "z-axis",
                "y span": 6.12e-06,
                "z": 2.5499999999999997e-06,
                "x": 0.0,
                "wavelength start": 3.75e-07,
                "wavelength stop": 7.249999999999999e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -5.099999999999998e-07
            }
        },
        "forward_src_y": {
            "name": "forward_src_y",
            "obj_type": "gaussian",
            "attached_monitor": 1,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 90,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "z-axis",
                "y span": 6.12e-06,
                "z": 2.5499999999999997e-06,
                "x": 0.0,
                "wavelength start": 3.75e-07,
                "wavelength stop": 7.249999999999999e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -5.099999999999998e-07
            }
        },
            "adj_src_0x": {
                "name": "adj_src_0x",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": 5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
            "adj_src_0y": {
                "name": "adj_src_0y",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": 5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 90,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
            "adj_src_1x": {
                "name": "adj_src_1x",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": 5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
            "adj_src_1y": {
                "name": "adj_src_1y",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": 5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 90,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
            "adj_src_2x": {
                "name": "adj_src_2x",
                "obj_type": "dipole",
                "attached_monitor": 2,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
            "adj_src_2y": {
                "name": "adj_src_2y",
                "obj_type": "dipole",
                "attached_monitor": 2,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 90,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
            "adj_src_3x": {
                "name": "adj_src_3x",
                "obj_type": "dipole",
                "attached_monitor": 3,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
            "adj_src_3y": {
                "name": "adj_src_3y",
                "obj_type": "dipole",
                "attached_monitor": 3,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 90,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
        "focal_monitor_0": {
            "name": "focal_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": 5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "focal_monitor_1": {
            "name": "focal_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": -5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "focal_monitor_2": {
            "name": "focal_monitor_2",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": -5.1e-07,
                "y": -5.1e-07,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "focal_monitor_3": {
            "name": "focal_monitor_3",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": 5.1e-07,
                "y": -5.1e-07,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "transmission_monitor_0": {
            "name": "transmission_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "y": 5.1e-07,
                "y span": 1.02e-06,
                "z": -1.5299999999999998e-06,
                "x": 5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "transmission_monitor_1": {
            "name": "transmission_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "y": 5.1e-07,
                "y span": 1.02e-06,
                "z": -1.5299999999999998e-06,
                "x": -5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "transmission_monitor_2": {
            "name": "transmission_monitor_2",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "y": -5.1e-07,
                "y span": 1.02e-06,
                "z": -1.5299999999999998e-06,
                "x": -5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "transmission_monitor_3": {
            "name": "transmission_monitor_3",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "y": -5.1e-07,
                "y span": 1.02e-06,
                "z": -1.5299999999999998e-06,
                "x": 5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },

        "transmission_focal_monitor_": {
            "name": "transmission_focal_monitor_",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "y": 0,
                "y span": 2.04e-06,
                "z": -1.5299999999999998e-06,
                "x": 0,
                "x span": 2.04e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "PEC_screen": {
            "name": "PEC_screen",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 3.5904e-06,
                "y": 0,
                "y span": 3.5904e-06,
                "z min": 2.091e-06,
                "z max": 2.1420000000000004e-06,
                "material": "PEC (Perfect Electrical Conductor)"
            }
        },
        "source_aperture": {
            "name": "source_aperture",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 2.04e-06,
                "y": 0,
                "y span": 2.04e-06,
                "z min": 2.091e-06,
                "z max": 2.1420000000000004e-06,
                "index": 1.5
            }
        },
        "design_import": {
            "name": "design_import",
            "obj_type": "import",
            "dev_id": 0,                
            "properties": {
                "x span": 2.04e-06,
                "y span": 2.04e-06,
                "z min": 0.0,
                "z max": 2.04e-06
            }
        },
        "design_mesh": {
            "name": "design_mesh",
            "obj_type": "mesh",
            "dev_id": 0,
            "properties": {
                "x": 0,
                "x span": 3.06e-06,
                "y": 0,
                "y span": 3.06e-06,
                "z min": -5e-07,
                "z max": 2.54e-06,
                "dx": 1.7e-08,
                "dy": 1.7e-08,
                "dz": 1.7e-08
            }
        },
        "design_index_monitor": {
            "name": "design_index_monitor",
            "obj_type": "index",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "3D",
                "y span": 2.04e-06,
                "z min": 0.0,
                "z max": 2.04e-06,
                "spatial interpolation": "nearest mesh cell"
            }
        },
        "design_efield_monitor": {
            "name": "design_efield_monitor",
            "obj_type": "profile",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "3D",
                "y span": 2.04e-06,
                "z min": 0.0,
                "z max": 2.04e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "frequency points": 60,
                "output Hx": 0,
                "output Hy": 0,
                "output Hz": 0
            }
        }
    }
}
2024-02-29 10:42:59,935 - template_logger - INFO - Successfully saved output to runs\test_run\sim.json
2024-02-29 14:33:37,099 - template_logger - INFO - Rendered Output:
#* Original Properties

start_from_step: 0
shelf_fn: save_state
restart_epoch: 0
restart_iter: 0
lumapi_filepath_local: C:\Program Files\Lumerical\v212\api\python\lumapi.py
lumapi_filepath_hpc: /central/home/ifoo/lumerical/2021a_r22/api/python/lumapi.py
simulator_name: LumericalFDTD
simulator_dimension: 3D
simulator_max_wait_time: 3600
use_autograd: False
convert_existing: False
mesh_spacing_um: 0.051
geometry_spacing_lateral_um: 0.051
device_scale_um: 0.051
use_smooth_blur: False
min_feature_size_um: 0.085
background_index: 1.5
min_device_index: 1.5
max_device_index: 2.4
init_permittivity_0_1_scale: 0.5
binarize_3_levels: False
focal_plane_center_lateral_um: 0
num_vertical_layers: 5
vertical_layer_height_um: 0.408
device_size_lateral_um: 2.04
device_vertical_minimum_um: 0
objects_above_device: []
num_sidewalls: 0
sidewall_material: etch
sidewall_extend_pml: False
sidewall_extend_focalplane: True
sidewall_thickness_um: 0.085
sidewall_vertical_minimum_um: -0.765
add_infrared: False
lambda_min_um: 0.375
lambda_max_um: 0.725
lambda_min_eval_um: 0.375
lambda_max_eval_um: 0.725
num_bands: 3
num_points_per_band: 20
num_dispersive_ranges: 1
add_pdaf: False
pdaf_angle_phi_degrees: 45
pdaf_angle_theta_degrees: -8
pdaf_adj_src_idx: 0
fdtd_simulation_time_fs: 600
weight_by_individual_wavelength: True
use_gaussian_sources: True
use_airy_approximation: True
f_number: 2.2
airy_correction_factor: 0.84
beam_size_multiplier: 1
source_angle_theta_vacuum_deg: 0
source_angle_phi_deg: 0
xy_phi_rotations: [0, 90]
xy_adjtheta_rotations: [90, 0]
xy_pol_rotations: [0, 90]
xy_names: ['x', 'y']
use_source_aperture: True
num_focal_spots: 4
dispersive_range_to_adjoint_src_map: [[0, 1, 2, 3]]
adjoint_src_to_dispersive_range_map: [0, 0, 0, 0]
enforce_xy_gradient_symmetry: False
weight_by_quadrant_transmission: True
max_epochs: 5
iter_per_epoch: 16
epoch_start_design_change_max: 0.15
epoch_end_design_change_max: 0.05
epoch_start_design_change_min: 0.05
epoch_end_design_change_min: 0
fom_types: ['transmission', 'overall_transmission', 'intensity']
optimization_fom: intensity
reinterpolate_permittivity: True
reinterpolate_permittivity_factor: 2
reinterpolate_type: nearest
border_optimization: False
layer_gradient: False
flip_gradient: False
polarizations_focal_plane_map: [['x', 'y'], ['x', 'y'], ['x', 'y'], ['x', 'y']]
weight_focal_plane_map_performance_weighting: [1.0, 1.0, 1.0, 1.0]
weight_focal_plane_map: [1.0, 1.0, 1.0, 1.0]
do_green_balance: False
polarization_name_to_idx: {'x': 0, 'y': 1, 'z': 2}
desired_peaks_per_band_um: [0.45, 0.54, 0.65]
explicit_band_centering: True
shuffle_green: False
infrared_center_um: 0.94
do_rejection: False
softplus_kappa: 2
evaluate_bordered_extended: False
do_normalize: False
should_fix_layers: True
fixed_layers: [1, 3]
fixed_layers_density: 0
mpi_exe: C:\ProgramData\Miniconda3\envs\def2\Library\bin\mpiexec.exe
solver_exe: C:\Program Files\Lumerical\v212\bin\fdtd-engine-msmpi.exe
nprocs: 8
optimizer: AdamOptimizer
optimizer_settings: {'step_size': 0.01, 'betas': [0.9, 0.999], 'eps': '1e-8', 'moments': [0.0, 0.0]}
fom_dict: [{'fwd': [0], 'adj': [0], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}, {'fwd': [0], 'adj': [2], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}]
figures_of_merit: {'fom_0': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_0']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_0x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29], 'weight': 1.0}, 'fom_1': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_1']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_1x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29], 'weight': 1.0}, 'fom_2': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_2']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_2x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29], 'weight': 1.0}, 'fom_3': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_3']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_3x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29], 'weight': 1.0}}


#
# Derived Properties
#

#* Mesh Properties

min_feature_size_voxels: 1.666666666666667
blur_half_width_voxels: 1

#* Optical Properties
min_device_permittivity: 2.25
max_device_permittivity: 5.76
focal_length_um: 1.5299999999999998
focal_plane_center_vertical_um: -1.5299999999999998

#* Device Properties
vertical_layer_height_voxels: 8
device_size_vertical_um: 2.04
device_voxels_lateral: 40
device_voxels_vertical: 40
device_voxels_simulation_mesh_lateral: 41
device_voxels_simulation_mesh_vertical: 42
device_vertical_maximum_um: 2.04
device_size_lateral_bordered_um: 2.04
device_voxels_simulation_mesh_lateral_bordered: 41
border_size_um: 0.255
border_size_voxels: 5
device_voxels_lateral_bordered: 40

#* FDTD Properties

vertical_gap_size_um: 0.7649999999999999
lateral_gap_size_um: 0.51
fdtd_region_size_vertical_um: 5.1
fdtd_region_size_lateral_um: 3.06
fdtd_region_maximum_vertical_um: 2.8049999999999997
fdtd_region_minimum_vertical_um: -2.295

#* Surrounding Properties
pec_aperture_thickness_um: 0.153
sidewall_x_positions_um: [1.0625, 0, -1.0625, 0]
sidewall_y_positions_um: [0, 1.0625, 0, -1.0625]
sidewall_xspan_positions_um: [0.085, 2.21, 0.085, 2.21]
sidewall_yspan_positions_um: [2.21, 0.085, 2.21, 0.085]

#* Spectral Properties
bandwidth_um: 0.35
num_design_frequency_points: 60
num_eval_frequency_points: 360
lambda_values_um: [0.375, 0.3809322033898305, 0.386864406779661, 0.3927966101694915, 0.39872881355932205, 0.4046610169491525, 0.41059322033898304, 0.41652542372881357, 0.42245762711864404, 0.42838983050847457, 0.4343220338983051, 0.4402542372881356, 0.4461864406779661, 0.4521186440677966, 0.45805084745762714, 0.4639830508474576, 0.46991525423728814, 0.47584745762711866, 0.48177966101694913, 0.48771186440677966, 0.4936440677966102, 0.49957627118644066, 0.5055084745762712, 0.5114406779661017, 0.5173728813559322, 0.5233050847457628, 0.5292372881355932, 0.5351694915254237, 0.5411016949152543, 0.5470338983050848, 0.5529661016949152, 0.5588983050847458, 0.5648305084745763, 0.5707627118644067, 0.5766949152542373, 0.5826271186440678, 0.5885593220338983, 0.5944915254237289, 0.6004237288135593, 0.6063559322033898, 0.6122881355932204, 0.6182203389830508, 0.6241525423728813, 0.6300847457627119, 0.6360169491525424, 0.6419491525423728, 0.6478813559322034, 0.6538135593220339, 0.6597457627118644, 0.6656779661016949, 0.6716101694915254, 0.6775423728813559, 0.6834745762711865, 0.6894067796610169, 0.6953389830508474, 0.701271186440678, 0.7072033898305085, 0.7131355932203389, 0.7190677966101695, 0.725]
max_intensity_by_wavelength: [52.61084444444446, 50.98500081044197, 49.433374609660405, 47.95151640407808, 46.53530526346698, 45.18092008442752, 43.884813788858125, 42.64369007615735, 41.45448244432396, 40.31433523036902, 39.22058645092208, 38.17075225030361, 37.16251278624183, 36.19369940333197, 35.26228296169391, 34.36636320343613, 33.50415905278641, 32.67399975736027, 31.87431678822745, 31.10363642539522, 30.360572963215386, 29.643822477178734, 28.952157099706373, 28.28441975798453, 27.63951933170607, 27.016426192856787, 26.414168093481994, 25.831826370748182, 25.268532441625798, 24.723464562204768, 24.19584482905419, 23.68493640218398, 23.190040931087992, 22.71049616707149, 22.245673746613033, 21.79497713190083, 21.357839695934484, 20.933722940709984, 20.522114838021427, 20.12252828332995, 19.73449965397924, 19.357587463786267, 18.991371106714254, 18.63544968295051, 18.28944090126902, 17.952980052064618, 17.62571904590603, 17.30732551287377, 16.997481958330194, 16.69588497111677, 16.402244480490406, 16.116283058399937, 15.83773526396848, 15.566347027288813, 15.30187506986013, 15.044086359197161, 14.792757595328197, 14.547674727068673, 14.308632496113459, 14.075434007134366]
dispersive_range_size_um: 0.35
dispersive_ranges_um: [[0.375, 0.725]]

#* PDAF Functionality Properties
pdaf_focal_spot_x_um: 0.51
pdaf_focal_spot_y_um: 0.51
pdaf_lambda_min_um: 0.375
pdaf_lambda_max_um: 0.49166666666666664
pdaf_lambda_values_um: [0.375, 0.3769774011299435, 0.378954802259887, 0.3809322033898305, 0.382909604519774, 0.3848870056497175, 0.386864406779661, 0.38884180790960454, 0.39081920903954803, 0.3927966101694915, 0.394774011299435, 0.3967514124293785, 0.39872881355932205, 0.40070621468926554, 0.40268361581920903, 0.4046610169491525, 0.40663841807909606, 0.40861581920903955, 0.41059322033898304, 0.41257062146892653, 0.41454802259887, 0.41652542372881357, 0.41850282485875706, 0.42048022598870055, 0.42245762711864404, 0.4244350282485876, 0.4264124293785311, 0.42838983050847457, 0.43036723163841806, 0.43234463276836155, 0.43432203389830504, 0.4362994350282486, 0.4382768361581921, 0.44025423728813556, 0.4422316384180791, 0.4442090395480226, 0.4461864406779661, 0.4481638418079096, 0.45014124293785307, 0.45211864406779656, 0.4540960451977401, 0.4560734463276836, 0.4580508474576271, 0.46002824858757063, 0.4620056497175141, 0.4639830508474576, 0.4659604519774011, 0.4679378531073446, 0.4699152542372881, 0.47189265536723163, 0.4738700564971751, 0.4758474576271186, 0.47782485875706215, 0.47980225988700564, 0.48177966101694913, 0.4837570621468926, 0.4857344632768361, 0.4877118644067796, 0.48968926553672315, 0.49166666666666664]
pdaf_max_intensity_by_wavelength: [52.61084444444446, 52.06036106941459, 51.51847252388663, 50.98500081044197, 50.459772515787094, 49.94261866980895, 49.433374609660405, 48.931879848671514, 48.437977949891916, 47.95151640407808, 47.47234651194793, 47.00032327053321, 46.53530526346698, 46.07715455505197, 45.62573658796086, 45.18092008442752, 44.74257695079326, 44.31058218527887, 43.884813788858125, 43.46515267911444, 43.05148260696698, 42.64369007615735, 42.24166426539312, 41.845296953048056, 41.45448244432396, 41.06911750078211, 40.68910127215721, 40.31433523036902, 39.94472310565177, 39.58017082472361, 39.22058645092209, 38.86588012623455, 38.51596401515526, 38.170752250303615, 37.83016087974073, 37.49410781592403, 37.16251278624183, 36.835297285072244, 36.51238452731323, 36.193699403331976, 35.87916843528465, 35.56871973475898, 35.26228296169393, 34.95978928453291, 34.66117134156823, 34.36636320343613, 34.0753003367238, 33.7879195686504, 33.50415905278642, 33.223958235776365, 32.94725782503149, 32.67399975736028, 32.404127168505845, 32.13758436356033, 31.87431678822745, 31.61427100090576, 31.357394645565762, 31.103636425395223, 30.85294607718795, 30.605274346452173]

#* Forward (Input) Source Properties
lateral_aperture_um: 2.244
src_maximum_vertical_um: 2.55
src_minimum_vertical_um: -1.9124999999999996
mid_lambda_um: 0.55
gaussian_waist_radius_um: 1
source_angle_theta_rad: 0.0
source_angle_theta_deg: 0.0

#* Adjoint Source Properties
adjoint_vertical_um: -1.5299999999999998
num_adjoint_sources: 4
adjoint_x_positions_um: [0.51, -0.51, -0.51, 0.51]
adjoint_y_positions_um: [0.51, 0.51, -0.51, -0.51]

#* Optimization Properties
total_iters: 80
epoch_range_design_change_max: 0.09999999999999999
epoch_range_design_change_min: 0.05
spectral_focal_plane_map: [[0, 20], [20, 40], [40, 60], [20, 40]]
desired_peak_location_per_band: [13, 28, 46]
2024-02-29 14:33:37,103 - template_logger - INFO - Successfully saved output to runs\test_run\processed_config.yml
2024-02-29 14:33:43,503 - template_logger - INFO - Rendered Output:
{ 
    "info": {
        "name": "optimization",
        "path": "",
        "simulator_name": "LumericalFDTD",
        "coordinates": {}
    },

    "objects": {
        "FDTD": {
            
            "name": "FDTD",
            "obj_type": "fdtd",
            "properties": {
                "dimension": "3D",
                "x span": 3.06e-06,
                "y span": 3.06e-06,
                "z max": 2.8049999999999994e-06,
                "z min": -2.2949999999999996e-06,
                "simulation time": 6.000000000000001e-13,
                "index": 1.5
            }
        },
        "forward_src_x": {
            "name": "forward_src_x",
            "obj_type": "gaussian",
            "attached_monitor": 0,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 0,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "z-axis",
                "y span": 6.12e-06,
                "z": 2.5499999999999997e-06,
                "x": 0.0,
                "wavelength start": 3.75e-07,
                "wavelength stop": 7.249999999999999e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -5.099999999999998e-07
            }
        },
        "forward_src_y": {
            "name": "forward_src_y",
            "obj_type": "gaussian",
            "attached_monitor": 1,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 90,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "z-axis",
                "y span": 6.12e-06,
                "z": 2.5499999999999997e-06,
                "x": 0.0,
                "wavelength start": 3.75e-07,
                "wavelength stop": 7.249999999999999e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -5.099999999999998e-07
            }
        },
            "adj_src_0x": {
                "name": "adj_src_0x",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": 5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
            "adj_src_0y": {
                "name": "adj_src_0y",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": 5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 90,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
            "adj_src_1x": {
                "name": "adj_src_1x",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": 5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
            "adj_src_1y": {
                "name": "adj_src_1y",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": 5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 90,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
            "adj_src_2x": {
                "name": "adj_src_2x",
                "obj_type": "dipole",
                "attached_monitor": 2,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
            "adj_src_2y": {
                "name": "adj_src_2y",
                "obj_type": "dipole",
                "attached_monitor": 2,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 90,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
            "adj_src_3x": {
                "name": "adj_src_3x",
                "obj_type": "dipole",
                "attached_monitor": 3,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
            "adj_src_3y": {
                "name": "adj_src_3y",
                "obj_type": "dipole",
                "attached_monitor": 3,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 90,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
        "focal_monitor_0": {
            "name": "focal_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": 5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "focal_monitor_1": {
            "name": "focal_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": -5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "focal_monitor_2": {
            "name": "focal_monitor_2",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": -5.1e-07,
                "y": -5.1e-07,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "focal_monitor_3": {
            "name": "focal_monitor_3",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": 5.1e-07,
                "y": -5.1e-07,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "transmission_monitor_0": {
            "name": "transmission_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "y": 5.1e-07,
                "y span": 1.02e-06,
                "z": -1.5299999999999998e-06,
                "x": 5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "transmission_monitor_1": {
            "name": "transmission_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "y": 5.1e-07,
                "y span": 1.02e-06,
                "z": -1.5299999999999998e-06,
                "x": -5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "transmission_monitor_2": {
            "name": "transmission_monitor_2",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "y": -5.1e-07,
                "y span": 1.02e-06,
                "z": -1.5299999999999998e-06,
                "x": -5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "transmission_monitor_3": {
            "name": "transmission_monitor_3",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "y": -5.1e-07,
                "y span": 1.02e-06,
                "z": -1.5299999999999998e-06,
                "x": 5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },

        "transmission_focal_monitor_": {
            "name": "transmission_focal_monitor_",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "y": 0,
                "y span": 2.04e-06,
                "z": -1.5299999999999998e-06,
                "x": 0,
                "x span": 2.04e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "PEC_screen": {
            "name": "PEC_screen",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 3.5904e-06,
                "y": 0,
                "y span": 3.5904e-06,
                "z min": 2.193e-06,
                "z max": 2.346e-06,
                "material": "PEC (Perfect Electrical Conductor)"
            }
        },
        "source_aperture": {
            "name": "source_aperture",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 2.04e-06,
                "y": 0,
                "y span": 2.04e-06,
                "z min": 2.193e-06,
                "z max": 2.346e-06,
                "index": 1.5
            }
        },
        "design_import": {
            "name": "design_import",
            "obj_type": "import",
            "dev_id": 0,                
            "properties": {
                "x span": 2.04e-06,
                "y span": 2.04e-06,
                "z min": 0.0,
                "z max": 2.04e-06
            }
        },
        "design_mesh": {
            "name": "design_mesh",
            "obj_type": "mesh",
            "dev_id": 0,
            "properties": {
                "x": 0,
                "x span": 3.06e-06,
                "y": 0,
                "y span": 3.06e-06,
                "z min": -5e-07,
                "z max": 2.54e-06,
                "dx": 5.0999999999999993e-08,
                "dy": 5.0999999999999993e-08,
                "dz": 5.0999999999999993e-08
            }
        },
        "design_index_monitor": {
            "name": "design_index_monitor",
            "obj_type": "index",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "3D",
                "y span": 2.04e-06,
                "z min": 0.0,
                "z max": 2.04e-06,
                "spatial interpolation": "nearest mesh cell"
            }
        },
        "design_efield_monitor": {
            "name": "design_efield_monitor",
            "obj_type": "profile",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "3D",
                "y span": 2.04e-06,
                "z min": 0.0,
                "z max": 2.04e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "frequency points": 60,
                "output Hx": 0,
                "output Hy": 0,
                "output Hz": 0
            }
        }
    }
}
2024-02-29 14:33:43,508 - template_logger - INFO - Successfully saved output to runs\test_run\sim.json
2024-02-29 14:54:41,441 - template_logger - INFO - Rendered Output:
#* Original Properties

start_from_step: 0
shelf_fn: save_state
restart_epoch: 0
restart_iter: 0
lumapi_filepath_local: C:\Program Files\Lumerical\v212\api\python\lumapi.py
lumapi_filepath_hpc: /central/home/ifoo/lumerical/2021a_r22/api/python/lumapi.py
simulator_name: LumericalFDTD
simulator_dimension: 3D
simulator_max_wait_time: 3600
use_autograd: False
convert_existing: False
mesh_spacing_um: 0.051
geometry_spacing_lateral_um: 0.051
device_scale_um: 0.051
use_smooth_blur: False
min_feature_size_um: 0.085
background_index: 1.5
min_device_index: 1.5
max_device_index: 2.4
init_permittivity_0_1_scale: 0.5
binarize_3_levels: False
focal_plane_center_lateral_um: 0
num_vertical_layers: 5
vertical_layer_height_um: 0.408
device_size_lateral_um: 2.04
device_vertical_minimum_um: 0
objects_above_device: []
num_sidewalls: 0
sidewall_material: etch
sidewall_extend_pml: False
sidewall_extend_focalplane: True
sidewall_thickness_um: 0.085
sidewall_vertical_minimum_um: -0.765
add_infrared: False
lambda_min_um: 0.375
lambda_max_um: 0.725
lambda_min_eval_um: 0.375
lambda_max_eval_um: 0.725
num_bands: 3
num_points_per_band: 20
num_dispersive_ranges: 1
add_pdaf: False
pdaf_angle_phi_degrees: 45
pdaf_angle_theta_degrees: -8
pdaf_adj_src_idx: 0
fdtd_simulation_time_fs: 600
weight_by_individual_wavelength: True
use_gaussian_sources: True
use_airy_approximation: True
f_number: 2.2
airy_correction_factor: 0.84
beam_size_multiplier: 1
source_angle_theta_vacuum_deg: 0
source_angle_phi_deg: 0
xy_phi_rotations: [0, 90]
xy_adjtheta_rotations: [90, 0]
xy_pol_rotations: [0, 90]
xy_names: ['x', 'y']
use_source_aperture: True
num_focal_spots: 4
dispersive_range_to_adjoint_src_map: [[0, 1, 2, 3]]
adjoint_src_to_dispersive_range_map: [0, 0, 0, 0]
enforce_xy_gradient_symmetry: False
weight_by_quadrant_transmission: True
max_epochs: 5
iter_per_epoch: 16
epoch_start_design_change_max: 0.15
epoch_end_design_change_max: 0.05
epoch_start_design_change_min: 0.05
epoch_end_design_change_min: 0
fom_types: ['transmission', 'overall_transmission', 'intensity']
optimization_fom: intensity
reinterpolate_permittivity: True
reinterpolate_permittivity_factor: 2
reinterpolate_type: nearest
border_optimization: False
layer_gradient: False
flip_gradient: False
polarizations_focal_plane_map: [['x', 'y'], ['x', 'y'], ['x', 'y'], ['x', 'y']]
weight_focal_plane_map_performance_weighting: [1.0, 1.0, 1.0, 1.0]
weight_focal_plane_map: [1.0, 1.0, 1.0, 1.0]
do_green_balance: False
polarization_name_to_idx: {'x': 0, 'y': 1, 'z': 2}
desired_peaks_per_band_um: [0.45, 0.54, 0.65]
explicit_band_centering: True
shuffle_green: False
infrared_center_um: 0.94
do_rejection: False
softplus_kappa: 2
evaluate_bordered_extended: False
do_normalize: False
should_fix_layers: True
fixed_layers: [1, 3]
fixed_layers_density: 0
mpi_exe: C:\ProgramData\Miniconda3\envs\def2\Library\bin\mpiexec.exe
solver_exe: C:\Program Files\Lumerical\v212\bin\fdtd-engine-msmpi.exe
nprocs: 8
optimizer: AdamOptimizer
optimizer_settings: {'step_size': 0.01, 'betas': [0.9, 0.999], 'eps': '1e-8', 'moments': [0.0, 0.0]}
fom_dict: [{'fwd': [0], 'adj': [0], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}, {'fwd': [0], 'adj': [2], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}]
figures_of_merit: {'fom_0': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_0']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_0x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29], 'weight': 1.0}, 'fom_1': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_1']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_1x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29], 'weight': 1.0}, 'fom_2': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_2']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_2x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29], 'weight': 1.0}, 'fom_3': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_3']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_3x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [0.0, 0.1, 0.2], 'opt_ids': [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29], 'weight': 1.0}}


#
# Derived Properties
#

#* Mesh Properties

min_feature_size_voxels: 1.666666666666667
blur_half_width_voxels: 1

#* Optical Properties
min_device_permittivity: 2.25
max_device_permittivity: 5.76
focal_length_um: 1.5299999999999998
focal_plane_center_vertical_um: -1.5299999999999998

#* Device Properties
vertical_layer_height_voxels: 8
device_size_vertical_um: 2.04
device_voxels_lateral: 40
device_voxels_vertical: 40
device_voxels_simulation_mesh_lateral: 41
device_voxels_simulation_mesh_vertical: 42
device_vertical_maximum_um: 2.04
device_size_lateral_bordered_um: 2.04
device_voxels_simulation_mesh_lateral_bordered: 41
border_size_um: 0.255
border_size_voxels: 5
device_voxels_lateral_bordered: 40

#* FDTD Properties

vertical_gap_size_um: 0.7649999999999999
lateral_gap_size_um: 0.51
fdtd_region_size_vertical_um: 5.1
fdtd_region_size_lateral_um: 3.06
fdtd_region_maximum_vertical_um: 2.8049999999999997
fdtd_region_minimum_vertical_um: -2.295

#* Surrounding Properties
pec_aperture_thickness_um: 0.153
sidewall_x_positions_um: [1.0625, 0, -1.0625, 0]
sidewall_y_positions_um: [0, 1.0625, 0, -1.0625]
sidewall_xspan_positions_um: [0.085, 2.21, 0.085, 2.21]
sidewall_yspan_positions_um: [2.21, 0.085, 2.21, 0.085]

#* Spectral Properties
bandwidth_um: 0.35
num_design_frequency_points: 60
num_eval_frequency_points: 360
lambda_values_um: [0.375, 0.3809322033898305, 0.386864406779661, 0.3927966101694915, 0.39872881355932205, 0.4046610169491525, 0.41059322033898304, 0.41652542372881357, 0.42245762711864404, 0.42838983050847457, 0.4343220338983051, 0.4402542372881356, 0.4461864406779661, 0.4521186440677966, 0.45805084745762714, 0.4639830508474576, 0.46991525423728814, 0.47584745762711866, 0.48177966101694913, 0.48771186440677966, 0.4936440677966102, 0.49957627118644066, 0.5055084745762712, 0.5114406779661017, 0.5173728813559322, 0.5233050847457628, 0.5292372881355932, 0.5351694915254237, 0.5411016949152543, 0.5470338983050848, 0.5529661016949152, 0.5588983050847458, 0.5648305084745763, 0.5707627118644067, 0.5766949152542373, 0.5826271186440678, 0.5885593220338983, 0.5944915254237289, 0.6004237288135593, 0.6063559322033898, 0.6122881355932204, 0.6182203389830508, 0.6241525423728813, 0.6300847457627119, 0.6360169491525424, 0.6419491525423728, 0.6478813559322034, 0.6538135593220339, 0.6597457627118644, 0.6656779661016949, 0.6716101694915254, 0.6775423728813559, 0.6834745762711865, 0.6894067796610169, 0.6953389830508474, 0.701271186440678, 0.7072033898305085, 0.7131355932203389, 0.7190677966101695, 0.725]
max_intensity_by_wavelength: [52.61084444444446, 50.98500081044197, 49.433374609660405, 47.95151640407808, 46.53530526346698, 45.18092008442752, 43.884813788858125, 42.64369007615735, 41.45448244432396, 40.31433523036902, 39.22058645092208, 38.17075225030361, 37.16251278624183, 36.19369940333197, 35.26228296169391, 34.36636320343613, 33.50415905278641, 32.67399975736027, 31.87431678822745, 31.10363642539522, 30.360572963215386, 29.643822477178734, 28.952157099706373, 28.28441975798453, 27.63951933170607, 27.016426192856787, 26.414168093481994, 25.831826370748182, 25.268532441625798, 24.723464562204768, 24.19584482905419, 23.68493640218398, 23.190040931087992, 22.71049616707149, 22.245673746613033, 21.79497713190083, 21.357839695934484, 20.933722940709984, 20.522114838021427, 20.12252828332995, 19.73449965397924, 19.357587463786267, 18.991371106714254, 18.63544968295051, 18.28944090126902, 17.952980052064618, 17.62571904590603, 17.30732551287377, 16.997481958330194, 16.69588497111677, 16.402244480490406, 16.116283058399937, 15.83773526396848, 15.566347027288813, 15.30187506986013, 15.044086359197161, 14.792757595328197, 14.547674727068673, 14.308632496113459, 14.075434007134366]
dispersive_range_size_um: 0.35
dispersive_ranges_um: [[0.375, 0.725]]

#* PDAF Functionality Properties
pdaf_focal_spot_x_um: 0.51
pdaf_focal_spot_y_um: 0.51
pdaf_lambda_min_um: 0.375
pdaf_lambda_max_um: 0.49166666666666664
pdaf_lambda_values_um: [0.375, 0.3769774011299435, 0.378954802259887, 0.3809322033898305, 0.382909604519774, 0.3848870056497175, 0.386864406779661, 0.38884180790960454, 0.39081920903954803, 0.3927966101694915, 0.394774011299435, 0.3967514124293785, 0.39872881355932205, 0.40070621468926554, 0.40268361581920903, 0.4046610169491525, 0.40663841807909606, 0.40861581920903955, 0.41059322033898304, 0.41257062146892653, 0.41454802259887, 0.41652542372881357, 0.41850282485875706, 0.42048022598870055, 0.42245762711864404, 0.4244350282485876, 0.4264124293785311, 0.42838983050847457, 0.43036723163841806, 0.43234463276836155, 0.43432203389830504, 0.4362994350282486, 0.4382768361581921, 0.44025423728813556, 0.4422316384180791, 0.4442090395480226, 0.4461864406779661, 0.4481638418079096, 0.45014124293785307, 0.45211864406779656, 0.4540960451977401, 0.4560734463276836, 0.4580508474576271, 0.46002824858757063, 0.4620056497175141, 0.4639830508474576, 0.4659604519774011, 0.4679378531073446, 0.4699152542372881, 0.47189265536723163, 0.4738700564971751, 0.4758474576271186, 0.47782485875706215, 0.47980225988700564, 0.48177966101694913, 0.4837570621468926, 0.4857344632768361, 0.4877118644067796, 0.48968926553672315, 0.49166666666666664]
pdaf_max_intensity_by_wavelength: [52.61084444444446, 52.06036106941459, 51.51847252388663, 50.98500081044197, 50.459772515787094, 49.94261866980895, 49.433374609660405, 48.931879848671514, 48.437977949891916, 47.95151640407808, 47.47234651194793, 47.00032327053321, 46.53530526346698, 46.07715455505197, 45.62573658796086, 45.18092008442752, 44.74257695079326, 44.31058218527887, 43.884813788858125, 43.46515267911444, 43.05148260696698, 42.64369007615735, 42.24166426539312, 41.845296953048056, 41.45448244432396, 41.06911750078211, 40.68910127215721, 40.31433523036902, 39.94472310565177, 39.58017082472361, 39.22058645092209, 38.86588012623455, 38.51596401515526, 38.170752250303615, 37.83016087974073, 37.49410781592403, 37.16251278624183, 36.835297285072244, 36.51238452731323, 36.193699403331976, 35.87916843528465, 35.56871973475898, 35.26228296169393, 34.95978928453291, 34.66117134156823, 34.36636320343613, 34.0753003367238, 33.7879195686504, 33.50415905278642, 33.223958235776365, 32.94725782503149, 32.67399975736028, 32.404127168505845, 32.13758436356033, 31.87431678822745, 31.61427100090576, 31.357394645565762, 31.103636425395223, 30.85294607718795, 30.605274346452173]

#* Forward (Input) Source Properties
lateral_aperture_um: 2.244
src_maximum_vertical_um: 2.55
src_minimum_vertical_um: -1.9124999999999996
mid_lambda_um: 0.55
gaussian_waist_radius_um: 1
source_angle_theta_rad: 0.0
source_angle_theta_deg: 0.0

#* Adjoint Source Properties
adjoint_vertical_um: -1.5299999999999998
num_adjoint_sources: 4
adjoint_x_positions_um: [0.51, -0.51, -0.51, 0.51]
adjoint_y_positions_um: [0.51, 0.51, -0.51, -0.51]

#* Optimization Properties
total_iters: 80
epoch_range_design_change_max: 0.09999999999999999
epoch_range_design_change_min: 0.05
spectral_focal_plane_map: [[0, 20], [20, 40], [40, 60], [20, 40]]
desired_peak_location_per_band: [13, 28, 46]
2024-02-29 14:54:41,445 - template_logger - INFO - Successfully saved output to runs\test_run\processed_config.yml
2024-02-29 14:54:46,435 - template_logger - INFO - Rendered Output:
{ 
    "info": {
        "name": "optimization",
        "path": "",
        "simulator_name": "LumericalFDTD",
        "coordinates": {}
    },

    "objects": {
        "FDTD": {
            
            "name": "FDTD",
            "obj_type": "fdtd",
            "properties": {
                "dimension": "3D",
                "x span": 3.06e-06,
                "y span": 3.06e-06,
                "z max": 2.8049999999999994e-06,
                "z min": -2.2949999999999996e-06,
                "simulation time": 6.000000000000001e-13,
                "index": 1.5
            }
        },
        "forward_src_x": {
            "name": "forward_src_x",
            "obj_type": "gaussian",
            "attached_monitor": 0,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 0,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "z-axis",
                "y span": 6.12e-06,
                "z": 2.5499999999999997e-06,
                "x": 0.0,
                "wavelength start": 3.75e-07,
                "wavelength stop": 7.249999999999999e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -5.099999999999998e-07
            }
        },
        "forward_src_y": {
            "name": "forward_src_y",
            "obj_type": "gaussian",
            "attached_monitor": 1,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 90,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "z-axis",
                "y span": 6.12e-06,
                "z": 2.5499999999999997e-06,
                "x": 0.0,
                "wavelength start": 3.75e-07,
                "wavelength stop": 7.249999999999999e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -5.099999999999998e-07
            }
        },
            "adj_src_0x": {
                "name": "adj_src_0x",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": 5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
            "adj_src_0y": {
                "name": "adj_src_0y",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": 5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 90,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
            "adj_src_1x": {
                "name": "adj_src_1x",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": 5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
            "adj_src_1y": {
                "name": "adj_src_1y",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": 5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 90,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
            "adj_src_2x": {
                "name": "adj_src_2x",
                "obj_type": "dipole",
                "attached_monitor": 2,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
            "adj_src_2y": {
                "name": "adj_src_2y",
                "obj_type": "dipole",
                "attached_monitor": 2,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 90,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
            "adj_src_3x": {
                "name": "adj_src_3x",
                "obj_type": "dipole",
                "attached_monitor": 3,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
            "adj_src_3y": {
                "name": "adj_src_3y",
                "obj_type": "dipole",
                "attached_monitor": 3,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 90,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
        "focal_monitor_0": {
            "name": "focal_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": 5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "focal_monitor_1": {
            "name": "focal_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": -5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "focal_monitor_2": {
            "name": "focal_monitor_2",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": -5.1e-07,
                "y": -5.1e-07,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "focal_monitor_3": {
            "name": "focal_monitor_3",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": 5.1e-07,
                "y": -5.1e-07,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "transmission_monitor_0": {
            "name": "transmission_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "y": 5.1e-07,
                "y span": 1.02e-06,
                "z": -1.5299999999999998e-06,
                "x": 5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "transmission_monitor_1": {
            "name": "transmission_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "y": 5.1e-07,
                "y span": 1.02e-06,
                "z": -1.5299999999999998e-06,
                "x": -5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "transmission_monitor_2": {
            "name": "transmission_monitor_2",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "y": -5.1e-07,
                "y span": 1.02e-06,
                "z": -1.5299999999999998e-06,
                "x": -5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "transmission_monitor_3": {
            "name": "transmission_monitor_3",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "y": -5.1e-07,
                "y span": 1.02e-06,
                "z": -1.5299999999999998e-06,
                "x": 5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },

        "transmission_focal_monitor_": {
            "name": "transmission_focal_monitor_",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "y": 0,
                "y span": 2.04e-06,
                "z": -1.5299999999999998e-06,
                "x": 0,
                "x span": 2.04e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "PEC_screen": {
            "name": "PEC_screen",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 3.5904e-06,
                "y": 0,
                "y span": 3.5904e-06,
                "z min": 2.193e-06,
                "z max": 2.346e-06,
                "material": "PEC (Perfect Electrical Conductor)"
            }
        },
        "source_aperture": {
            "name": "source_aperture",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 2.04e-06,
                "y": 0,
                "y span": 2.04e-06,
                "z min": 2.193e-06,
                "z max": 2.346e-06,
                "index": 1.5
            }
        },
        "design_import": {
            "name": "design_import",
            "obj_type": "import",
            "dev_id": 0,                
            "properties": {
                "x span": 2.04e-06,
                "y span": 2.04e-06,
                "z min": 0.0,
                "z max": 2.04e-06
            }
        },
        "design_mesh": {
            "name": "design_mesh",
            "obj_type": "mesh",
            "dev_id": 0,
            "properties": {
                "x": 0,
                "x span": 3.06e-06,
                "y": 0,
                "y span": 3.06e-06,
                "z min": -5e-07,
                "z max": 2.54e-06,
                "dx": 5.0999999999999993e-08,
                "dy": 5.0999999999999993e-08,
                "dz": 5.0999999999999993e-08
            }
        },
        "design_index_monitor": {
            "name": "design_index_monitor",
            "obj_type": "index",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "3D",
                "y span": 2.04e-06,
                "z min": 0.0,
                "z max": 2.04e-06,
                "spatial interpolation": "nearest mesh cell"
            }
        },
        "design_efield_monitor": {
            "name": "design_efield_monitor",
            "obj_type": "profile",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "3D",
                "y span": 2.04e-06,
                "z min": 0.0,
                "z max": 2.04e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "frequency points": 60,
                "output Hx": 0,
                "output Hy": 0,
                "output Hz": 0
            }
        }
    }
}
2024-02-29 14:54:46,439 - template_logger - INFO - Successfully saved output to runs\test_run\sim.json
2024-02-29 22:07:10,058 - template_logger - INFO - Rendered Output:
#* Original Properties

start_from_step: 0
shelf_fn: save_state
restart_epoch: 0
restart_iter: 0
lumapi_filepath_local: C:\Program Files\Lumerical\v212\api\python\lumapi.py
lumapi_filepath_hpc: /central/home/ifoo/lumerical/2021a_r22/api/python/lumapi.py
simulator_name: LumericalFDTD
simulator_dimension: 3D
simulator_max_wait_time: 3600
use_autograd: False
convert_existing: False
mesh_spacing_um: 0.051
geometry_spacing_lateral_um: 0.051
device_scale_um: 0.051
use_smooth_blur: False
min_feature_size_um: 0.085
background_index: 1.5
min_device_index: 1.5
max_device_index: 2.4
init_permittivity_0_1_scale: 0.5
binarize_3_levels: False
focal_plane_center_lateral_um: 0
num_vertical_layers: 5
vertical_layer_height_um: 0.408
device_size_lateral_um: 2.04
device_vertical_minimum_um: 0
objects_above_device: []
num_sidewalls: 0
sidewall_material: etch
sidewall_extend_pml: False
sidewall_extend_focalplane: True
sidewall_thickness_um: 0.085
sidewall_vertical_minimum_um: -0.765
add_infrared: False
lambda_min_um: 0.375
lambda_max_um: 0.725
lambda_min_eval_um: 0.375
lambda_max_eval_um: 0.725
num_bands: 3
num_points_per_band: 20
num_dispersive_ranges: 1
add_pdaf: False
pdaf_angle_phi_degrees: 45
pdaf_angle_theta_degrees: -8
pdaf_adj_src_idx: 0
fdtd_simulation_time_fs: 600
weight_by_individual_wavelength: True
use_gaussian_sources: True
use_airy_approximation: True
f_number: 2.2
airy_correction_factor: 0.84
beam_size_multiplier: 1
source_angle_theta_vacuum_deg: 0
source_angle_phi_deg: 0
xy_phi_rotations: [0, 90]
xy_adjtheta_rotations: [90, 0]
xy_pol_rotations: [0, 90]
xy_names: ['x', 'y']
use_source_aperture: True
num_focal_spots: 4
dispersive_range_to_adjoint_src_map: [[0, 1, 2, 3]]
adjoint_src_to_dispersive_range_map: [0, 0, 0, 0]
enforce_xy_gradient_symmetry: False
weight_by_quadrant_transmission: True
max_epochs: 5
iter_per_epoch: 16
epoch_start_design_change_max: 0.15
epoch_end_design_change_max: 0.05
epoch_start_design_change_min: 0.05
epoch_end_design_change_min: 0
fom_types: ['transmission', 'overall_transmission', 'intensity']
optimization_fom: intensity
reinterpolate_permittivity: True
reinterpolate_permittivity_factor: 2
reinterpolate_type: nearest
border_optimization: False
layer_gradient: False
flip_gradient: False
polarizations_focal_plane_map: [['x', 'y'], ['x', 'y'], ['x', 'y'], ['x', 'y']]
weight_focal_plane_map_performance_weighting: [1.0, 1.0, 1.0, 1.0]
weight_focal_plane_map: [1.0, 1.0, 1.0, 1.0]
do_green_balance: False
polarization_name_to_idx: {'x': 0, 'y': 1, 'z': 2}
desired_peaks_per_band_um: [0.45, 0.54, 0.65]
explicit_band_centering: True
shuffle_green: False
infrared_center_um: 0.94
do_rejection: False
softplus_kappa: 2
evaluate_bordered_extended: False
do_normalize: False
should_fix_layers: True
fixed_layers: [1, 3]
fixed_layers_density: 0
mpi_exe: C:\ProgramData\Miniconda3\envs\def2\Library\bin\mpiexec.exe
solver_exe: C:\Program Files\Lumerical\v212\bin\fdtd-engine-msmpi.exe
nprocs: 8
optimizer: AdamOptimizer
optimizer_settings: {'step_size': 0.01, 'betas': [0.9, 0.999], 'eps': '1e-8', 'moments': [0.0, 0.0]}
fom_dict: [{'fwd': [0], 'adj': [0], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}, {'fwd': [0], 'adj': [2], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}]
figures_of_merit: {'fom_0': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_0']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_0x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [], 'opt_ids': [], 'weight': 1.0}, 'fom_1': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_1']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_1x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [], 'opt_ids': [], 'weight': 1.0}, 'fom_2': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_2']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_2x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [], 'opt_ids': [], 'weight': 1.0}, 'fom_3': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_3']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_3x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [], 'opt_ids': [], 'weight': 1.0}}


#
# Derived Properties
#

#* Mesh Properties

min_feature_size_voxels: 1.666666666666667
blur_half_width_voxels: 1

#* Optical Properties
min_device_permittivity: 2.25
max_device_permittivity: 5.76
focal_length_um: 1.5299999999999998
focal_plane_center_vertical_um: -1.5299999999999998

#* Device Properties
vertical_layer_height_voxels: 8
device_size_vertical_um: 2.04
device_voxels_lateral: 40
device_voxels_vertical: 40
device_voxels_simulation_mesh_lateral: 41
device_voxels_simulation_mesh_vertical: 42
device_vertical_maximum_um: 2.04
device_size_lateral_bordered_um: 2.04
device_voxels_simulation_mesh_lateral_bordered: 41
border_size_um: 0.255
border_size_voxels: 5
device_voxels_lateral_bordered: 40

#* FDTD Properties

vertical_gap_size_um: 0.7649999999999999
lateral_gap_size_um: 0.51
fdtd_region_size_vertical_um: 5.1
fdtd_region_size_lateral_um: 3.06
fdtd_region_maximum_vertical_um: 2.8049999999999997
fdtd_region_minimum_vertical_um: -2.295

#* Surrounding Properties
pec_aperture_thickness_um: 0.153
sidewall_x_positions_um: [1.0625, 0, -1.0625, 0]
sidewall_y_positions_um: [0, 1.0625, 0, -1.0625]
sidewall_xspan_positions_um: [0.085, 2.21, 0.085, 2.21]
sidewall_yspan_positions_um: [2.21, 0.085, 2.21, 0.085]

#* Spectral Properties
bandwidth_um: 0.35
num_design_frequency_points: 60
num_eval_frequency_points: 360
lambda_values_um: [0.375, 0.3809322033898305, 0.386864406779661, 0.3927966101694915, 0.39872881355932205, 0.4046610169491525, 0.41059322033898304, 0.41652542372881357, 0.42245762711864404, 0.42838983050847457, 0.4343220338983051, 0.4402542372881356, 0.4461864406779661, 0.4521186440677966, 0.45805084745762714, 0.4639830508474576, 0.46991525423728814, 0.47584745762711866, 0.48177966101694913, 0.48771186440677966, 0.4936440677966102, 0.49957627118644066, 0.5055084745762712, 0.5114406779661017, 0.5173728813559322, 0.5233050847457628, 0.5292372881355932, 0.5351694915254237, 0.5411016949152543, 0.5470338983050848, 0.5529661016949152, 0.5588983050847458, 0.5648305084745763, 0.5707627118644067, 0.5766949152542373, 0.5826271186440678, 0.5885593220338983, 0.5944915254237289, 0.6004237288135593, 0.6063559322033898, 0.6122881355932204, 0.6182203389830508, 0.6241525423728813, 0.6300847457627119, 0.6360169491525424, 0.6419491525423728, 0.6478813559322034, 0.6538135593220339, 0.6597457627118644, 0.6656779661016949, 0.6716101694915254, 0.6775423728813559, 0.6834745762711865, 0.6894067796610169, 0.6953389830508474, 0.701271186440678, 0.7072033898305085, 0.7131355932203389, 0.7190677966101695, 0.725]
max_intensity_by_wavelength: [52.61084444444446, 50.98500081044197, 49.433374609660405, 47.95151640407808, 46.53530526346698, 45.18092008442752, 43.884813788858125, 42.64369007615735, 41.45448244432396, 40.31433523036902, 39.22058645092208, 38.17075225030361, 37.16251278624183, 36.19369940333197, 35.26228296169391, 34.36636320343613, 33.50415905278641, 32.67399975736027, 31.87431678822745, 31.10363642539522, 30.360572963215386, 29.643822477178734, 28.952157099706373, 28.28441975798453, 27.63951933170607, 27.016426192856787, 26.414168093481994, 25.831826370748182, 25.268532441625798, 24.723464562204768, 24.19584482905419, 23.68493640218398, 23.190040931087992, 22.71049616707149, 22.245673746613033, 21.79497713190083, 21.357839695934484, 20.933722940709984, 20.522114838021427, 20.12252828332995, 19.73449965397924, 19.357587463786267, 18.991371106714254, 18.63544968295051, 18.28944090126902, 17.952980052064618, 17.62571904590603, 17.30732551287377, 16.997481958330194, 16.69588497111677, 16.402244480490406, 16.116283058399937, 15.83773526396848, 15.566347027288813, 15.30187506986013, 15.044086359197161, 14.792757595328197, 14.547674727068673, 14.308632496113459, 14.075434007134366]
dispersive_range_size_um: 0.35
dispersive_ranges_um: [[0.375, 0.725]]

#* PDAF Functionality Properties
pdaf_focal_spot_x_um: 0.51
pdaf_focal_spot_y_um: 0.51
pdaf_lambda_min_um: 0.375
pdaf_lambda_max_um: 0.49166666666666664
pdaf_lambda_values_um: [0.375, 0.3769774011299435, 0.378954802259887, 0.3809322033898305, 0.382909604519774, 0.3848870056497175, 0.386864406779661, 0.38884180790960454, 0.39081920903954803, 0.3927966101694915, 0.394774011299435, 0.3967514124293785, 0.39872881355932205, 0.40070621468926554, 0.40268361581920903, 0.4046610169491525, 0.40663841807909606, 0.40861581920903955, 0.41059322033898304, 0.41257062146892653, 0.41454802259887, 0.41652542372881357, 0.41850282485875706, 0.42048022598870055, 0.42245762711864404, 0.4244350282485876, 0.4264124293785311, 0.42838983050847457, 0.43036723163841806, 0.43234463276836155, 0.43432203389830504, 0.4362994350282486, 0.4382768361581921, 0.44025423728813556, 0.4422316384180791, 0.4442090395480226, 0.4461864406779661, 0.4481638418079096, 0.45014124293785307, 0.45211864406779656, 0.4540960451977401, 0.4560734463276836, 0.4580508474576271, 0.46002824858757063, 0.4620056497175141, 0.4639830508474576, 0.4659604519774011, 0.4679378531073446, 0.4699152542372881, 0.47189265536723163, 0.4738700564971751, 0.4758474576271186, 0.47782485875706215, 0.47980225988700564, 0.48177966101694913, 0.4837570621468926, 0.4857344632768361, 0.4877118644067796, 0.48968926553672315, 0.49166666666666664]
pdaf_max_intensity_by_wavelength: [52.61084444444446, 52.06036106941459, 51.51847252388663, 50.98500081044197, 50.459772515787094, 49.94261866980895, 49.433374609660405, 48.931879848671514, 48.437977949891916, 47.95151640407808, 47.47234651194793, 47.00032327053321, 46.53530526346698, 46.07715455505197, 45.62573658796086, 45.18092008442752, 44.74257695079326, 44.31058218527887, 43.884813788858125, 43.46515267911444, 43.05148260696698, 42.64369007615735, 42.24166426539312, 41.845296953048056, 41.45448244432396, 41.06911750078211, 40.68910127215721, 40.31433523036902, 39.94472310565177, 39.58017082472361, 39.22058645092209, 38.86588012623455, 38.51596401515526, 38.170752250303615, 37.83016087974073, 37.49410781592403, 37.16251278624183, 36.835297285072244, 36.51238452731323, 36.193699403331976, 35.87916843528465, 35.56871973475898, 35.26228296169393, 34.95978928453291, 34.66117134156823, 34.36636320343613, 34.0753003367238, 33.7879195686504, 33.50415905278642, 33.223958235776365, 32.94725782503149, 32.67399975736028, 32.404127168505845, 32.13758436356033, 31.87431678822745, 31.61427100090576, 31.357394645565762, 31.103636425395223, 30.85294607718795, 30.605274346452173]

#* Forward (Input) Source Properties
lateral_aperture_um: 2.244
src_maximum_vertical_um: 2.55
src_minimum_vertical_um: -1.9124999999999996
mid_lambda_um: 0.55
gaussian_waist_radius_um: 1
source_angle_theta_rad: 0.0
source_angle_theta_deg: 0.0

#* Adjoint Source Properties
adjoint_vertical_um: -1.5299999999999998
num_adjoint_sources: 4
adjoint_x_positions_um: [0.51, -0.51, -0.51, 0.51]
adjoint_y_positions_um: [0.51, 0.51, -0.51, -0.51]

#* Optimization Properties
total_iters: 80
epoch_range_design_change_max: 0.09999999999999999
epoch_range_design_change_min: 0.05
spectral_focal_plane_map: [[0, 20], [20, 40], [40, 60], [20, 40]]
desired_peak_location_per_band: [13, 28, 46]
2024-02-29 22:07:10,062 - template_logger - INFO - Successfully saved output to runs\test_run\processed_config.yml
2024-02-29 22:07:16,542 - template_logger - INFO - Rendered Output:
{ 
    "info": {
        "name": "optimization",
        "path": "",
        "simulator_name": "LumericalFDTD",
        "coordinates": {}
    },

    "objects": {
        "FDTD": {
            
            "name": "FDTD",
            "obj_type": "fdtd",
            "properties": {
                "dimension": "3D",
                "x span": 3.06e-06,
                "y span": 3.06e-06,
                "z max": 2.8049999999999994e-06,
                "z min": -2.2949999999999996e-06,
                "simulation time": 6.000000000000001e-13,
                "index": 1.5
            }
        },
        "forward_src_x": {
            "name": "forward_src_x",
            "obj_type": "gaussian",
            "attached_monitor": 0,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 0,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "z-axis",
                "y span": 6.12e-06,
                "z": 2.5499999999999997e-06,
                "x": 0.0,
                "wavelength start": 3.75e-07,
                "wavelength stop": 7.249999999999999e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -5.099999999999998e-07
            }
        },
        "forward_src_y": {
            "name": "forward_src_y",
            "obj_type": "gaussian",
            "attached_monitor": 1,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 90,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "z-axis",
                "y span": 6.12e-06,
                "z": 2.5499999999999997e-06,
                "x": 0.0,
                "wavelength start": 3.75e-07,
                "wavelength stop": 7.249999999999999e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -5.099999999999998e-07
            }
        },
            "adj_src_0x": {
                "name": "adj_src_0x",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": 5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
            "adj_src_0y": {
                "name": "adj_src_0y",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": 5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 90,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
            "adj_src_1x": {
                "name": "adj_src_1x",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": 5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
            "adj_src_1y": {
                "name": "adj_src_1y",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": 5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 90,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
            "adj_src_2x": {
                "name": "adj_src_2x",
                "obj_type": "dipole",
                "attached_monitor": 2,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
            "adj_src_2y": {
                "name": "adj_src_2y",
                "obj_type": "dipole",
                "attached_monitor": 2,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 90,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
            "adj_src_3x": {
                "name": "adj_src_3x",
                "obj_type": "dipole",
                "attached_monitor": 3,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
            "adj_src_3y": {
                "name": "adj_src_3y",
                "obj_type": "dipole",
                "attached_monitor": 3,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 90,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
        "focal_monitor_0": {
            "name": "focal_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": 5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "focal_monitor_1": {
            "name": "focal_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": -5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "focal_monitor_2": {
            "name": "focal_monitor_2",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": -5.1e-07,
                "y": -5.1e-07,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "focal_monitor_3": {
            "name": "focal_monitor_3",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": 5.1e-07,
                "y": -5.1e-07,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "transmission_monitor_0": {
            "name": "transmission_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "y": 5.1e-07,
                "y span": 1.02e-06,
                "z": -1.5299999999999998e-06,
                "x": 5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "transmission_monitor_1": {
            "name": "transmission_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "y": 5.1e-07,
                "y span": 1.02e-06,
                "z": -1.5299999999999998e-06,
                "x": -5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "transmission_monitor_2": {
            "name": "transmission_monitor_2",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "y": -5.1e-07,
                "y span": 1.02e-06,
                "z": -1.5299999999999998e-06,
                "x": -5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "transmission_monitor_3": {
            "name": "transmission_monitor_3",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "y": -5.1e-07,
                "y span": 1.02e-06,
                "z": -1.5299999999999998e-06,
                "x": 5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },

        "transmission_focal_monitor_": {
            "name": "transmission_focal_monitor_",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "y": 0,
                "y span": 2.04e-06,
                "z": -1.5299999999999998e-06,
                "x": 0,
                "x span": 2.04e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "PEC_screen": {
            "name": "PEC_screen",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 3.5904e-06,
                "y": 0,
                "y span": 3.5904e-06,
                "z min": 2.193e-06,
                "z max": 2.346e-06,
                "material": "PEC (Perfect Electrical Conductor)"
            }
        },
        "source_aperture": {
            "name": "source_aperture",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 2.04e-06,
                "y": 0,
                "y span": 2.04e-06,
                "z min": 2.193e-06,
                "z max": 2.346e-06,
                "index": 1.5
            }
        },
        "design_import": {
            "name": "design_import",
            "obj_type": "import",
            "dev_id": 0,                
            "properties": {
                "x span": 2.04e-06,
                "y span": 2.04e-06,
                "z min": 0.0,
                "z max": 2.04e-06
            }
        },
        "design_mesh": {
            "name": "design_mesh",
            "obj_type": "mesh",
            "dev_id": 0,
            "properties": {
                "x": 0,
                "x span": 3.06e-06,
                "y": 0,
                "y span": 3.06e-06,
                "z min": -5e-07,
                "z max": 2.54e-06,
                "dx": 5.0999999999999993e-08,
                "dy": 5.0999999999999993e-08,
                "dz": 5.0999999999999993e-08
            }
        },
        "design_index_monitor": {
            "name": "design_index_monitor",
            "obj_type": "index",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "3D",
                "y span": 2.04e-06,
                "z min": 0.0,
                "z max": 2.04e-06,
                "spatial interpolation": "nearest mesh cell"
            }
        },
        "design_efield_monitor": {
            "name": "design_efield_monitor",
            "obj_type": "profile",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "3D",
                "y span": 2.04e-06,
                "z min": 0.0,
                "z max": 2.04e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "frequency points": 60,
                "output Hx": 0,
                "output Hy": 0,
                "output Hz": 0
            }
        }
    }
}
2024-02-29 22:07:16,546 - template_logger - INFO - Successfully saved output to runs\test_run\sim.json
2024-02-29 22:22:25,782 - template_logger - INFO - Rendered Output:
#* Original Properties

start_from_step: 0
shelf_fn: save_state
restart_epoch: 0
restart_iter: 0
lumapi_filepath_local: C:\Program Files\Lumerical\v212\api\python\lumapi.py
lumapi_filepath_hpc: /central/home/ifoo/lumerical/2021a_r22/api/python/lumapi.py
simulator_name: LumericalFDTD
simulator_dimension: 3D
simulator_max_wait_time: 3600
use_autograd: False
convert_existing: False
mesh_spacing_um: 0.051
geometry_spacing_lateral_um: 0.051
device_scale_um: 0.051
use_smooth_blur: False
min_feature_size_um: 0.085
background_index: 1.5
min_device_index: 1.5
max_device_index: 2.4
init_permittivity_0_1_scale: 0.5
binarize_3_levels: False
focal_plane_center_lateral_um: 0
num_vertical_layers: 5
vertical_layer_height_um: 0.408
device_size_lateral_um: 2.04
device_vertical_minimum_um: 0
objects_above_device: []
num_sidewalls: 0
sidewall_material: etch
sidewall_extend_pml: False
sidewall_extend_focalplane: True
sidewall_thickness_um: 0.085
sidewall_vertical_minimum_um: -0.765
add_infrared: False
lambda_min_um: 0.375
lambda_max_um: 0.725
lambda_min_eval_um: 0.375
lambda_max_eval_um: 0.725
num_bands: 3
num_points_per_band: 20
num_dispersive_ranges: 1
add_pdaf: False
pdaf_angle_phi_degrees: 45
pdaf_angle_theta_degrees: -8
pdaf_adj_src_idx: 0
fdtd_simulation_time_fs: 600
weight_by_individual_wavelength: True
use_gaussian_sources: True
use_airy_approximation: True
f_number: 2.2
airy_correction_factor: 0.84
beam_size_multiplier: 1
source_angle_theta_vacuum_deg: 0
source_angle_phi_deg: 0
xy_phi_rotations: [0, 90]
xy_adjtheta_rotations: [90, 0]
xy_pol_rotations: [0, 90]
xy_names: ['x', 'y']
use_source_aperture: True
num_focal_spots: 4
dispersive_range_to_adjoint_src_map: [[0, 1, 2, 3]]
adjoint_src_to_dispersive_range_map: [0, 0, 0, 0]
enforce_xy_gradient_symmetry: False
weight_by_quadrant_transmission: True
max_epochs: 5
iter_per_epoch: 16
epoch_start_design_change_max: 0.15
epoch_end_design_change_max: 0.05
epoch_start_design_change_min: 0.05
epoch_end_design_change_min: 0
fom_types: ['transmission', 'overall_transmission', 'intensity']
optimization_fom: intensity
reinterpolate_permittivity: True
reinterpolate_permittivity_factor: 2
reinterpolate_type: nearest
border_optimization: False
layer_gradient: False
flip_gradient: False
polarizations_focal_plane_map: [['x', 'y'], ['x', 'y'], ['x', 'y'], ['x', 'y']]
weight_focal_plane_map_performance_weighting: [1.0, 1.0, 1.0, 1.0]
weight_focal_plane_map: [1.0, 1.0, 1.0, 1.0]
do_green_balance: False
polarization_name_to_idx: {'x': 0, 'y': 1, 'z': 2}
desired_peaks_per_band_um: [0.45, 0.54, 0.65]
explicit_band_centering: True
shuffle_green: False
infrared_center_um: 0.94
do_rejection: False
softplus_kappa: 2
evaluate_bordered_extended: False
do_normalize: False
should_fix_layers: True
fixed_layers: [1, 3]
fixed_layers_density: 0
mpi_exe: C:\ProgramData\Miniconda3\envs\def2\Library\bin\mpiexec.exe
solver_exe: C:\Program Files\Lumerical\v212\bin\fdtd-engine-msmpi.exe
nprocs: 8
optimizer: AdamOptimizer
optimizer_settings: {'step_size': 0.01, 'betas': [0.9, 0.999], 'eps': '1e-8', 'moments': [0.0, 0.0]}
fom_dict: [{'fwd': [0], 'adj': [0], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}, {'fwd': [0], 'adj': [2], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}]
figures_of_merit: {'fom_0': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_0']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_0x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [], 'weight': 1.0}, 'fom_1': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_1']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_1x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [], 'weight': 1.0}, 'fom_2': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_2']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_2x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [], 'weight': 1.0}, 'fom_3': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_3']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_3x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [], 'weight': 1.0}}


#
# Derived Properties
#

#* Mesh Properties

min_feature_size_voxels: 1.666666666666667
blur_half_width_voxels: 1

#* Optical Properties
min_device_permittivity: 2.25
max_device_permittivity: 5.76
focal_length_um: 1.5299999999999998
focal_plane_center_vertical_um: -1.5299999999999998

#* Device Properties
vertical_layer_height_voxels: 8
device_size_vertical_um: 2.04
device_voxels_lateral: 40
device_voxels_vertical: 40
device_voxels_simulation_mesh_lateral: 41
device_voxels_simulation_mesh_vertical: 42
device_vertical_maximum_um: 2.04
device_size_lateral_bordered_um: 2.04
device_voxels_simulation_mesh_lateral_bordered: 41
border_size_um: 0.255
border_size_voxels: 5
device_voxels_lateral_bordered: 40

#* FDTD Properties

vertical_gap_size_um: 0.7649999999999999
lateral_gap_size_um: 0.51
fdtd_region_size_vertical_um: 5.1
fdtd_region_size_lateral_um: 3.06
fdtd_region_maximum_vertical_um: 2.8049999999999997
fdtd_region_minimum_vertical_um: -2.295

#* Surrounding Properties
pec_aperture_thickness_um: 0.153
sidewall_x_positions_um: [1.0625, 0, -1.0625, 0]
sidewall_y_positions_um: [0, 1.0625, 0, -1.0625]
sidewall_xspan_positions_um: [0.085, 2.21, 0.085, 2.21]
sidewall_yspan_positions_um: [2.21, 0.085, 2.21, 0.085]

#* Spectral Properties
bandwidth_um: 0.35
num_design_frequency_points: 60
num_eval_frequency_points: 360
lambda_values_um: [0.375, 0.3809322033898305, 0.386864406779661, 0.3927966101694915, 0.39872881355932205, 0.4046610169491525, 0.41059322033898304, 0.41652542372881357, 0.42245762711864404, 0.42838983050847457, 0.4343220338983051, 0.4402542372881356, 0.4461864406779661, 0.4521186440677966, 0.45805084745762714, 0.4639830508474576, 0.46991525423728814, 0.47584745762711866, 0.48177966101694913, 0.48771186440677966, 0.4936440677966102, 0.49957627118644066, 0.5055084745762712, 0.5114406779661017, 0.5173728813559322, 0.5233050847457628, 0.5292372881355932, 0.5351694915254237, 0.5411016949152543, 0.5470338983050848, 0.5529661016949152, 0.5588983050847458, 0.5648305084745763, 0.5707627118644067, 0.5766949152542373, 0.5826271186440678, 0.5885593220338983, 0.5944915254237289, 0.6004237288135593, 0.6063559322033898, 0.6122881355932204, 0.6182203389830508, 0.6241525423728813, 0.6300847457627119, 0.6360169491525424, 0.6419491525423728, 0.6478813559322034, 0.6538135593220339, 0.6597457627118644, 0.6656779661016949, 0.6716101694915254, 0.6775423728813559, 0.6834745762711865, 0.6894067796610169, 0.6953389830508474, 0.701271186440678, 0.7072033898305085, 0.7131355932203389, 0.7190677966101695, 0.725]
max_intensity_by_wavelength: [52.61084444444446, 50.98500081044197, 49.433374609660405, 47.95151640407808, 46.53530526346698, 45.18092008442752, 43.884813788858125, 42.64369007615735, 41.45448244432396, 40.31433523036902, 39.22058645092208, 38.17075225030361, 37.16251278624183, 36.19369940333197, 35.26228296169391, 34.36636320343613, 33.50415905278641, 32.67399975736027, 31.87431678822745, 31.10363642539522, 30.360572963215386, 29.643822477178734, 28.952157099706373, 28.28441975798453, 27.63951933170607, 27.016426192856787, 26.414168093481994, 25.831826370748182, 25.268532441625798, 24.723464562204768, 24.19584482905419, 23.68493640218398, 23.190040931087992, 22.71049616707149, 22.245673746613033, 21.79497713190083, 21.357839695934484, 20.933722940709984, 20.522114838021427, 20.12252828332995, 19.73449965397924, 19.357587463786267, 18.991371106714254, 18.63544968295051, 18.28944090126902, 17.952980052064618, 17.62571904590603, 17.30732551287377, 16.997481958330194, 16.69588497111677, 16.402244480490406, 16.116283058399937, 15.83773526396848, 15.566347027288813, 15.30187506986013, 15.044086359197161, 14.792757595328197, 14.547674727068673, 14.308632496113459, 14.075434007134366]
dispersive_range_size_um: 0.35
dispersive_ranges_um: [[0.375, 0.725]]

#* PDAF Functionality Properties
pdaf_focal_spot_x_um: 0.51
pdaf_focal_spot_y_um: 0.51
pdaf_lambda_min_um: 0.375
pdaf_lambda_max_um: 0.49166666666666664
pdaf_lambda_values_um: [0.375, 0.3769774011299435, 0.378954802259887, 0.3809322033898305, 0.382909604519774, 0.3848870056497175, 0.386864406779661, 0.38884180790960454, 0.39081920903954803, 0.3927966101694915, 0.394774011299435, 0.3967514124293785, 0.39872881355932205, 0.40070621468926554, 0.40268361581920903, 0.4046610169491525, 0.40663841807909606, 0.40861581920903955, 0.41059322033898304, 0.41257062146892653, 0.41454802259887, 0.41652542372881357, 0.41850282485875706, 0.42048022598870055, 0.42245762711864404, 0.4244350282485876, 0.4264124293785311, 0.42838983050847457, 0.43036723163841806, 0.43234463276836155, 0.43432203389830504, 0.4362994350282486, 0.4382768361581921, 0.44025423728813556, 0.4422316384180791, 0.4442090395480226, 0.4461864406779661, 0.4481638418079096, 0.45014124293785307, 0.45211864406779656, 0.4540960451977401, 0.4560734463276836, 0.4580508474576271, 0.46002824858757063, 0.4620056497175141, 0.4639830508474576, 0.4659604519774011, 0.4679378531073446, 0.4699152542372881, 0.47189265536723163, 0.4738700564971751, 0.4758474576271186, 0.47782485875706215, 0.47980225988700564, 0.48177966101694913, 0.4837570621468926, 0.4857344632768361, 0.4877118644067796, 0.48968926553672315, 0.49166666666666664]
pdaf_max_intensity_by_wavelength: [52.61084444444446, 52.06036106941459, 51.51847252388663, 50.98500081044197, 50.459772515787094, 49.94261866980895, 49.433374609660405, 48.931879848671514, 48.437977949891916, 47.95151640407808, 47.47234651194793, 47.00032327053321, 46.53530526346698, 46.07715455505197, 45.62573658796086, 45.18092008442752, 44.74257695079326, 44.31058218527887, 43.884813788858125, 43.46515267911444, 43.05148260696698, 42.64369007615735, 42.24166426539312, 41.845296953048056, 41.45448244432396, 41.06911750078211, 40.68910127215721, 40.31433523036902, 39.94472310565177, 39.58017082472361, 39.22058645092209, 38.86588012623455, 38.51596401515526, 38.170752250303615, 37.83016087974073, 37.49410781592403, 37.16251278624183, 36.835297285072244, 36.51238452731323, 36.193699403331976, 35.87916843528465, 35.56871973475898, 35.26228296169393, 34.95978928453291, 34.66117134156823, 34.36636320343613, 34.0753003367238, 33.7879195686504, 33.50415905278642, 33.223958235776365, 32.94725782503149, 32.67399975736028, 32.404127168505845, 32.13758436356033, 31.87431678822745, 31.61427100090576, 31.357394645565762, 31.103636425395223, 30.85294607718795, 30.605274346452173]

#* Forward (Input) Source Properties
lateral_aperture_um: 2.244
src_maximum_vertical_um: 2.55
src_minimum_vertical_um: -1.9124999999999996
mid_lambda_um: 0.55
gaussian_waist_radius_um: 1
source_angle_theta_rad: 0.0
source_angle_theta_deg: 0.0

#* Adjoint Source Properties
adjoint_vertical_um: -1.5299999999999998
num_adjoint_sources: 4
adjoint_x_positions_um: [0.51, -0.51, -0.51, 0.51]
adjoint_y_positions_um: [0.51, 0.51, -0.51, -0.51]

#* Optimization Properties
total_iters: 80
epoch_range_design_change_max: 0.09999999999999999
epoch_range_design_change_min: 0.05
spectral_focal_plane_map: [[0, 20], [20, 40], [40, 60], [20, 40]]
desired_peak_location_per_band: [13, 28, 46]
2024-02-29 22:22:25,785 - template_logger - INFO - Successfully saved output to runs\test_run\processed_config.yml
2024-02-29 22:22:32,191 - template_logger - INFO - Rendered Output:
{ 
    "info": {
        "name": "optimization",
        "path": "",
        "simulator_name": "LumericalFDTD",
        "coordinates": {}
    },

    "objects": {
        "FDTD": {
            
            "name": "FDTD",
            "obj_type": "fdtd",
            "properties": {
                "dimension": "3D",
                "x span": 3.06e-06,
                "y span": 3.06e-06,
                "z max": 2.8049999999999994e-06,
                "z min": -2.2949999999999996e-06,
                "simulation time": 6.000000000000001e-13,
                "index": 1.5
            }
        },
        "forward_src_x": {
            "name": "forward_src_x",
            "obj_type": "gaussian",
            "attached_monitor": 0,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 0,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "z-axis",
                "y span": 6.12e-06,
                "z": 2.5499999999999997e-06,
                "x": 0.0,
                "wavelength start": 3.75e-07,
                "wavelength stop": 7.249999999999999e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -5.099999999999998e-07
            }
        },
        "forward_src_y": {
            "name": "forward_src_y",
            "obj_type": "gaussian",
            "attached_monitor": 1,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 90,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "z-axis",
                "y span": 6.12e-06,
                "z": 2.5499999999999997e-06,
                "x": 0.0,
                "wavelength start": 3.75e-07,
                "wavelength stop": 7.249999999999999e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -5.099999999999998e-07
            }
        },
            "adj_src_0x": {
                "name": "adj_src_0x",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": 5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
            "adj_src_0y": {
                "name": "adj_src_0y",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": 5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 90,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
            "adj_src_1x": {
                "name": "adj_src_1x",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": 5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
            "adj_src_1y": {
                "name": "adj_src_1y",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": 5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 90,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
            "adj_src_2x": {
                "name": "adj_src_2x",
                "obj_type": "dipole",
                "attached_monitor": 2,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
            "adj_src_2y": {
                "name": "adj_src_2y",
                "obj_type": "dipole",
                "attached_monitor": 2,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 90,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
            "adj_src_3x": {
                "name": "adj_src_3x",
                "obj_type": "dipole",
                "attached_monitor": 3,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
            "adj_src_3y": {
                "name": "adj_src_3y",
                "obj_type": "dipole",
                "attached_monitor": 3,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 90,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
        "focal_monitor_0": {
            "name": "focal_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": 5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "focal_monitor_1": {
            "name": "focal_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": -5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "focal_monitor_2": {
            "name": "focal_monitor_2",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": -5.1e-07,
                "y": -5.1e-07,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "focal_monitor_3": {
            "name": "focal_monitor_3",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": 5.1e-07,
                "y": -5.1e-07,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "transmission_monitor_0": {
            "name": "transmission_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "y": 5.1e-07,
                "y span": 1.02e-06,
                "z": -1.5299999999999998e-06,
                "x": 5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "transmission_monitor_1": {
            "name": "transmission_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "y": 5.1e-07,
                "y span": 1.02e-06,
                "z": -1.5299999999999998e-06,
                "x": -5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "transmission_monitor_2": {
            "name": "transmission_monitor_2",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "y": -5.1e-07,
                "y span": 1.02e-06,
                "z": -1.5299999999999998e-06,
                "x": -5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "transmission_monitor_3": {
            "name": "transmission_monitor_3",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "y": -5.1e-07,
                "y span": 1.02e-06,
                "z": -1.5299999999999998e-06,
                "x": 5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },

        "transmission_focal_monitor_": {
            "name": "transmission_focal_monitor_",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "y": 0,
                "y span": 2.04e-06,
                "z": -1.5299999999999998e-06,
                "x": 0,
                "x span": 2.04e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "PEC_screen": {
            "name": "PEC_screen",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 3.5904e-06,
                "y": 0,
                "y span": 3.5904e-06,
                "z min": 2.193e-06,
                "z max": 2.346e-06,
                "material": "PEC (Perfect Electrical Conductor)"
            }
        },
        "source_aperture": {
            "name": "source_aperture",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 2.04e-06,
                "y": 0,
                "y span": 2.04e-06,
                "z min": 2.193e-06,
                "z max": 2.346e-06,
                "index": 1.5
            }
        },
        "design_import": {
            "name": "design_import",
            "obj_type": "import",
            "dev_id": 0,                
            "properties": {
                "x span": 2.04e-06,
                "y span": 2.04e-06,
                "z min": 0.0,
                "z max": 2.04e-06
            }
        },
        "design_mesh": {
            "name": "design_mesh",
            "obj_type": "mesh",
            "dev_id": 0,
            "properties": {
                "x": 0,
                "x span": 3.06e-06,
                "y": 0,
                "y span": 3.06e-06,
                "z min": -5e-07,
                "z max": 2.54e-06,
                "dx": 5.0999999999999993e-08,
                "dy": 5.0999999999999993e-08,
                "dz": 5.0999999999999993e-08
            }
        },
        "design_index_monitor": {
            "name": "design_index_monitor",
            "obj_type": "index",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "3D",
                "y span": 2.04e-06,
                "z min": 0.0,
                "z max": 2.04e-06,
                "spatial interpolation": "nearest mesh cell"
            }
        },
        "design_efield_monitor": {
            "name": "design_efield_monitor",
            "obj_type": "profile",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "3D",
                "y span": 2.04e-06,
                "z min": 0.0,
                "z max": 2.04e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "frequency points": 60,
                "output Hx": 0,
                "output Hy": 0,
                "output Hz": 0
            }
        }
    }
}
2024-02-29 22:22:32,195 - template_logger - INFO - Successfully saved output to runs\test_run\sim.json
2024-02-29 23:48:03,054 - template_logger - INFO - Rendered Output:
#* Original Properties

start_from_step: 0
shelf_fn: save_state
restart_epoch: 0
restart_iter: 0
lumapi_filepath_local: C:\Program Files\Lumerical\v212\api\python\lumapi.py
lumapi_filepath_hpc: /central/home/ifoo/lumerical/2021a_r22/api/python/lumapi.py
simulator_name: LumericalFDTD
simulator_dimension: 3D
simulator_max_wait_time: 3600
use_autograd: False
convert_existing: False
mesh_spacing_um: 0.051
geometry_spacing_lateral_um: 0.051
device_scale_um: 0.051
use_smooth_blur: False
min_feature_size_um: 0.085
background_index: 1.5
min_device_index: 1.5
max_device_index: 2.4
init_permittivity_0_1_scale: 0.5
binarize_3_levels: False
focal_plane_center_lateral_um: 0
num_vertical_layers: 5
vertical_layer_height_um: 0.408
device_size_lateral_um: 2.04
device_vertical_minimum_um: 0
objects_above_device: []
num_sidewalls: 0
sidewall_material: etch
sidewall_extend_pml: False
sidewall_extend_focalplane: True
sidewall_thickness_um: 0.085
sidewall_vertical_minimum_um: -0.765
add_infrared: False
lambda_min_um: 0.375
lambda_max_um: 0.725
lambda_min_eval_um: 0.375
lambda_max_eval_um: 0.725
num_bands: 3
num_points_per_band: 20
num_dispersive_ranges: 1
add_pdaf: False
pdaf_angle_phi_degrees: 45
pdaf_angle_theta_degrees: -8
pdaf_adj_src_idx: 0
fdtd_simulation_time_fs: 600
weight_by_individual_wavelength: True
use_gaussian_sources: True
use_airy_approximation: True
f_number: 2.2
airy_correction_factor: 0.84
beam_size_multiplier: 1
source_angle_theta_vacuum_deg: 0
source_angle_phi_deg: 0
xy_phi_rotations: [0, 90]
xy_adjtheta_rotations: [90, 0]
xy_pol_rotations: [0, 90]
xy_names: ['x', 'y']
use_source_aperture: True
num_focal_spots: 4
dispersive_range_to_adjoint_src_map: [[0, 1, 2, 3]]
adjoint_src_to_dispersive_range_map: [0, 0, 0, 0]
enforce_xy_gradient_symmetry: False
weight_by_quadrant_transmission: True
max_epochs: 5
iter_per_epoch: 16
epoch_start_design_change_max: 0.15
epoch_end_design_change_max: 0.05
epoch_start_design_change_min: 0.05
epoch_end_design_change_min: 0
fom_types: ['transmission', 'overall_transmission', 'intensity']
optimization_fom: intensity
reinterpolate_permittivity: True
reinterpolate_permittivity_factor: 2
reinterpolate_type: nearest
border_optimization: False
layer_gradient: False
flip_gradient: False
polarizations_focal_plane_map: [['x', 'y'], ['x', 'y'], ['x', 'y'], ['x', 'y']]
weight_focal_plane_map_performance_weighting: [1.0, 1.0, 1.0, 1.0]
weight_focal_plane_map: [1.0, 1.0, 1.0, 1.0]
do_green_balance: False
polarization_name_to_idx: {'x': 0, 'y': 1, 'z': 2}
desired_peaks_per_band_um: [0.45, 0.54, 0.65]
explicit_band_centering: True
shuffle_green: False
infrared_center_um: 0.94
do_rejection: False
softplus_kappa: 2
evaluate_bordered_extended: False
do_normalize: False
should_fix_layers: True
fixed_layers: [1, 3]
fixed_layers_density: 0
mpi_exe: C:\ProgramData\Miniconda3\envs\def2\Library\bin\mpiexec.exe
solver_exe: C:\Program Files\Lumerical\v212\bin\fdtd-engine-msmpi.exe
nprocs: 8
optimizer: AdamOptimizer
optimizer_settings: {'step_size': 0.01, 'betas': [0.9, 0.999], 'eps': '1e-8', 'moments': [0.0, 0.0]}
fom_dict: [{'fwd': [0], 'adj': [0], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}, {'fwd': [0], 'adj': [2], 'freq_idx_opt': 'f_bin_all', 'freq_idx_restricted_opt': []}]
figures_of_merit: {'fom_0': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_0']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_0x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [], 'weight': 1.0}, 'fom_1': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_1']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_1x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [], 'weight': 1.0}, 'fom_2': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_2']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_2x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [], 'weight': 1.0}, 'fom_3': {'type': 'BayerFilterFoM', 'fom_monitors': [['forward_src_x', 'focal_monitor_3']], 'grad_monitors': [['forward_src_x', 'design_efield_monitor'], ['adj_src_3x', 'design_efield_monitor']], 'polarization': 'TE', 'freq': [], 'weight': 1.0}}


#
# Derived Properties
#

#* Mesh Properties

min_feature_size_voxels: 1.666666666666667
blur_half_width_voxels: 1

#* Optical Properties
min_device_permittivity: 2.25
max_device_permittivity: 5.76
focal_length_um: 1.5299999999999998
focal_plane_center_vertical_um: -1.5299999999999998

#* Device Properties
vertical_layer_height_voxels: 8
device_size_vertical_um: 2.04
device_voxels_lateral: 40
device_voxels_vertical: 40
device_voxels_simulation_mesh_lateral: 41
device_voxels_simulation_mesh_vertical: 42
device_vertical_maximum_um: 2.04
device_size_lateral_bordered_um: 2.04
device_voxels_simulation_mesh_lateral_bordered: 41
border_size_um: 0.255
border_size_voxels: 5
device_voxels_lateral_bordered: 40

#* FDTD Properties

vertical_gap_size_um: 0.7649999999999999
lateral_gap_size_um: 0.51
fdtd_region_size_vertical_um: 5.1
fdtd_region_size_lateral_um: 3.06
fdtd_region_maximum_vertical_um: 2.8049999999999997
fdtd_region_minimum_vertical_um: -2.295

#* Surrounding Properties
pec_aperture_thickness_um: 0.153
sidewall_x_positions_um: [1.0625, 0, -1.0625, 0]
sidewall_y_positions_um: [0, 1.0625, 0, -1.0625]
sidewall_xspan_positions_um: [0.085, 2.21, 0.085, 2.21]
sidewall_yspan_positions_um: [2.21, 0.085, 2.21, 0.085]

#* Spectral Properties
bandwidth_um: 0.35
num_design_frequency_points: 60
num_eval_frequency_points: 360
lambda_values_um: [0.375, 0.3809322033898305, 0.386864406779661, 0.3927966101694915, 0.39872881355932205, 0.4046610169491525, 0.41059322033898304, 0.41652542372881357, 0.42245762711864404, 0.42838983050847457, 0.4343220338983051, 0.4402542372881356, 0.4461864406779661, 0.4521186440677966, 0.45805084745762714, 0.4639830508474576, 0.46991525423728814, 0.47584745762711866, 0.48177966101694913, 0.48771186440677966, 0.4936440677966102, 0.49957627118644066, 0.5055084745762712, 0.5114406779661017, 0.5173728813559322, 0.5233050847457628, 0.5292372881355932, 0.5351694915254237, 0.5411016949152543, 0.5470338983050848, 0.5529661016949152, 0.5588983050847458, 0.5648305084745763, 0.5707627118644067, 0.5766949152542373, 0.5826271186440678, 0.5885593220338983, 0.5944915254237289, 0.6004237288135593, 0.6063559322033898, 0.6122881355932204, 0.6182203389830508, 0.6241525423728813, 0.6300847457627119, 0.6360169491525424, 0.6419491525423728, 0.6478813559322034, 0.6538135593220339, 0.6597457627118644, 0.6656779661016949, 0.6716101694915254, 0.6775423728813559, 0.6834745762711865, 0.6894067796610169, 0.6953389830508474, 0.701271186440678, 0.7072033898305085, 0.7131355932203389, 0.7190677966101695, 0.725]
max_intensity_by_wavelength: [52.61084444444446, 50.98500081044197, 49.433374609660405, 47.95151640407808, 46.53530526346698, 45.18092008442752, 43.884813788858125, 42.64369007615735, 41.45448244432396, 40.31433523036902, 39.22058645092208, 38.17075225030361, 37.16251278624183, 36.19369940333197, 35.26228296169391, 34.36636320343613, 33.50415905278641, 32.67399975736027, 31.87431678822745, 31.10363642539522, 30.360572963215386, 29.643822477178734, 28.952157099706373, 28.28441975798453, 27.63951933170607, 27.016426192856787, 26.414168093481994, 25.831826370748182, 25.268532441625798, 24.723464562204768, 24.19584482905419, 23.68493640218398, 23.190040931087992, 22.71049616707149, 22.245673746613033, 21.79497713190083, 21.357839695934484, 20.933722940709984, 20.522114838021427, 20.12252828332995, 19.73449965397924, 19.357587463786267, 18.991371106714254, 18.63544968295051, 18.28944090126902, 17.952980052064618, 17.62571904590603, 17.30732551287377, 16.997481958330194, 16.69588497111677, 16.402244480490406, 16.116283058399937, 15.83773526396848, 15.566347027288813, 15.30187506986013, 15.044086359197161, 14.792757595328197, 14.547674727068673, 14.308632496113459, 14.075434007134366]
dispersive_range_size_um: 0.35
dispersive_ranges_um: [[0.375, 0.725]]

#* PDAF Functionality Properties
pdaf_focal_spot_x_um: 0.51
pdaf_focal_spot_y_um: 0.51
pdaf_lambda_min_um: 0.375
pdaf_lambda_max_um: 0.49166666666666664
pdaf_lambda_values_um: [0.375, 0.3769774011299435, 0.378954802259887, 0.3809322033898305, 0.382909604519774, 0.3848870056497175, 0.386864406779661, 0.38884180790960454, 0.39081920903954803, 0.3927966101694915, 0.394774011299435, 0.3967514124293785, 0.39872881355932205, 0.40070621468926554, 0.40268361581920903, 0.4046610169491525, 0.40663841807909606, 0.40861581920903955, 0.41059322033898304, 0.41257062146892653, 0.41454802259887, 0.41652542372881357, 0.41850282485875706, 0.42048022598870055, 0.42245762711864404, 0.4244350282485876, 0.4264124293785311, 0.42838983050847457, 0.43036723163841806, 0.43234463276836155, 0.43432203389830504, 0.4362994350282486, 0.4382768361581921, 0.44025423728813556, 0.4422316384180791, 0.4442090395480226, 0.4461864406779661, 0.4481638418079096, 0.45014124293785307, 0.45211864406779656, 0.4540960451977401, 0.4560734463276836, 0.4580508474576271, 0.46002824858757063, 0.4620056497175141, 0.4639830508474576, 0.4659604519774011, 0.4679378531073446, 0.4699152542372881, 0.47189265536723163, 0.4738700564971751, 0.4758474576271186, 0.47782485875706215, 0.47980225988700564, 0.48177966101694913, 0.4837570621468926, 0.4857344632768361, 0.4877118644067796, 0.48968926553672315, 0.49166666666666664]
pdaf_max_intensity_by_wavelength: [52.61084444444446, 52.06036106941459, 51.51847252388663, 50.98500081044197, 50.459772515787094, 49.94261866980895, 49.433374609660405, 48.931879848671514, 48.437977949891916, 47.95151640407808, 47.47234651194793, 47.00032327053321, 46.53530526346698, 46.07715455505197, 45.62573658796086, 45.18092008442752, 44.74257695079326, 44.31058218527887, 43.884813788858125, 43.46515267911444, 43.05148260696698, 42.64369007615735, 42.24166426539312, 41.845296953048056, 41.45448244432396, 41.06911750078211, 40.68910127215721, 40.31433523036902, 39.94472310565177, 39.58017082472361, 39.22058645092209, 38.86588012623455, 38.51596401515526, 38.170752250303615, 37.83016087974073, 37.49410781592403, 37.16251278624183, 36.835297285072244, 36.51238452731323, 36.193699403331976, 35.87916843528465, 35.56871973475898, 35.26228296169393, 34.95978928453291, 34.66117134156823, 34.36636320343613, 34.0753003367238, 33.7879195686504, 33.50415905278642, 33.223958235776365, 32.94725782503149, 32.67399975736028, 32.404127168505845, 32.13758436356033, 31.87431678822745, 31.61427100090576, 31.357394645565762, 31.103636425395223, 30.85294607718795, 30.605274346452173]

#* Forward (Input) Source Properties
lateral_aperture_um: 2.244
src_maximum_vertical_um: 2.55
src_minimum_vertical_um: -1.9124999999999996
mid_lambda_um: 0.55
gaussian_waist_radius_um: 1
source_angle_theta_rad: 0.0
source_angle_theta_deg: 0.0

#* Adjoint Source Properties
adjoint_vertical_um: -1.5299999999999998
num_adjoint_sources: 4
adjoint_x_positions_um: [0.51, -0.51, -0.51, 0.51]
adjoint_y_positions_um: [0.51, 0.51, -0.51, -0.51]

#* Optimization Properties
total_iters: 80
epoch_range_design_change_max: 0.09999999999999999
epoch_range_design_change_min: 0.05
spectral_focal_plane_map: [[0, 20], [20, 40], [40, 60], [20, 40]]
desired_peak_location_per_band: [13, 28, 46]
2024-02-29 23:48:03,059 - template_logger - INFO - Successfully saved output to runs\test_run\processed_config.yml
2024-02-29 23:48:10,139 - template_logger - INFO - Rendered Output:
{ 
    "info": {
        "name": "optimization",
        "path": "",
        "simulator_name": "LumericalFDTD",
        "coordinates": {}
    },

    "objects": {
        "FDTD": {
            
            "name": "FDTD",
            "obj_type": "fdtd",
            "properties": {
                "dimension": "3D",
                "x span": 3.06e-06,
                "y span": 3.06e-06,
                "z max": 2.8049999999999994e-06,
                "z min": -2.2949999999999996e-06,
                "simulation time": 6.000000000000001e-13,
                "index": 1.5
            }
        },
        "forward_src_x": {
            "name": "forward_src_x",
            "obj_type": "gaussian",
            "attached_monitor": 0,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 0,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "z-axis",
                "y span": 6.12e-06,
                "z": 2.5499999999999997e-06,
                "x": 0.0,
                "wavelength start": 3.75e-07,
                "wavelength stop": 7.249999999999999e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -5.099999999999998e-07
            }
        },
        "forward_src_y": {
            "name": "forward_src_y",
            "obj_type": "gaussian",
            "attached_monitor": 1,
            "properties": {
                "angle theta": 0.0,
                "angle phi": 0,
                "polarization angle": 90,
                "direction": "Backward",
                "x span": 6.12e-06,
                "injection axis": "z-axis",
                "y span": 6.12e-06,
                "z": 2.5499999999999997e-06,
                "x": 0.0,
                "wavelength start": 3.75e-07,
                "wavelength stop": 7.249999999999999e-07,
                "waist radius w0": 1e-06,
                "distance from waist": -5.099999999999998e-07
            }
        },
            "adj_src_0x": {
                "name": "adj_src_0x",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": 5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
            "adj_src_0y": {
                "name": "adj_src_0y",
                "obj_type": "dipole",
                "attached_monitor": 0,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": 5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 90,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
            "adj_src_1x": {
                "name": "adj_src_1x",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": 5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
            "adj_src_1y": {
                "name": "adj_src_1y",
                "obj_type": "dipole",
                "attached_monitor": 1,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": 5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 90,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
            "adj_src_2x": {
                "name": "adj_src_2x",
                "obj_type": "dipole",
                "attached_monitor": 2,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
            "adj_src_2y": {
                "name": "adj_src_2y",
                "obj_type": "dipole",
                "attached_monitor": 2,
                
                "properties": {
                    "x": -5.1e-07,
                    "y": -5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 90,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
            "adj_src_3x": {
                "name": "adj_src_3x",
                "obj_type": "dipole",
                "attached_monitor": 3,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 0,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
            "adj_src_3y": {
                "name": "adj_src_3y",
                "obj_type": "dipole",
                "attached_monitor": 3,
                
                "properties": {
                    "x": 5.1e-07,
                    "y": -5.1e-07,
                    "z": -1.5299999999999998e-06,
                    "theta": 90,
                    "phi": 90,
                    "wavelength start": 3.75e-07,
                    "wavelength stop": 7.249999999999999e-07
                }
            },
        "focal_monitor_0": {
            "name": "focal_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": 5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "focal_monitor_1": {
            "name": "focal_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": -5.1e-07,
                "y": 5.1e-07,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "focal_monitor_2": {
            "name": "focal_monitor_2",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": -5.1e-07,
                "y": -5.1e-07,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "focal_monitor_3": {
            "name": "focal_monitor_3",
            "obj_type": "power",
            "properties": {
                "monitor type": "point",
                "x": 5.1e-07,
                "y": -5.1e-07,
                "z": -1.5299999999999998e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "transmission_monitor_0": {
            "name": "transmission_monitor_0",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "y": 5.1e-07,
                "y span": 1.02e-06,
                "z": -1.5299999999999998e-06,
                "x": 5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "transmission_monitor_1": {
            "name": "transmission_monitor_1",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "y": 5.1e-07,
                "y span": 1.02e-06,
                "z": -1.5299999999999998e-06,
                "x": -5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "transmission_monitor_2": {
            "name": "transmission_monitor_2",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "y": -5.1e-07,
                "y span": 1.02e-06,
                "z": -1.5299999999999998e-06,
                "x": -5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "transmission_monitor_3": {
            "name": "transmission_monitor_3",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "y": -5.1e-07,
                "y span": 1.02e-06,
                "z": -1.5299999999999998e-06,
                "x": 5.1e-07,
                "x span": 1.02e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },

        "transmission_focal_monitor_": {
            "name": "transmission_focal_monitor_",
            "obj_type": "power",
            "properties": {
                "monitor type": "2D Z-normal",
                "y": 0,
                "y span": 2.04e-06,
                "z": -1.5299999999999998e-06,
                "x": 0,
                "x span": 2.04e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "use source limits": 1,
                "frequency points": 60
            }
        },
        "PEC_screen": {
            "name": "PEC_screen",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 3.5904e-06,
                "y": 0,
                "y span": 3.5904e-06,
                "z min": 2.193e-06,
                "z max": 2.346e-06,
                "material": "PEC (Perfect Electrical Conductor)"
            }
        },
        "source_aperture": {
            "name": "source_aperture",
            "obj_type": "rect",
            "properties": {
                "x": 0,
                "x span": 2.04e-06,
                "y": 0,
                "y span": 2.04e-06,
                "z min": 2.193e-06,
                "z max": 2.346e-06,
                "index": 1.5
            }
        },
        "design_import": {
            "name": "design_import",
            "obj_type": "import",
            "dev_id": 0,                
            "properties": {
                "x span": 2.04e-06,
                "y span": 2.04e-06,
                "z min": 0.0,
                "z max": 2.04e-06
            }
        },
        "design_mesh": {
            "name": "design_mesh",
            "obj_type": "mesh",
            "dev_id": 0,
            "properties": {
                "x": 0,
                "x span": 3.06e-06,
                "y": 0,
                "y span": 3.06e-06,
                "z min": -5e-07,
                "z max": 2.54e-06,
                "dx": 5.0999999999999993e-08,
                "dy": 5.0999999999999993e-08,
                "dz": 5.0999999999999993e-08
            }
        },
        "design_index_monitor": {
            "name": "design_index_monitor",
            "obj_type": "index",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "3D",
                "y span": 2.04e-06,
                "z min": 0.0,
                "z max": 2.04e-06,
                "spatial interpolation": "nearest mesh cell"
            }
        },
        "design_efield_monitor": {
            "name": "design_efield_monitor",
            "obj_type": "profile",
            "dev_id": 0,
            "properties": {
                "x span": 2.04e-06,
                "monitor type": "3D",
                "y span": 2.04e-06,
                "z min": 0.0,
                "z max": 2.04e-06,
                "override global monitor settings": 1,
                "use wavelength spacing": 1,
                "frequency points": 60,
                "output Hx": 0,
                "output Hy": 0,
                "output Hz": 0
            }
        }
    }
}
2024-02-29 23:48:10,144 - template_logger - INFO - Successfully saved output to runs\test_run\sim.json
